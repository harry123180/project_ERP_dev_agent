# ERP æ¡è³¼ç³»çµ±å‰ç«¯è¦æ ¼æ›¸ - UX è¨­è¨ˆè¦ç¯„

## ğŸ“‹ ç›®éŒ„
1. [ç³»çµ±æ¦‚è¦½](#ç³»çµ±æ¦‚è¦½)
2. [ç”¨æˆ¶æ—…ç¨‹åœ°åœ–](#ç”¨æˆ¶æ—…ç¨‹åœ°åœ–)  
3. [é é¢è¨­è¨ˆè¦æ ¼](#é é¢è¨­è¨ˆè¦æ ¼)
4. [éŸ¿æ‡‰å¼è¨­è¨ˆç­–ç•¥](#éŸ¿æ‡‰å¼è¨­è¨ˆç­–ç•¥)
5. [çµ„ä»¶åº«ä½¿ç”¨æŒ‡å—](#çµ„ä»¶åº«ä½¿ç”¨æŒ‡å—)
6. [äº’å‹•è¨­è¨ˆæ¨¡å¼](#äº’å‹•è¨­è¨ˆæ¨¡å¼)
7. [ç„¡éšœç¤™è¨­è¨ˆè¦ç¯„](#ç„¡éšœç¤™è¨­è¨ˆè¦ç¯„)

---

## ç³»çµ±æ¦‚è¦½

### æ ¸å¿ƒæ¥­å‹™æµç¨‹
1. **è«‹è³¼å¯©æ ¸** â†’ 2. **æ¡è³¼å–®è£½ä½œ** â†’ 3. **æ¡è³¼ç¢ºèª** â†’ 4. **äº¤æœŸç¶­è­·** â†’ 5. **åˆ°è²¨é©—æ”¶**

### ç”¨æˆ¶è§’è‰²èˆ‡æ¬Šé™
- **è«‹è³¼äººå“¡**: æäº¤è«‹è³¼å–®ã€æŸ¥çœ‹ç‰©æµç‹€æ…‹
- **æ¡è³¼äººå“¡**: å¯©æ ¸è«‹è³¼ã€è£½ä½œæ¡è³¼å–®ã€ç¶­è­·äº¤æœŸ
- **æ¡è³¼ä¸»ç®¡**: æœ€çµ‚ç¢ºèªæ¡è³¼ã€æ¬Šé™ç®¡ç†

---

## ç”¨æˆ¶æ—…ç¨‹åœ°åœ–

### æ¡è³¼äººå“¡æ ¸å¿ƒå·¥ä½œæµç¨‹

```mermaid
graph TD
    A[é€²å…¥æ¡è³¼å–®åˆ—è¡¨] --> B{æª¢æŸ¥å¾…æ¡è³¼é …ç›®}
    B -->|æœ‰é …ç›®| C[é¸æ“‡ä¾›æ‡‰å•†]
    B -->|ç„¡é …ç›®| D[ç­‰å¾…è«‹è³¼å¯©æ ¸]
    C --> E[é€²å…¥æ¡è³¼å–®ç·¨è¼¯]
    E --> F[é¸æ“‡é …ç›®æ”¾å…¥æ¡è³¼å–®]
    F --> G[é è¦½ä¸¦ç¢ºèªæ¡è³¼å–®]
    G --> H[å„²å­˜/è¼¸å‡ºæ¡è³¼å–®]
    H --> I[å¯¦é«”ç™¼é€çµ¦ä¾›æ‡‰å•†]
    I --> J[å›ç³»çµ±ç¢ºèªæ¡è³¼]
    J --> K[äº¤æœŸç¶­è­·]
```

---

## é é¢è¨­è¨ˆè¦æ ¼

## 1. æ¡è³¼å–®åˆ—è¡¨é é¢ (PO List Page)

### é é¢çµæ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ æ¡è³¼å–®å»ºç«‹ - ä¾›æ‡‰å•†åˆ†çµ„           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç¯©é¸å™¨] [é‡æ–°æ•´ç†] [å…¨éƒ¨å»ºç«‹]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¦ ä¾›æ‡‰å•†A (5é …å¾…æ¡è³¼)             â”‚
â”‚ â”œ ç¸½é‡‘é¡: NT$12,500               â”‚
â”‚ â”” [é€²å…¥ç·¨è¼¯] [å¿«é€Ÿå»ºç«‹]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¦ ä¾›æ‡‰å•†B (3é …å¾…æ¡è³¼)             â”‚
â”‚ â”œ ç¸½é‡‘é¡: NT$8,900                â”‚
â”‚ â”” [é€²å…¥ç·¨è¼¯] [å¿«é€Ÿå»ºç«‹]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Vue çµ„ä»¶è¨­è¨ˆ
```vue
<template>
  <div class="po-list-page">
    <!-- é é¢æ¨™é¡Œèˆ‡æ§åˆ¶é … -->
    <PageHeader
      title="æ¡è³¼å–®å»ºç«‹"
      subtitle="ä¾ä¾›æ‡‰å•†åˆ†çµ„çš„å¾…æ¡è³¼é …ç›®"
      :show-refresh="true"
      @refresh="handleRefresh"
    />

    <!-- æ“ä½œå·¥å…·åˆ— -->
    <div class="toolbar">
      <el-row :gutter="16" justify="space-between">
        <el-col :span="12">
          <el-input
            v-model="searchKeyword"
            placeholder="æœå°‹ä¾›æ‡‰å•†åç¨±..."
            clearable
            @input="handleSearch"
          >
            <template #prefix>
              <el-icon><Search /></el-icon>
            </template>
          </el-input>
        </el-col>
        <el-col :span="12" class="text-right">
          <el-button 
            type="success" 
            @click="createAllPOs"
            :disabled="!hasAvailableSuppliers"
          >
            <el-icon><DocumentAdd /></el-icon>
            æ‰¹é‡å»ºç«‹å…¨éƒ¨æ¡è³¼å–®
          </el-button>
        </el-col>
      </el-row>
    </div>

    <!-- ä¾›æ‡‰å•†å¡ç‰‡åˆ—è¡¨ -->
    <div v-if="loading" class="loading-container">
      <el-skeleton :rows="6" animated />
    </div>

    <div v-else-if="supplierGroups.length === 0" class="empty-state">
      <el-empty description="æš«ç„¡å¾…æ¡è³¼é …ç›®">
        <template #image>
          <el-icon size="60"><Box /></el-icon>
        </template>
        <el-button type="primary" @click="$router.push('/requisitions')">
          å‰å¾€è«‹è³¼ç®¡ç†
        </el-button>
      </el-empty>
    </div>

    <div v-else class="supplier-cards">
      <el-card 
        v-for="supplier in filteredSuppliers" 
        :key="supplier.supplier_id"
        class="supplier-card"
        shadow="hover"
      >
        <template #header>
          <div class="supplier-header">
            <div class="supplier-info">
              <div class="supplier-name">
                <h3>{{ supplier.supplier_name_zh }}</h3>
                <el-tag 
                  :type="getSupplierTypeTag(supplier.region)"
                  size="small"
                >
                  {{ supplier.region === 'domestic' ? 'åœ‹å…§' : 'æµ·å¤–' }}
                </el-tag>
              </div>
              <div class="supplier-meta">
                <el-tag type="info" class="item-count">
                  <el-icon><List /></el-icon>
                  {{ supplier.items.length }} é …å¾…æ¡è³¼
                </el-tag>
                <el-tag type="success" class="total-amount">
                  <el-icon><Money /></el-icon>
                  ç¸½é¡ {{ formatCurrency(supplier.totalAmount) }}
                </el-tag>
              </div>
            </div>
            <div class="supplier-actions">
              <el-button 
                type="primary" 
                @click="enterPOEditor(supplier)"
                :loading="loadingSuppliers.has(supplier.supplier_id)"
              >
                é€²å…¥ç·¨è¼¯
              </el-button>
              <el-button 
                type="success" 
                plain
                @click="quickCreatePO(supplier)"
                :loading="creatingPOs.has(supplier.supplier_id)"
              >
                å¿«é€Ÿå»ºç«‹
              </el-button>
            </div>
          </div>
        </template>

        <!-- é …ç›®é è¦½è¡¨æ ¼ -->
        <el-table 
          :data="supplier.items.slice(0, 3)" 
          size="small"
          :show-header="false"
        >
          <el-table-column width="40">
            <template #default="{ $index }">
              <span class="item-index">{{ $index + 1 }}</span>
            </template>
          </el-table-column>
          <el-table-column>
            <template #default="{ row }">
              <div class="item-preview">
                <div class="item-name">{{ row.item_name }}</div>
                <div class="item-spec">{{ row.item_specification }}</div>
              </div>
            </template>
          </el-table-column>
          <el-table-column width="80" align="right">
            <template #default="{ row }">
              <div class="item-quantity">
                <span>{{ row.item_quantity }}</span>
                <small>{{ row.item_unit }}</small>
              </div>
            </template>
          </el-table-column>
          <el-table-column width="100" align="right">
            <template #default="{ row }">
              <span class="money-text">
                {{ formatCurrency(row.unit_price * row.item_quantity) }}
              </span>
            </template>
          </el-table-column>
        </el-table>

        <!-- æ›´å¤šé …ç›®æŒ‡ç¤ºå™¨ -->
        <div v-if="supplier.items.length > 3" class="more-items">
          <el-divider>
            <el-tag type="info" size="small">
              é‚„æœ‰ {{ supplier.items.length - 3 }} é …...
            </el-tag>
          </el-divider>
        </div>
      </el-card>
    </div>
  </div>
</template>
```

### Element Plus çµ„ä»¶é…ç½®
- **el-card**: shadow="hover" æä¾›äº’å‹•å›é¥‹
- **el-tag**: ä¸åŒtypeå€åˆ†åœ‹å…§å¤–ä¾›æ‡‰å•† 
- **el-button**: ä¸»è¦æ“ä½œç”¨primaryï¼Œæ¬¡è¦æ“ä½œç”¨plain
- **el-table**: size="small" ç¯€çœç©ºé–“ï¼Œ:show-header="false" ç°¡åŒ–é è¦½

---

## 2. æ¡è³¼å–®ç·¨è¼¯é é¢ (PO Editor Page) - é‡é»è¨­è¨ˆ

### å·¦å³åˆ†æ¬„ä½ˆå±€çµæ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å·¦å´ (40%)     â”‚ å³å´ (60%)                 â”‚
â”‚ å¾…æ¡è³¼é …ç›®æ¸…å–® â”‚ æ¡è³¼å–®å³æ™‚é è¦½             â”‚
â”‚                â”‚                            â”‚
â”‚ â˜‘ é …ç›®A        â”‚ â”Œâ”€ æ¡è³¼å–®é è¦½ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â˜ é …ç›®B        â”‚ â”‚ ä¾›æ‡‰å•†: æ–°äºæ´²        â”‚   â”‚
â”‚ â˜‘ é …ç›®C        â”‚ â”‚ æ¡è³¼å–®è™Ÿ: PO2025...   â”‚   â”‚
â”‚                â”‚ â”‚                       â”‚   â”‚
â”‚ [æ”¾å…¥æ¡è³¼å–®]   â”‚ â”‚ é …ç›®æ¸…å–®              â”‚   â”‚
â”‚ [å…¨é¸/å–æ¶ˆ]    â”‚ â”‚ 1. é …ç›®A  NT$1,200    â”‚   â”‚
â”‚                â”‚ â”‚ 3. é …ç›®C  NT$800      â”‚   â”‚
â”‚                â”‚ â”‚                       â”‚   â”‚
â”‚                â”‚ â”‚ å°è¨ˆ: NT$2,000        â”‚   â”‚
â”‚                â”‚ â”‚ ç¨…é¡: NT$100.0        â”‚   â”‚  
â”‚                â”‚ â”‚ ç¸½è¨ˆ: NT$2,100        â”‚   â”‚
â”‚                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Vue çµ„ä»¶è¨­è¨ˆ
```vue
<template>
  <div class="po-editor-page">
    <PageHeader
      :title="`ç·¨è¼¯æ¡è³¼å–® - ${supplierInfo?.supplier_name_zh}`"
      subtitle="é¸æ“‡é …ç›®å»ºç«‹æ¡è³¼å–®"
      :show-back="true"
      @back="handleBack"
    />

    <div class="editor-container">
      <!-- å·¦å´: é …ç›®é¸æ“‡å€ -->
      <div class="items-selector">
        <div class="selector-header">
          <h4>å¾…æ¡è³¼é …ç›®æ¸…å–®</h4>
          <div class="batch-controls">
            <el-button 
              size="small" 
              @click="selectAll"
              :disabled="selectedItems.size === availableItems.length"
            >
              å…¨é¸
            </el-button>
            <el-button 
              size="small" 
              @click="clearSelection"
              :disabled="selectedItems.size === 0"
            >
              æ¸…ç©º
            </el-button>
          </div>
        </div>

        <!-- é …ç›®ç¯©é¸èˆ‡æœå°‹ -->
        <div class="selector-filters">
          <el-input
            v-model="itemSearchKeyword"
            placeholder="æœå°‹é …ç›®åç¨±æˆ–è¦æ ¼..."
            clearable
            size="small"
          >
            <template #prefix>
              <el-icon><Search /></el-icon>
            </template>
          </el-input>
        </div>

        <!-- é …ç›®åˆ—è¡¨ -->
        <div class="items-list">
          <div
            v-for="item in filteredItems"
            :key="item.detail_id"
            class="item-row"
            :class="{ 'selected': selectedItems.has(item.detail_id) }"
            @click="toggleItem(item)"
          >
            <el-checkbox
              :model-value="selectedItems.has(item.detail_id)"
              @change="toggleItem(item)"
              @click.stop
            />
            
            <div class="item-content">
              <div class="item-main">
                <div class="item-name">{{ item.item_name }}</div>
                <div class="item-spec">{{ item.item_specification }}</div>
              </div>
              
              <div class="item-details">
                <div class="quantity-info">
                  <span class="quantity">{{ item.item_quantity }}</span>
                  <span class="unit">{{ item.item_unit }}</span>
                </div>
                <div class="price-info">
                  <div class="unit-price">
                    å–®åƒ¹: {{ formatCurrency(item.unit_price) }}
                  </div>
                  <div class="subtotal">
                    å°è¨ˆ: {{ formatCurrency(calculateItemSubtotal(item)) }}
                  </div>
                </div>
              </div>
              
              <div class="item-meta">
                <el-tag size="small" type="info">
                  {{ item.source_request_order_no }}
                </el-tag>
              </div>
            </div>
          </div>
        </div>

        <!-- æ“ä½œæŒ‰éˆ• -->
        <div class="selector-actions">
          <el-button
            type="primary"
            size="large"
            @click="addSelectedToPO"
            :disabled="selectedItems.size === 0"
            :loading="addingItems"
          >
            <el-icon><Plus /></el-icon>
            æ”¾å…¥æ¡è³¼å–® ({{ selectedItems.size }})
          </el-button>
        </div>
      </div>

      <!-- å³å´: æ¡è³¼å–®é è¦½å€ -->
      <div class="po-preview">
        <div class="preview-header">
          <h4>æ¡è³¼å–®é è¦½</h4>
          <div class="preview-controls">
            <el-button 
              size="small" 
              type="danger"
              plain
              @click="clearPO"
              :disabled="poItems.length === 0"
            >
              æ¸…ç©ºæ¡è³¼å–®
            </el-button>
          </div>
        </div>

        <!-- æ¡è³¼å–®å…§å®¹é è¦½ -->
        <div v-if="poItems.length === 0" class="empty-preview">
          <el-empty description="å°šæœªé¸æ“‡ä»»ä½•é …ç›®" :image-size="80">
            <template #image>
              <el-icon size="80"><Document /></el-icon>
            </template>
          </el-empty>
        </div>

        <div v-else class="po-document">
          <!-- æ¡è³¼å–®è¡¨é ­ -->
          <div class="po-header">
            <div class="company-logo">
              <h2>æ¡è³¼å–®</h2>
            </div>
            <div class="po-number">
              <strong>æ¡è³¼å–®è™Ÿ: {{ generatedPONumber }}</strong>
            </div>
          </div>

          <!-- ä¾›æ‡‰å•†è³‡è¨Šå€å¡Š -->
          <div class="supplier-section">
            <div class="section-title">ä¾›æ‡‰å•†è³‡è¨Š</div>
            <el-row :gutter="20">
              <el-col :span="12">
                <div class="info-item">
                  <label>å» å•†åç¨±:</label>
                  <span>{{ supplierInfo?.supplier_name_zh }}</span>
                </div>
                <div class="info-item">
                  <label>å» å•†ç·¨è™Ÿ:</label>
                  <span>{{ supplierInfo?.supplier_code }}</span>
                </div>
                <div class="info-item">
                  <label>è¯çµ¡äºº:</label>
                  <span>{{ supplierInfo?.contact_person || 'å¾…ç¢ºèª' }}</span>
                </div>
              </el-col>
              <el-col :span="12">
                <div class="info-item">
                  <label>å» å•†åœ°å€:</label>
                  <span>{{ supplierInfo?.supplier_address }}</span>
                </div>
                <div class="info-item">
                  <label>é€£çµ¡é›»è©±:</label>
                  <span>{{ supplierInfo?.contact_phone || 'å¾…ç¢ºèª' }}</span>
                </div>
                <div class="info-item">
                  <label>è¨‚è³¼æ—¥æœŸ:</label>
                  <span>{{ formatDate(new Date()) }}</span>
                </div>
              </el-col>
            </el-row>
          </div>

          <!-- æ¡è³¼æ˜ç´°è¡¨æ ¼ -->
          <div class="items-section">
            <div class="section-title">æ¡è³¼æ˜ç´°</div>
            <el-table 
              :data="poItems" 
              border 
              :summary-method="getSummaries"
              show-summary
              class="po-table"
            >
              <el-table-column type="index" label="é …ç›®" width="60" align="center" />
              <el-table-column label="ç”¢å“å‹è™Ÿ" prop="item_code" width="120" />
              <el-table-column label="åç¨±" prop="item_name" min-width="150" />
              <el-table-column label="è¦æ ¼" prop="item_specification" min-width="120" />
              <el-table-column label="æ•¸é‡" prop="item_quantity" width="80" align="center" />
              <el-table-column label="å–®ä½" prop="item_unit" width="60" align="center" />
              <el-table-column label="å–®åƒ¹" width="100" align="right">
                <template #default="{ row }">
                  <span class="money-text">{{ formatCurrency(row.unit_price) }}</span>
                </template>
              </el-table-column>
              <el-table-column label="é‡‘é¡" width="120" align="right">
                <template #default="{ row }">
                  <span class="money-text">{{ formatCurrency(calculateItemSubtotal(row)) }}</span>
                </template>
              </el-table-column>
              <el-table-column label="æ“ä½œ" width="80" align="center">
                <template #default="{ row }">
                  <el-button
                    type="danger"
                    size="small"
                    text
                    @click="removeFromPO(row)"
                  >
                    ç§»é™¤
                  </el-button>
                </template>
              </el-table-column>
            </el-table>
          </div>

          <!-- é‡‘é¡è¨ˆç®—å€å¡Š -->
          <div class="amount-section">
            <el-row justify="end">
              <el-col :span="8">
                <div class="amount-breakdown">
                  <div class="amount-item">
                    <label>æœªç¨…é‡‘é¡(NTD):</label>
                    <span class="money-large">{{ formatCurrency(subtotalAmount) }}</span>
                  </div>
                  <div class="amount-item tax-item">
                    <label>ç¨…é‡‘5%:</label>
                    <span class="money-large">{{ formatCurrency(taxAmount, true) }}</span>
                  </div>
                  <el-divider />
                  <div class="amount-item total-item">
                    <label>åˆè¨ˆ:</label>
                    <span class="money-large total-money">{{ formatCurrency(totalAmount) }}</span>
                  </div>
                </div>
              </el-col>
            </el-row>
          </div>

          <!-- æ³¨æ„äº‹é …å€å¡Š -->
          <div class="notes-section">
            <div class="section-title">æ³¨æ„äº‹é …</div>
            <div class="notes-content">
              <p>èŒ²ç‚ºæœ¬å…¬å¸å‘å» å•†è³¼è²·å» å•†ç”¢å“æˆ–æœå‹™(ä»¥ä¸‹ç°¡ç¨±æœ¬ç”¢å“),çˆ°ç¶“é›™æ–¹è­°å®šç°½è¨‚æœ¬è¨‚å–®ä¸¦åŒæ„å„é …äº¤æ˜“æ¢ä»¶å¦‚ä¸‹(ä»¥ä¸‹ç°¡ç¨±æœ¬äº¤æ˜“):</p>
              <ul>
                <li>å¯„è²¨åœ°å€: å°å—å¸‚æ­¸ä»å€æ­¸ä»åä¸‰è·¯ä¸€æ®µ6è™Ÿ6æ¨“</li>
                <li>è«‹æ–¼æ”¶åˆ°è¨‚å–®å¾Œä¸‰å¤©å…§ç°½ç½²ä¸¦å›è¦†è‡³æœ¬å…¬å¸æ¡è³¼éƒ¨ã€‚</li>
                <li>è«‹ä¾æ³•é–‹ç«‹5%ç¨…ç‡ç™¼ç¥¨ã€‚ç‚ºé¿å…å»¶é²ä»˜æ¬¾,è«‹å‹™å¿…æ–¼ç™¼ç¥¨ä¸Šè¨»æ˜è¨‚å–®è™Ÿç¢¼ã€é …ç›®åŠå“å,å¯„è‡³æœ¬å…¬å¸æœƒè¨ˆéƒ¨,ä¸¦é€šçŸ¥ä½¿ç”¨å–®ä½é©—æ”¶ã€‚</li>
              </ul>
              <div class="signature-area">
                <p>ç°½ç« æ—¥æœŸï¼š _______________</p>
              </div>
            </div>
          </div>
        </div>

        <!-- æœ€çµ‚æ“ä½œæŒ‰éˆ• -->
        <div class="po-actions" v-if="poItems.length > 0">
          <el-row :gutter="16">
            <el-col :span="12">
              <el-button
                size="large"
                @click="saveDraft"
                :loading="saving"
                style="width: 100%"
              >
                <el-icon><DocumentCopy /></el-icon>
                å„²å­˜è‰ç¨¿
              </el-button>
            </el-col>
            <el-col :span="12">
              <el-button
                type="primary"
                size="large"
                @click="confirmAndCreatePO"
                :loading="creating"
                style="width: 100%"
              >
                <el-icon><Check /></el-icon>
                ç¢ºèªå»ºç«‹æ¡è³¼å–®
              </el-button>
            </el-col>
          </el-row>
        </div>
      </div>
    </div>
  </div>
</template>
```

### é‡‘é¡è¨ˆç®—é‚è¼¯å¯¦ä½œ
```typescript
// è¨ˆç®—è¦å‰‡ (æ ¹æ“šéœ€æ±‚è¦å®š)
const calculateItemSubtotal = (item: POItem): number => {
  // æ•¸é‡ * å–®åƒ¹ï¼Œå››æ¨äº”å…¥ç‚ºæ•´æ•¸
  return Math.round(item.item_quantity * item.unit_price)
}

const subtotalAmount = computed(() => {
  // ç¸½è¨ˆï¼ˆæœªç¨…ï¼‰æ­£æ•´æ•¸
  return poItems.value.reduce((sum, item) => sum + calculateItemSubtotal(item), 0)
})

const taxAmount = computed(() => {
  // ç¨…é¡ = æœªç¨…é‡‘é¡ * 5%ï¼Œä¿ç•™1ä½å°æ•¸
  return Math.round(subtotalAmount.value * 0.05 * 10) / 10
})

const totalAmount = computed(() => {
  // å«ç¨…ç¸½é¡ = æœªç¨… + ç¨…é¡ï¼Œå››æ¨äº”å…¥ç‚ºæ•´æ•¸
  return Math.round(subtotalAmount.value + taxAmount.value)
})
```

---

## 3. äº¤æœŸç¶­è­·é é¢ (Lead Time Management)

### é é¢çµæ§‹è¨­è¨ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸšš äº¤æœŸç¶­è­·ç®¡ç†                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [åœ‹å…§ä¾›æ‡‰å•†] [æµ·å¤–ä¾›æ‡‰å•†] [é›†é‹å€‰ç®¡ç†]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¦ PO20250901001 - æ–°äºæ´²                  â”‚
â”‚ â”œ ç‹€æ…‹: [å·²æ¡è³¼] â†’ [å·²ç™¼è²¨]                â”‚
â”‚ â”œ é è¨ˆåˆ°è²¨: [æ—¥æœŸé¸æ“‡å™¨]                   â”‚
â”‚ â”” ç‰©æµå‚™è¨»: [æ–‡å­—è¼¸å…¥æ¡†]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŒ é›†é‹å€‰A (3å¼µæ¡è³¼å–®)                     â”‚
â”‚ â”œ ç‹€æ…‹: [ç‰©æµä¸­] â†’ [æ¸…é—œä¸­]                â”‚
â”‚ â”œ é è¨ˆåˆ°è²¨: [æ—¥æœŸé¸æ“‡å™¨]                   â”‚
â”‚ â”” è¿½è¹¤ç¢¼: [æ–‡å­—è¼¸å…¥æ¡†]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Vue çµ„ä»¶è¨­è¨ˆ
```vue
<template>
  <div class="leadtime-management">
    <PageHeader
      title="äº¤æœŸç¶­è­·ç®¡ç†"
      subtitle="æ›´æ–°æ¡è³¼å–®ç‰©æµç‹€æ…‹èˆ‡äº¤æœŸè³‡è¨Š"
    />

    <!-- åˆ†é æ¨™ç±¤ -->
    <el-tabs v-model="activeTab" class="leadtime-tabs">
      <el-tab-pane label="åœ‹å…§ä¾›æ‡‰å•†" name="domestic">
        <DomesticPOList 
          :pos="domesticPOs" 
          @update-status="handleUpdatePOStatus"
          @update-delivery="handleUpdateDelivery"
        />
      </el-tab-pane>
      
      <el-tab-pane label="æµ·å¤–ä¾›æ‡‰å•†" name="international">
        <InternationalPOList 
          :pos="internationalPOs"
          @update-status="handleUpdatePOStatus" 
          @create-consolidation="handleCreateConsolidation"
        />
      </el-tab-pane>
      
      <el-tab-pane label="é›†é‹å€‰ç®¡ç†" name="consolidation">
        <ConsolidationManagement
          :consolidations="consolidations"
          @update-consolidation="handleUpdateConsolidation"
          @update-milestone="handleUpdateMilestone"
        />
      </el-tab-pane>
    </el-tabs>
  </div>
</template>
```

### åœ‹å…§æ¡è³¼å–®ç®¡ç†çµ„ä»¶
```vue
<template>
  <div class="domestic-po-list">
    <div class="po-cards">
      <el-card 
        v-for="po in pos"
        :key="po.po_no"
        class="po-card"
        shadow="hover"
      >
        <!-- æ¡è³¼å–®æ¨™é¡Œ -->
        <template #header>
          <div class="po-header">
            <div class="po-info">
              <h4>{{ po.po_no }}</h4>
              <span class="supplier-name">{{ po.supplier_name_zh }}</span>
            </div>
            <div class="po-status">
              <el-tag :type="getStatusType(po.current_status)">
                {{ getStatusText(po.current_status) }}
              </el-tag>
            </div>
          </div>
        </template>

        <!-- ç‹€æ…‹æ›´æ–°å€åŸŸ -->
        <div class="status-update">
          <el-form :model="po" label-width="100px">
            <el-form-item label="æ›´æ–°ç‹€æ…‹:">
              <el-select 
                v-model="po.next_status" 
                placeholder="é¸æ“‡æ–°ç‹€æ…‹"
                @change="handleStatusChange(po)"
              >
                <el-option 
                  v-for="status in getAvailableStatuses(po.current_status)"
                  :key="status.value"
                  :label="status.label"
                  :value="status.value"
                />
              </el-select>
            </el-form-item>

            <el-form-item 
              label="é è¨ˆåˆ°è²¨:" 
              v-if="po.next_status === 'shipped'"
            >
              <el-date-picker
                v-model="po.expected_delivery_date"
                type="date"
                placeholder="é¸æ“‡é è¨ˆåˆ°è²¨æ—¥æœŸ"
                format="YYYY/MM/DD"
                value-format="YYYY-MM-DD"
              />
            </el-form-item>

            <el-form-item label="ç‰©æµå‚™è¨»:">
              <el-input
                v-model="po.logistics_notes"
                type="textarea"
                :rows="2"
                placeholder="è¼¸å…¥ç‰©æµè¿½è¹¤ç¢¼æˆ–å…¶ä»–å‚™è¨»è³‡è¨Š..."
              />
            </el-form-item>

            <el-form-item>
              <el-button 
                type="primary" 
                @click="updatePOStatus(po)"
                :loading="updating.has(po.po_no)"
              >
                æ›´æ–°ç‹€æ…‹
              </el-button>
            </el-form-item>
          </el-form>
        </div>

        <!-- æ¡è³¼é …ç›®é è¦½ -->
        <el-collapse>
          <el-collapse-item title="æŸ¥çœ‹æ¡è³¼é …ç›®" name="items">
            <el-table :data="po.items" size="small">
              <el-table-column prop="item_name" label="é …ç›®" />
              <el-table-column prop="item_quantity" label="æ•¸é‡" width="80" />
              <el-table-column prop="item_unit" label="å–®ä½" width="60" />
              <el-table-column label="ç‹€æ…‹" width="100">
                <template #default="{ row }">
                  <el-tag size="small" :type="getStatusType(row.status)">
                    {{ getStatusText(row.status) }}
                  </el-tag>
                </template>
              </el-table-column>
            </el-table>
          </el-collapse-item>
        </el-collapse>
      </el-card>
    </div>
  </div>
</template>
```

### é›†é‹å€‰ç®¡ç†çµ„ä»¶
```vue
<template>
  <div class="consolidation-management">
    <!-- æ–°å»ºé›†é‹å€‰ -->
    <div class="create-consolidation">
      <el-button 
        type="primary" 
        @click="showCreateDialog = true"
        icon="Plus"
      >
        æ–°å»ºé›†é‹å€‰
      </el-button>
    </div>

    <!-- é›†é‹å€‰åˆ—è¡¨ -->
    <div class="consolidation-list">
      <el-card 
        v-for="consolidation in consolidations"
        :key="consolidation.consolidation_id"
        class="consolidation-card"
      >
        <template #header>
          <div class="consolidation-header">
            <div class="consolidation-info">
              <h4>{{ consolidation.consolidation_name }}</h4>
              <el-tag type="info">
                {{ consolidation.po_list.length }} å¼µæ¡è³¼å–®
              </el-tag>
            </div>
            <div class="consolidation-status">
              <el-tag :type="getStatusType(consolidation.status)">
                {{ getStatusText(consolidation.status) }}
              </el-tag>
            </div>
          </div>
        </template>

        <!-- é›†é‹å€‰ç‹€æ…‹æ›´æ–° -->
        <div class="consolidation-update">
          <el-timeline>
            <el-timeline-item
              v-for="milestone in consolidation.milestones"
              :key="milestone.milestone_type"
              :timestamp="milestone.updated_at"
              :type="getMilestoneType(milestone.status)"
            >
              <el-card shadow="never">
                <div class="milestone-content">
                  <div class="milestone-title">
                    {{ getMilestoneTitle(milestone.milestone_type) }}
                  </div>
                  <div class="milestone-actions" v-if="!milestone.completed">
                    <el-button 
                      size="small" 
                      type="primary"
                      @click="completeMilestone(consolidation, milestone)"
                    >
                      æ¨™è¨˜å®Œæˆ
                    </el-button>
                  </div>
                </div>
              </el-card>
            </el-timeline-item>
          </el-timeline>
        </div>

        <!-- ç‰©æµè³‡è¨Šè¼¸å…¥ -->
        <div class="logistics-info">
          <el-form :model="consolidation" label-width="100px">
            <el-form-item label="è¿½è¹¤ç¢¼:">
              <el-input
                v-model="consolidation.tracking_code"
                placeholder="è¼¸å…¥ç‰©æµè¿½è¹¤ç¢¼..."
              />
            </el-form-item>
            <el-form-item label="ç‰©æµæ¥­è€…:">
              <el-input
                v-model="consolidation.logistics_company"
                placeholder="è¼¸å…¥ç‰©æµæ¥­è€…åç¨±..."
              />
            </el-form-item>
            <el-form-item label="å‚™è¨»:">
              <el-input
                v-model="consolidation.notes"
                type="textarea"
                :rows="2"
                placeholder="å…¶ä»–ç‰©æµå‚™è¨»è³‡è¨Š..."
              />
            </el-form-item>
            <el-form-item>
              <el-button 
                type="primary"
                @click="updateConsolidationInfo(consolidation)"
              >
                æ›´æ–°ç‰©æµè³‡è¨Š
              </el-button>
            </el-form-item>
          </el-form>
        </div>

        <!-- åŒ…å«çš„æ¡è³¼å–® -->
        <el-collapse>
          <el-collapse-item title="æŸ¥çœ‹åŒ…å«æ¡è³¼å–®" name="pos">
            <el-table :data="consolidation.po_list" size="small">
              <el-table-column prop="po_no" label="æ¡è³¼å–®è™Ÿ" />
              <el-table-column prop="supplier_name_zh" label="ä¾›æ‡‰å•†" />
              <el-table-column prop="total_amount" label="é‡‘é¡" align="right">
                <template #default="{ row }">
                  {{ formatCurrency(row.total_amount) }}
                </template>
              </el-table-column>
              <el-table-column label="æ“ä½œ" width="100">
                <template #default="{ row }">
                  <el-button 
                    type="danger" 
                    size="small" 
                    text
                    @click="removePOFromConsolidation(consolidation, row)"
                  >
                    ç§»é™¤
                  </el-button>
                </template>
              </el-table-column>
            </el-table>
          </el-collapse-item>
        </el-collapse>
      </el-card>
    </div>

    <!-- æ–°å»ºé›†é‹å€‰å°è©±æ¡† -->
    <el-dialog
      v-model="showCreateDialog"
      title="æ–°å»ºé›†é‹å€‰"
      width="600px"
    >
      <CreateConsolidationForm
        :available-pos="availableInternationalPOs"
        @created="handleConsolidationCreated"
        @cancel="showCreateDialog = false"
      />
    </el-dialog>
  </div>
</template>
```

---

## éŸ¿æ‡‰å¼è¨­è¨ˆç­–ç•¥

### æ–·é»å®šç¾©
```scss
$breakpoints: (
  xs: 0,      // < 576px (æ‰‹æ©Ÿç›´å‘)
  sm: 576px,  // 576px - 768px (æ‰‹æ©Ÿæ©«å‘) 
  md: 768px,  // 768px - 992px (å¹³æ¿ç›´å‘)
  lg: 992px,  // 992px - 1200px (å¹³æ¿æ©«å‘/å°ç­†é›»)
  xl: 1200px, // 1200px - 1600px (ç­†é›»)
  xxl: 1600px // > 1600px (æ¡Œæ©Ÿ)
);
```

### æ¡è³¼å–®ç·¨è¼¯é é¢éŸ¿æ‡‰å¼è¨­è¨ˆ

#### æ¡Œé¢ç‰ˆ (â‰¥992px): å·¦å³åˆ†æ¬„
```scss
.editor-container {
  display: flex;
  gap: 20px;
  height: calc(100vh - 140px);

  .items-selector {
    width: 40%;
    min-width: 400px;
  }

  .po-preview {
    width: 60%;
    min-width: 600px;
  }
}
```

#### å¹³æ¿ç‰ˆ (768px - 992px): ä¸Šä¸‹åˆ†å€
```scss
@media (max-width: 991px) {
  .editor-container {
    flex-direction: column;
    height: auto;

    .items-selector,
    .po-preview {
      width: 100%;
      min-width: unset;
    }

    .items-selector {
      order: 1;
      max-height: 400px;
      overflow-y: auto;
    }

    .po-preview {
      order: 2;
      margin-top: 20px;
    }
  }
}
```

#### æ‰‹æ©Ÿç‰ˆ (<768px): æ¨™ç±¤é åˆ‡æ›
```scss
@media (max-width: 767px) {
  .editor-container {
    .mobile-tabs {
      display: block;
    }

    .items-selector,
    .po-preview {
      display: none;
      width: 100%;

      &.active {
        display: block;
      }
    }

    .po-document {
      padding: 10px;
      font-size: 14px;

      .po-table {
        font-size: 12px;
        
        .el-table__cell {
          padding: 8px 5px;
        }
      }
    }
  }

  // æ‰‹æ©Ÿç‰ˆæŒ‰éˆ•èª¿æ•´
  .selector-actions,
  .po-actions {
    .el-button {
      width: 100%;
      margin-bottom: 10px;
    }
  }
}
```

#### æ‰‹æ©Ÿç‰ˆæ¨™ç±¤åˆ‡æ›å¯¦ä½œ
```vue
<template>
  <div class="mobile-editor" v-if="isMobile">
    <el-tabs v-model="mobileActiveTab" class="mobile-tabs">
      <el-tab-pane label="é¸æ“‡é …ç›®" name="selector">
        <div class="items-selector active">
          <!-- é …ç›®é¸æ“‡å…§å®¹ -->
        </div>
      </el-tab-pane>
      <el-tab-pane label="æ¡è³¼å–®é è¦½" name="preview">
        <div class="po-preview active">
          <!-- æ¡è³¼å–®é è¦½å…§å®¹ -->
        </div>
      </el-tab-pane>
    </el-tabs>
  </div>
</template>

<script>
import { computed } from 'vue'
import { useWindowSize } from '@vueuse/core'

export default {
  setup() {
    const { width } = useWindowSize()
    const isMobile = computed(() => width.value < 768)
    
    return { isMobile }
  }
}
</script>
```

---

## çµ„ä»¶åº«ä½¿ç”¨æŒ‡å—

### Element Plus çµ„ä»¶é¸ç”¨å»ºè­°

#### 1. æ•¸æ“šå±•ç¤ºçµ„ä»¶
- **el-table**: æ¡è³¼å–®é …ç›®åˆ—è¡¨ã€ä¾›æ‡‰å•†é …ç›®å±•ç¤º
- **el-card**: ä¾›æ‡‰å•†å¡ç‰‡ã€æ¡è³¼å–®é è¦½ã€é›†é‹å€‰å¡ç‰‡  
- **el-tag**: ç‹€æ…‹æ¨™ç±¤ã€ä¾›æ‡‰å•†é¡å‹ã€é …ç›®è¨ˆæ•¸
- **el-timeline**: é›†é‹å€‰ç‰©æµé€²åº¦å±•ç¤º

#### 2. è¡¨å–®çµ„ä»¶
- **el-form**: æ¡è³¼å–®è³‡è¨Šè¼¸å…¥ã€äº¤æœŸç¶­è­·è¡¨å–®
- **el-select**: ç‹€æ…‹æ›´æ–°é¸æ“‡ã€ä¾›æ‡‰å•†ç¯©é¸
- **el-input**: æœå°‹æ¡†ã€å‚™è¨»è¼¸å…¥ã€è¿½è¹¤ç¢¼è¼¸å…¥
- **el-checkbox**: é …ç›®å¤šé¸åŠŸèƒ½
- **el-date-picker**: é è¨ˆåˆ°è²¨æ—¥æœŸé¸æ“‡

#### 3. ä½ˆå±€çµ„ä»¶
- **el-row/el-col**: éŸ¿æ‡‰å¼ç¶²æ ¼ä½ˆå±€
- **el-tabs**: äº¤æœŸç¶­è­·åˆ†é ã€æ‰‹æ©Ÿç‰ˆåˆ‡æ›
- **el-collapse**: å¯æ‘ºç–Šçš„è©³ç´°è³‡è¨Š
- **el-divider**: å…§å®¹åˆ†éš”ç·š

#### 4. å°èˆªçµ„ä»¶
- **el-button**: æ“ä½œæŒ‰éˆ•ï¼ˆä¸»è¦ã€æ¬¡è¦ã€å±éšªå‹•ä½œï¼‰
- **el-dropdown**: æ‰¹é‡æ“ä½œé¸å–®
- **el-pagination**: å¤§é‡æ•¸æ“šåˆ†é 

#### 5. åé¥‹çµ„ä»¶
- **el-message**: æ“ä½œçµæœæç¤º
- **el-message-box**: ç¢ºèªå°è©±æ¡†
- **el-loading**: è¼‰å…¥ç‹€æ…‹
- **el-skeleton**: éª¨æ¶å±è¼‰å…¥
- **el-empty**: ç©ºç‹€æ…‹å±•ç¤º

### çµ„ä»¶é…ç½®è¦ç¯„

#### æŒ‰éˆ•é…ç½®è¦ç¯„
```vue
<!-- ä¸»è¦æ“ä½œ -->
<el-button type="primary" size="default">
  ç¢ºèªæ“ä½œ
</el-button>

<!-- æ¬¡è¦æ“ä½œ -->
<el-button type="default" plain>
  è¼”åŠ©æ“ä½œ  
</el-button>

<!-- å±éšªæ“ä½œ -->
<el-button type="danger" plain>
  åˆªé™¤/æ’¤å›
</el-button>

<!-- è¼‰å…¥ç‹€æ…‹ -->
<el-button 
  type="primary" 
  :loading="isLoading"
  :disabled="!isValid"
>
  è™•ç†ä¸­...
</el-button>
```

#### è¡¨æ ¼é…ç½®è¦ç¯„
```vue
<el-table 
  :data="tableData"
  border
  stripe
  :default-sort="{prop: 'created_at', order: 'descending'}"
  @selection-change="handleSelectionChange"
>
  <!-- é¸æ“‡æ¬„ -->
  <el-table-column type="selection" width="55" />
  
  <!-- åºè™Ÿæ¬„ -->
  <el-table-column type="index" label="åºè™Ÿ" width="60" align="center" />
  
  <!-- æ•¸æ“šæ¬„ä½ -->
  <el-table-column 
    prop="item_name" 
    label="é …ç›®åç¨±"
    min-width="150"
    show-overflow-tooltip
  />
  
  <!-- é‡‘é¡æ¬„ä½ -->
  <el-table-column label="é‡‘é¡" width="120" align="right">
    <template #default="{ row }">
      <span class="money-text">{{ formatCurrency(row.amount) }}</span>
    </template>
  </el-table-column>
  
  <!-- æ“ä½œæ¬„ -->
  <el-table-column label="æ“ä½œ" width="150" align="center" fixed="right">
    <template #default="{ row }">
      <el-button type="primary" size="small" text>ç·¨è¼¯</el-button>
      <el-button type="danger" size="small" text>åˆªé™¤</el-button>
    </template>
  </el-table-column>
</el-table>
```

#### è¡¨å–®é…ç½®è¦ç¯„
```vue
<el-form 
  :model="formData"
  :rules="formRules"
  ref="formRef"
  label-width="100px"
  label-position="right"
>
  <el-form-item label="å¿…å¡«æ¬„ä½" prop="required_field">
    <el-input 
      v-model="formData.required_field"
      placeholder="è«‹è¼¸å…¥..."
      clearable
    />
  </el-form-item>
  
  <el-form-item label="é¸æ“‡æ¬„ä½" prop="select_field">
    <el-select 
      v-model="formData.select_field"
      placeholder="è«‹é¸æ“‡..."
      clearable
      filterable
    >
      <el-option 
        v-for="option in options"
        :key="option.value"
        :label="option.label"
        :value="option.value"
      />
    </el-select>
  </el-form-item>
  
  <el-form-item>
    <el-button type="primary" @click="handleSubmit">æäº¤</el-button>
    <el-button @click="handleReset">é‡ç½®</el-button>
  </el-form-item>
</el-form>
```

---

## äº’å‹•è¨­è¨ˆæ¨¡å¼

### 1. å³æ™‚åé¥‹æ¨¡å¼

#### é …ç›®é¸æ“‡å³æ™‚é è¦½
```vue
<script setup>
const selectedItems = ref(new Set())
const poPreview = computed(() => {
  // å³æ™‚è¨ˆç®—é¸ä¸­é …ç›®çš„æ¡è³¼å–®é è¦½
  return Array.from(selectedItems.value).map(id => {
    return availableItems.value.find(item => item.detail_id === id)
  }).filter(Boolean)
})

const previewTotal = computed(() => {
  return poPreview.value.reduce((sum, item) => {
    return sum + Math.round(item.item_quantity * item.unit_price)
  }, 0)
})
</script>
```

#### æ•¸é‡è¼¸å…¥å³æ™‚é©—è­‰
```vue
<el-form-item 
  label="æ¡è³¼æ•¸é‡" 
  prop="quantity"
  :error="quantityError"
>
  <el-input-number
    v-model="formData.quantity"
    :min="1"
    :precision="0"
    @change="validateQuantity"
  />
</el-form-item>

<script>
const validateQuantity = (value) => {
  if (value <= 0) {
    quantityError.value = 'æ•¸é‡å¿…é ˆç‚ºæ­£æ•´æ•¸'
    return
  }
  if (!Number.isInteger(value)) {
    quantityError.value = 'æ•¸é‡å¿…é ˆç‚ºæ•´æ•¸'
    return
  }
  quantityError.value = ''
}
</script>
```

### 2. æ‰¹é‡æ“ä½œæ¨¡å¼

#### æ‰¹é‡é¸æ“‡èˆ‡æ“ä½œ
```vue
<template>
  <div class="batch-operations">
    <div class="batch-header">
      <el-checkbox 
        v-model="selectAll"
        :indeterminate="isIndeterminate"
        @change="handleSelectAll"
      >
        å…¨é¸ ({{ selectedItems.size }}/{{ totalItems }})
      </el-checkbox>
      
      <div class="batch-actions" v-if="selectedItems.size > 0">
        <el-button 
          type="primary"
          @click="batchAddToPO"
          :loading="batchProcessing"
        >
          æ‰¹é‡åŠ å…¥æ¡è³¼å–®
        </el-button>
        
        <el-button 
          type="success"
          @click="batchApprove"
          :loading="batchProcessing"
        >
          æ‰¹é‡æ ¸å‡†
        </el-button>
        
        <el-button 
          type="danger"
          plain
          @click="batchReject"
          :loading="batchProcessing"
        >
          æ‰¹é‡æ‹’çµ•
        </el-button>
      </div>
    </div>
  </div>
</template>
```

### 3. ç‹€æ…‹æµè½‰æ¨¡å¼

#### è¦–è¦ºåŒ–ç‹€æ…‹æµç¨‹
```vue
<template>
  <div class="status-flow">
    <el-steps 
      :active="currentStepIndex" 
      finish-status="success"
      process-status="process"
    >
      <el-step 
        v-for="(step, index) in statusFlow"
        :key="step.value"
        :title="step.label"
        :description="getStepDescription(step, index)"
        :status="getStepStatus(step, index)"
      />
    </el-steps>
    
    <!-- ç‹€æ…‹æ“ä½œæŒ‰éˆ• -->
    <div class="status-actions">
      <el-button 
        v-if="canAdvance"
        type="primary"
        @click="advanceStatus"
      >
        é€²å…¥ä¸‹ä¸€ç‹€æ…‹: {{ nextStatus.label }}
      </el-button>
      
      <el-button 
        v-if="canRevert"
        type="warning"
        plain
        @click="revertStatus"
      >
        æ’¤å›åˆ°: {{ previousStatus.label }}
      </el-button>
    </div>
  </div>
</template>

<script>
const statusFlow = [
  { value: 'draft', label: 'è‰ç¨¿', color: 'info' },
  { value: 'created', label: 'å·²è£½å–®', color: 'warning' },
  { value: 'confirmed', label: 'å·²æ¡è³¼', color: 'primary' },
  { value: 'shipped', label: 'å·²ç™¼è²¨', color: 'success' },
  { value: 'delivered', label: 'å·²åˆ°è²¨', color: 'success' }
]
</script>
```

### 4. æœå°‹èˆ‡ç¯©é¸æ¨¡å¼

#### æ™ºæ…§æœå°‹çµ„ä»¶
```vue
<template>
  <div class="smart-search">
    <el-input
      v-model="searchQuery"
      placeholder="æœå°‹æ¡è³¼å–®è™Ÿã€ä¾›æ‡‰å•†ã€é …ç›®..."
      clearable
      @input="handleSearch"
      @clear="clearSearch"
    >
      <template #prefix>
        <el-icon><Search /></el-icon>
      </template>
      <template #suffix>
        <el-button 
          text 
          @click="showAdvancedFilter = true"
          v-if="!showAdvancedFilter"
        >
          é€²éš
        </el-button>
      </template>
    </el-input>
    
    <!-- é€²éšç¯©é¸ -->
    <el-collapse-transition>
      <div v-show="showAdvancedFilter" class="advanced-filters">
        <el-form :inline="true" :model="filters">
          <el-form-item label="ä¾›æ‡‰å•†">
            <el-select v-model="filters.supplier" clearable>
              <el-option 
                v-for="supplier in suppliers"
                :key="supplier.id"
                :label="supplier.name"
                :value="supplier.id"
              />
            </el-select>
          </el-form-item>
          
          <el-form-item label="ç‹€æ…‹">
            <el-select v-model="filters.status" multiple>
              <el-option 
                v-for="status in statusOptions"
                :key="status.value"
                :label="status.label"
                :value="status.value"
              />
            </el-select>
          </el-form-item>
          
          <el-form-item label="æ—¥æœŸç¯„åœ">
            <el-date-picker
              v-model="filters.dateRange"
              type="datetimerange"
              range-separator="åˆ°"
              start-placeholder="é–‹å§‹æ—¥æœŸ"
              end-placeholder="çµæŸæ—¥æœŸ"
            />
          </el-form-item>
          
          <el-form-item>
            <el-button type="primary" @click="applyAdvancedFilter">
              å¥—ç”¨ç¯©é¸
            </el-button>
            <el-button @click="resetFilters">é‡ç½®</el-button>
          </el-form-item>
        </el-form>
      </div>
    </el-collapse-transition>
    
    <!-- æœå°‹çµæœçµ±è¨ˆ -->
    <div class="search-stats" v-if="searchQuery || hasActiveFilters">
      <el-tag closable @close="clearAllFilters">
        æ‰¾åˆ° {{ filteredResults.length }} ç­†çµæœ
      </el-tag>
      
      <!-- æ´»èºç¯©é¸æ¨™ç±¤ -->
      <el-tag 
        v-for="filter in activeFilterTags"
        :key="filter.key"
        closable
        @close="removeFilter(filter.key)"
      >
        {{ filter.label }}: {{ filter.value }}
      </el-tag>
    </div>
  </div>
</template>
```

---

## ç„¡éšœç¤™è¨­è¨ˆè¦ç¯„

### 1. éµç›¤å°èˆªæ”¯æ´

#### ç„¦é»ç®¡ç†
```vue
<template>
  <div class="po-editor" @keydown="handleGlobalKeydown">
    <!-- å¯éµç›¤å°èˆªçš„é …ç›®é¸æ“‡ -->
    <div 
      v-for="(item, index) in items"
      :key="item.id"
      class="item-row"
      :tabindex="0"
      :aria-label="`é …ç›® ${index + 1}: ${item.item_name}`"
      @keydown="handleItemKeydown($event, item, index)"
      @focus="focusedItemIndex = index"
    >
      <!-- é …ç›®å…§å®¹ -->
    </div>
  </div>
</template>

<script>
const handleGlobalKeydown = (event) => {
  // å…¨åŸŸå¿«æ·éµ
  if (event.ctrlKey && event.key === 'a') {
    event.preventDefault()
    selectAll()
  }
  
  if (event.key === 'Escape') {
    clearSelection()
  }
}

const handleItemKeydown = (event, item, index) => {
  switch (event.key) {
    case 'Enter':
    case ' ':
      event.preventDefault()
      toggleItem(item)
      break
      
    case 'ArrowDown':
      event.preventDefault()
      focusNextItem(index)
      break
      
    case 'ArrowUp':
      event.preventDefault()
      focusPreviousItem(index)
      break
  }
}
</script>
```

### 2. è¢å¹•é–±è®€å™¨æ”¯æ´

#### ARIA æ¨™ç±¤èˆ‡è§’è‰²
```vue
<template>
  <div class="po-preview" role="region" aria-label="æ¡è³¼å–®é è¦½">
    <!-- æ¡è³¼å–®è¡¨æ ¼ -->
    <table 
      role="table"
      aria-label="æ¡è³¼æ˜ç´°è¡¨æ ¼"
      aria-describedby="table-summary"
    >
      <caption id="table-summary">
        æ¡è³¼æ˜ç´°ï¼Œå…± {{ poItems.length }} é …ï¼Œ
        ç¸½é‡‘é¡ {{ formatCurrency(totalAmount) }}
      </caption>
      
      <thead>
        <tr role="row">
          <th scope="col" aria-sort="none">é …ç›®</th>
          <th scope="col" aria-sort="none">åç¨±</th>
          <th scope="col" aria-sort="none">æ•¸é‡</th>
          <th scope="col" aria-sort="none">å–®åƒ¹</th>
          <th scope="col" aria-sort="none">é‡‘é¡</th>
        </tr>
      </thead>
      
      <tbody>
        <tr 
          v-for="(item, index) in poItems"
          :key="item.detail_id"
          role="row"
        >
          <td :aria-describedby="`item-${index}-desc`">
            {{ index + 1 }}
          </td>
          <td>
            <div :id="`item-${index}-desc`">
              {{ item.item_name }}
            </div>
          </td>
          <!-- å…¶ä»–æ¬„ä½ -->
        </tr>
      </tbody>
    </table>
  </div>
</template>
```

### 3. é¡è‰²èˆ‡å°æ¯”åº¦

#### è‰²å½©è¼”åŠ©è¨­è¨ˆ
```scss
// ç¢ºä¿è¶³å¤ çš„å°æ¯”åº¦ (WCAG AA æ¨™æº–)
:root {
  --color-text-primary: #303133;    // å°ç™½è‰²èƒŒæ™¯å°æ¯”åº¦ 12.6:1
  --color-text-secondary: #606266;  // å°ç™½è‰²èƒŒæ™¯å°æ¯”åº¦ 7.0:1
  --color-success: #67c23a;         // æˆåŠŸç‹€æ…‹
  --color-warning: #e6a23c;         // è­¦å‘Šç‹€æ…‹  
  --color-danger: #f56c6c;          // éŒ¯èª¤ç‹€æ…‹
  --color-info: #909399;            // è³‡è¨Šç‹€æ…‹
}

// ç‹€æ…‹æ¨™ç±¤å¢å¼·è¨­è¨ˆ
.status-tag {
  &.success {
    background-color: var(--color-success);
    color: white;
    
    // ç‚ºè‰²ç›²ä½¿ç”¨è€…æä¾›åœ–ç¤ºè¼”åŠ©
    &::before {
      content: 'âœ“ ';
      font-weight: bold;
    }
  }
  
  &.warning {
    background-color: var(--color-warning);
    color: white;
    
    &::before {
      content: 'âš  ';
      font-weight: bold;
    }
  }
  
  &.danger {
    background-color: var(--color-danger);
    color: white;
    
    &::before {
      content: 'âœ• ';
      font-weight: bold;
    }
  }
}
```

### 4. èªç¾©åŒ–çµæ§‹

#### HTML èªç¾©åŒ–å…ƒç´ 
```vue
<template>
  <main class="po-management" role="main">
    <header class="page-header">
      <h1>æ¡è³¼å–®ç®¡ç†</h1>
      <nav aria-label="æ¡è³¼å–®æ“ä½œ">
        <button type="button" class="btn-primary">
          æ–°å»ºæ¡è³¼å–®
        </button>
      </nav>
    </header>
    
    <section aria-labelledby="filter-section">
      <h2 id="filter-section" class="sr-only">ç¯©é¸èˆ‡æœå°‹</h2>
      <!-- ç¯©é¸å…§å®¹ -->
    </section>
    
    <section aria-labelledby="results-section">
      <h2 id="results-section" class="sr-only">
        æ¡è³¼å–®åˆ—è¡¨çµæœ
      </h2>
      <!-- æ¡è³¼å–®åˆ—è¡¨ -->
    </section>
  </main>
</template>

<style>
/* è¢å¹•é–±è®€å™¨å°ˆç”¨æ–‡å­— */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
</style>
```

---

## æ€§èƒ½å„ªåŒ–å»ºè­°

### 1. è™›æ“¬æ»¾å‹•å¯¦ä½œ
```vue
<!-- å¤§é‡é …ç›®åˆ—è¡¨ä½¿ç”¨è™›æ“¬æ»¾å‹• -->
<template>
  <div class="virtual-list-container">
    <RecycleScroller
      class="scroller"
      :items="largeItemList"
      :item-size="60"
      key-field="detail_id"
      v-slot="{ item }"
    >
      <div class="item-row">
        <ItemCard :item="item" />
      </div>
    </RecycleScroller>
  </div>
</template>

<script>
import { RecycleScroller } from 'vue-virtual-scroller'
import 'vue-virtual-scroller/dist/vue-virtual-scroller.css'

export default {
  components: {
    RecycleScroller
  }
}
</script>
```

### 2. æ‡¶è¼‰å…¥èˆ‡åˆ†é 
```vue
<script setup>
import { ref, onMounted } from 'vue'

const currentPage = ref(1)
const pageSize = ref(20)
const loading = ref(false)
const hasMore = ref(true)
const items = ref([])

const loadMore = async () => {
  if (loading.value || !hasMore.value) return
  
  loading.value = true
  try {
    const response = await api.getItems({
      page: currentPage.value,
      size: pageSize.value
    })
    
    items.value.push(...response.data)
    currentPage.value++
    hasMore.value = response.has_more
  } finally {
    loading.value = false
  }
}

// ä½¿ç”¨ Intersection Observer å¯¦ç¾è‡ªå‹•è¼‰å…¥
const observerTarget = ref()
onMounted(() => {
  const observer = new IntersectionObserver(
    (entries) => {
      if (entries[0].isIntersecting) {
        loadMore()
      }
    },
    { threshold: 0.1 }
  )
  
  if (observerTarget.value) {
    observer.observe(observerTarget.value)
  }
})
</script>

<template>
  <div>
    <!-- é …ç›®åˆ—è¡¨ -->
    <div v-for="item in items" :key="item.id">
      <ItemCard :item="item" />
    </div>
    
    <!-- è¼‰å…¥æ›´å¤šè§¸ç™¼å™¨ -->
    <div ref="observerTarget" class="load-trigger">
      <el-skeleton v-if="loading" :rows="3" animated />
      <div v-else-if="!hasMore" class="no-more">
        å·²è¼‰å…¥å…¨éƒ¨é …ç›®
      </div>
    </div>
  </div>
</template>
```

### 3. ç‹€æ…‹ç®¡ç†å„ªåŒ–
```typescript
// ä½¿ç”¨ Pinia é€²è¡Œç‹€æ…‹ç®¡ç†
import { defineStore } from 'pinia'

export const useProcurementStore = defineStore('procurement', {
  state: () => ({
    // æ¡è³¼å–®åˆ—è¡¨
    purchaseOrders: new Map(),
    // é …ç›®å¿«å–
    itemsCache: new Map(),
    // ä¾›æ‡‰å•†è³‡è¨Š
    suppliers: new Map(),
    // è¼‰å…¥ç‹€æ…‹
    loading: {
      po_list: false,
      po_detail: false,
      creating: false
    }
  }),

  getters: {
    // æŒ‰ä¾›æ‡‰å•†åˆ†çµ„çš„é …ç›®
    itemsBySupplier: (state) => {
      const groups = new Map()
      for (const item of state.itemsCache.values()) {
        if (!groups.has(item.supplier_id)) {
          groups.set(item.supplier_id, [])
        }
        groups.get(item.supplier_id).push(item)
      }
      return groups
    },

    // æ ¹æ“šç‹€æ…‹ç¯©é¸æ¡è³¼å–®
    posByStatus: (state) => (status: string) => {
      return Array.from(state.purchaseOrders.values())
        .filter(po => po.status === status)
    }
  },

  actions: {
    // æ‰¹é‡æ›´æ–°é …ç›®å¿«å–
    updateItemsCache(items: ProcurementItem[]) {
      items.forEach(item => {
        this.itemsCache.set(item.detail_id, item)
      })
    },

    // æ¨‚è§€æ›´æ–°æ¡è³¼å–®ç‹€æ…‹
    optimisticUpdatePOStatus(poNo: string, status: string) {
      const po = this.purchaseOrders.get(poNo)
      if (po) {
        po.status = status
        po.updated_at = new Date().toISOString()
      }
    }
  }
})
```

---

## ç¸½çµ

æœ¬è¦æ ¼æ›¸æä¾›äº†å®Œæ•´çš„ERPæ¡è³¼ç³»çµ±å‰ç«¯è¨­è¨ˆæ–¹æ¡ˆï¼Œæ¶µè“‹ï¼š

### âœ… å®Œæ•´æ¥­å‹™æµç¨‹æ”¯æ´
- æ¡è³¼å–®åˆ—è¡¨ï¼ˆä¾›æ‡‰å•†åˆ†çµ„ï¼‰
- æ¡è³¼å–®ç·¨è¼¯ï¼ˆå·¦å³åˆ†æ¬„è¨­è¨ˆï¼‰
- äº¤æœŸç¶­è­·ï¼ˆåœ‹å…§å¤–ä¾›æ‡‰å•†åˆ†åˆ¥è™•ç†ï¼‰
- é›†é‹å€‰ç®¡ç†ï¼ˆæµ·å¤–ä¾›æ‡‰å•†å°ˆç”¨ï¼‰

### âœ… å„ªç§€ç”¨æˆ¶é«”é©—è¨­è¨ˆ  
- éŸ¿æ‡‰å¼ä½ˆå±€ï¼ˆæ¡Œé¢/å¹³æ¿/æ‰‹æ©Ÿï¼‰
- å³æ™‚é è¦½èˆ‡è¨ˆç®—
- æ‰¹é‡æ“ä½œæ”¯æ´
- æ™ºæ…§æœå°‹èˆ‡ç¯©é¸

### âœ… æŠ€è¡“å¯¦ä½œæŒ‡å—
- Vue 3 + Element Plus æœ€ä½³å¯¦è¸
- çµ„ä»¶åŒ–è¨­è¨ˆæ¨¡å¼
- æ€§èƒ½å„ªåŒ–å»ºè­°
- ç„¡éšœç¤™è¨­è¨ˆè¦ç¯„

### âœ… æ¥­å‹™è¦å‰‡éµå¾ª
- é‡‘é¡è¨ˆç®—è¦å‰‡ï¼ˆå››æ¨äº”å…¥ï¼‰
- ç‹€æ…‹æµè½‰é‚è¼¯
- æ¬Šé™æ§åˆ¶æ©Ÿåˆ¶
- è³‡æ–™é©—è­‰è¦ç¯„

é€™å€‹è¦æ ¼æ›¸å°‡å¹«åŠ©é–‹ç™¼åœ˜éšŠå¿«é€Ÿå¯¦ç¾åŠŸèƒ½å®Œæ•´ã€ç”¨æˆ¶é«”é©—å„ªç§€çš„ERPæ¡è³¼ç³»çµ±å‰ç«¯ä»‹é¢ã€‚