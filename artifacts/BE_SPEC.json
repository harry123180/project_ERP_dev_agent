{
  "schema_version": "1.0",
  "generated_by": "Backend Lead - ERP System",
  "endpoints": [
    "POST /auth/login - Authenticate user with username/password",
    "POST /auth/logout - Invalidate JWT token", 
    "GET /auth/me - Get current user profile information",
    "POST /auth/refresh - Refresh JWT token",
    
    "GET /users - List all users with pagination and role filtering",
    "GET /users/:id - Get specific user details",
    "POST /users - Create new user account",
    "PUT /users/:id - Update user information",
    "PATCH /users/:id/status - Enable/disable user account",
    
    "GET /suppliers - List suppliers with region/name filtering and pagination", 
    "GET /suppliers/:id - Get specific supplier details",
    "POST /suppliers - Create new supplier",
    "PUT /suppliers/:id - Update supplier information",
    "DELETE /suppliers/:id - Soft delete supplier",
    
    "GET /item-categories - List all item categories with active status filter",
    "GET /item-categories/:id - Get specific category details", 
    "POST /item-categories - Create new item category",
    "PUT /item-categories/:id - Update category information",
    "PATCH /item-categories/:id/status - Toggle category active status",
    
    "GET /requisitions - List requisitions with status/requester/date filtering",
    "GET /requisitions/:order_no - Get specific requisition with line items",
    "POST /requisitions - Create new requisition order",
    "PUT /requisitions/:order_no - Update requisition details",
    "POST /requisitions/:order_no/submit - Submit requisition for review",
    "POST /requisitions/:order_no/lines - Add item to requisition",
    "PUT /requisitions/:order_no/lines/:detail_id - Update requisition line item",
    "DELETE /requisitions/:order_no/lines/:detail_id - Remove item from requisition",
    "POST /requisitions/:order_no/lines/:detail_id/approve - Approve requisition line",
    "POST /requisitions/:order_no/lines/:detail_id/reject - Reject requisition line", 
    "POST /requisitions/:order_no/lines/:detail_id/question - Question requisition line",
    "POST /requisitions/:order_no/lines/:detail_id/unavailable - Mark item unavailable",
    
    "GET /purchase-orders - List purchase orders with supplier/status/date filtering",
    "GET /purchase-orders/:order_no - Get specific purchase order with line items",
    "POST /purchase-orders/create-from-requisitions - Create PO from approved requisition lines",
    "PUT /purchase-orders/:order_no - Update purchase order details",
    "POST /purchase-orders/:order_no/confirm - Confirm purchase order",
    "POST /purchase-orders/:order_no/lines - Add item to purchase order",
    "PUT /purchase-orders/:order_no/lines/:detail_id - Update purchase order line",
    "DELETE /purchase-orders/:order_no/lines/:detail_id - Remove item from purchase order",
    "POST /purchase-orders/:order_no/calculate-totals - Recalculate order totals",
    
    "GET /logistics/shipments - List shipments with status/carrier/date filtering",
    "GET /logistics/purchase-orders - List POs for logistics tracking",
    "POST /logistics/purchase-orders/:order_no/update-status - Update PO shipping status",
    "POST /logistics/consolidations - Create shipment consolidation",
    "GET /logistics/consolidations/:consolidation_id - Get consolidation details",
    "PUT /logistics/consolidations/:consolidation_id - Update consolidation",
    "POST /logistics/consolidations/:consolidation_id/add-po - Add PO to consolidation",
    "DELETE /logistics/consolidations/:consolidation_id/pos/:order_no - Remove PO from consolidation",
    "POST /logistics/events - Create logistics event",
    "GET /logistics/events - List logistics events with filtering",
    
    "GET /receiving/pending - List pending deliveries by supplier/region",
    "GET /receiving/purchase-orders/:order_no - Get PO details for receiving",
    "POST /receiving/purchase-orders/:order_no/items/:detail_id/receive - Confirm item received",
    "GET /receiving/history - List receiving history with filtering",
    
    "GET /storage/locations - List all storage locations with zone/shelf filtering",
    "POST /storage/locations - Create new storage location",
    "PUT /storage/locations/:storage_id - Update storage location",
    "DELETE /storage/locations/:storage_id - Delete storage location",
    "GET /storage/pending-putaway - List items pending warehousing",
    "POST /storage/putaway - Assign storage location and warehouse item",
    "GET /storage/history - List storage movement history",
    
    "GET /acceptance/pending - List pending acceptance items by requester",
    "POST /acceptance/items/:detail_id/accept - Accept received item",
    "GET /acceptance/history - List acceptance history",
    
    "GET /inventory/search - Search inventory with multiple filters",
    "GET /inventory/locations/:storage_id - Get inventory at specific location", 
    "POST /inventory/issue - Issue items from inventory",
    "GET /inventory/issue-history - List item issuance history",
    "GET /inventory/stock-levels - Get current stock levels by location",
    
    "GET /billing/unpaid-pos - List unpaid purchase orders by supplier/period",
    "POST /billing/generate - Generate billing batch from unpaid POs",
    "GET /billing/batches - List billing batches with filtering",
    "GET /billing/batches/:batch_id - Get billing batch details",
    "POST /billing/batches/:batch_id/mark-paid - Mark billing batch as paid",
    "POST /billing/purchase-orders/:order_no/mark-paid - Mark individual PO as paid",
    "GET /billing/payment-history - List payment history",
    
    "GET /projects - List projects with status/customer filtering",
    "GET /projects/:project_id - Get specific project details",
    "POST /projects - Create new project",
    "PUT /projects/:project_id - Update project information",
    "GET /projects/:project_id/expenditures - Get project expenditures by supplier",
    
    "GET /system/settings - List system settings by type",
    "GET /system/settings/:setting_id - Get specific system setting",
    "PUT /system/settings/:setting_id - Update system setting value",
    
    "GET /reports/requisition-summary - Requisition summary report with date range",
    "GET /reports/purchase-summary - Purchase summary report by supplier/period",
    "GET /reports/inventory-status - Current inventory status report",
    "GET /reports/financial-summary - Financial summary report with AP aging",
    "GET /reports/audit-trail - Comprehensive audit trail report"
  ],
  "models": [
    "User - System user with role-based permissions (user_id, chinese_name, username, password_hash, department, role)",
    "Supplier - Supplier master data (supplier_id, supplier_name_zh, supplier_name_en, supplier_address, supplier_phone, supplier_email, supplier_contact_person, supplier_tax_id, supplier_region, supplier_remark, payment_terms, bank_account)",
    "ItemCategory - Item classification (category_id, category_code, category_name, sort_order, is_active, created_at, updated_at)",
    "RequestOrder - Requisition header (request_order_no, requester_id, requester_name, usage_type, project_id, submit_date, order_status)",
    "RequestOrderItem - Requisition line items (detail_id, request_order_no, item_name, item_quantity, item_unit, item_specification, item_description, item_category, item_status, acceptance_status, supplier_id, unit_price, material_serial_no, status_note, needs_acceptance)",
    "PurchaseOrder - Purchase order header (purchase_order_no, supplier_name, supplier_address, contact_phone, contact_person, supplier_tax_id, order_date, quotation_no, delivery_address, creation_date, creator_id, output_person_id, notes, confirm_purchaser_id, purchase_status, shipping_status, shipped_at, eta_date, arrival_date, carrier, tracking_no, logistics_note, subtotal_int, tax_decimal1, grand_total_int)",
    "PurchaseOrderItem - Purchase order line items (detail_id, purchase_order_no, item_name, item_quantity, item_unit, unit_price, item_specification, item_model, line_status, line_subtotal_int, source_request_order_no, source_detail_id)",
    "ShipmentConsolidation - Consolidation warehouse for international shipments (consolidation_id, name, region, status, shipped_at, eta_date, arrival_date, carrier, tracking_no, logistics_note, created_at, updated_at)",
    "ConsolidationPO - Association between consolidation and purchase orders (id, consolidation_id, purchase_order_no, added_at)",
    "LogisticsEvent - Shipping and logistics event stream (event_id, scope_type, scope_id, status, happened_at, note, created_by, created_at)",
    "Storage - Storage location structure (storage_id, area_code, shelf_code, floor_level, front_back_position, left_middle_right_position)",
    "StorageHistory - Inventory movement ledger (history_id, storage_id, item_id, operation_type, operation_date, operator_id, quantity, source_type, source_no, source_line)",
    "Project - Project master data (project_id, project_name, project_status, start_date, end_date, total_expenditure, customer_name, customer_contact, customer_address, customer_phone, customer_department)",
    "ProjectSupplierExpenditure - Project expenditure by supplier (record_id, project_id, supplier_id, expenditure_amount)",
    "SystemSettings - System-wide configuration (setting_id, setting_type, setting_key, setting_value, setting_description, created_at, updated_at)",
    "RequisitionLineHistory - Audit trail for requisition line status changes (history_id, detail_id, status_from, status_to, changed_by, changed_at, reason)",
    "UserAcceptanceHistory - User acceptance tracking (acceptance_id, detail_id, accepted_by, acceptance_date, notes)",
    "UserIssueHistory - Item issuance tracking (issue_id, storage_id, item_id, issued_quantity, issued_by, issued_at, purpose, notes)",
    "ReceivingRecord - Receiving confirmation tracking (receiving_id, purchase_order_no, detail_id, received_by, received_at, quantity_received, notes)",
    "APBilling - Accounts payable billing batch (billing_id, supplier_id, billing_month, payment_term, subtotal_int, tax_decimal1, grand_total_int, discount, other_deduction, invoice_or_receipt, billed_amount, due_date, created_by, created_at)",
    "APBillingPO - POs included in billing batch (id, billing_id, purchase_order_no, amount_in_batch)",
    "APPayment - Payment records (payment_id, supplier_id, pay_date, payment_method, amount, reference_billing_id, notes, created_by, created_at)"
  ],
  "acceptance": [
    "Authentication system supports JWT token-based login with role validation (Everyone, Procurement, ProcurementMgr, Accountant)",
    "All API endpoints implement proper HTTP status codes (200, 201, 400, 401, 403, 404, 409, 422, 500)",
    "Requisition workflow supports complete lifecycle: draft → submitted → reviewed with line-by-line approval/rejection",
    "Purchase order creation from approved requisition lines groups by supplier automatically",
    "Financial calculations maintain precision: subtotal as integer, tax as 1-decimal, total as integer",
    "State machine validation prevents invalid status transitions across all business entities",
    "Logistics tracking supports both individual PO tracking and consolidation warehouse management",
    "Storage location management follows Zone-Shelf-Floor-FrontBack-LMR hierarchy structure",
    "Inventory operations maintain movement audit trail with operator tracking and timestamp",
    "Billing system implements 30/60-day payment terms with 25th cutoff date calculation rules",
    "User acceptance workflow restricts acceptance operations to original requesters only",
    "All state-changing operations support idempotency using Idempotency-Key header",
    "Query operations support pagination (?page=1&page_size=20) and sorting (?sort=-created_at)",
    "Role-based access control enforces proper permissions with Admin override capability",
    "Audit trails capture all critical business events with user identification and timestamps",
    "Error responses follow consistent format: {\"error\": {\"code\": \"ERROR_TYPE\", \"message\": \"...\", \"details\": {...}}}",
    "Database constraints ensure data integrity with proper foreign key relationships",
    "Business logic validation prevents negative inventory and invalid quantity operations",
    "Supplier management supports both domestic and international supplier classifications",
    "Project-based requisitions properly track expenditures and associate with project budgets",
    "System settings management allows configuration of tax rates and other business parameters",
    "Receiving workflow requires explicit confirmation before items become available for warehousing",
    "Consolidation warehouse management coordinates multiple international POs in single shipment",
    "Payment processing supports individual PO payment and batch payment operations",
    "Stock level queries provide real-time inventory status across all storage locations"
  ]
}