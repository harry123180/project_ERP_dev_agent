import{U as y,r as i,p as n,a3 as u}from"./index-61294aba.js";const B=y("suppliers",()=>{const s=i([]),p=i(null),c=i([]),t=i(!1),o=i({page:1,page_size:20,total:0,pages:0,has_next:!1,has_prev:!1}),f=n(()=>s.value.filter(e=>e.is_active)),g=n(()=>s.value.filter(e=>e.supplier_region==="domestic")),d=n(()=>s.value.filter(e=>e.supplier_region==="international")),h=n(()=>e=>s.value.find(r=>r.supplier_id===e));return{suppliers:s,currentSupplier:p,suppliersSummary:c,loading:t,pagination:o,activeSuppliers:f,domesticSuppliers:g,internationalSuppliers:d,getSupplierById:h,fetchSuppliers:async(e={})=>{t.value=!0;try{const a=(await u.get("/suppliers",{params:{page:e.page||1,page_size:e.page_size||20,...e.region&&{region:e.region},...e.active!==void 0&&{active:e.active},...e.q&&{q:e.q}}})).data;return s.value=a.items||[],o.value=a.pagination||{page:1,page_size:20,total:0,pages:0,has_next:!1,has_prev:!1},a}catch(r){throw console.error("Error fetching suppliers:",r),r}finally{t.value=!1}},fetchSupplierById:async e=>{t.value=!0;try{const a=(await u.get(`/suppliers/${e}`)).data;return p.value=a,a}catch(r){throw console.error("Error fetching supplier:",r),r}finally{t.value=!1}},createSupplier:async e=>{t.value=!0;try{const r=await u.post("/suppliers",e);return s.value.unshift(r.data),r.data}catch(r){throw console.error("Error creating supplier:",r),r}finally{t.value=!1}},updateSupplier:async(e,r)=>{var a;t.value=!0;try{const l=await u.put(`/suppliers/${e}`,r),v=s.value.findIndex(S=>S.supplier_id===e);return v!==-1&&(s.value[v]=l.data),((a=p.value)==null?void 0:a.supplier_id)===e&&(p.value=l.data),l.data}catch(l){throw console.error("Error updating supplier:",l),l}finally{t.value=!1}},fetchSuppliersSummary:async(e={})=>{t.value=!0;try{const a=(await u.get("/suppliers/summary",{params:{...e.region&&{region:e.region},...e.active!==void 0&&{active:e.active}}})).data||[];return c.value=a,a}catch(r){throw console.error("Error fetching suppliers summary:",r),r}finally{t.value=!1}},clearCurrentSupplier:()=>{p.value=null},clearSuppliers:()=>{s.value=[],o.value={page:1,page_size:20,total:0,pages:0,has_next:!1,has_prev:!1}}}});export{B as u};
//# sourceMappingURL=suppliers-64727151.js.map
