import{d as Ue,y as Ee,r as U,a as S,a1 as Me,c as E,b as o,e as t,w as a,m as Ie,a4 as $e,b0 as Te,T as Ye,o as v,g as ne,a7 as Pe,i as r,ap as Re,t as d,q as x,ab as y,F as ie,s as re,X as k,I as Fe,al as Le,aj as Oe,j as Be,k as je,ah as Ae,ai as We,E as qe,av as Ge,ao as Ke,aw as Xe,ax as He,a$ as Je,au as Qe,ak as Ze,_ as et}from"./index-61294aba.js";/* empty css                  *//* empty css                   *//* empty css                             *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css                    *//* empty css                 *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                     *//* empty css               *//* empty css                */import{g as de,a as tt,u as at,b as lt,c as st,d as ot}from"./delivery-337552f6.js";const nt={class:"delivery-maintenance"},it={class:"page-header"},rt={class:"header-actions"},dt={class:"stats-container"},ut={class:"stat-content"},pt={class:"stat-number"},mt={style:{"font-size":"14px",color:"#909399","margin-bottom":"5px"}},_t={style:{"font-size":"14px",color:"#909399"}},vt={class:"stat-content"},ct={class:"stat-number"},ft={style:{"font-size":"14px",color:"#909399","margin-bottom":"5px"}},bt={style:{"font-size":"14px",color:"#909399"}},yt={class:"stat-content"},gt={class:"stat-number"},kt={class:"stat-content"},wt={class:"stat-number"},xt={class:"filters"},Vt={class:"table-container"},Ct={class:"filters"},Dt={class:"table-container"},St={key:0,class:"selection-info"},ht={class:"consolidation-list"},zt={class:"card-header"},Nt={class:"consol-title"},Ut={class:"consol-info"},Et={class:"info-item"},Mt={class:"value"},It={class:"info-item"},$t={class:"value"},Tt={key:0,class:"info-item"},Yt={class:"value"},Pt={key:1,class:"info-item"},Rt={class:"value"},Ft={class:"info-item"},Lt={class:"value"},Ot={key:2,class:"info-item"},Bt={class:"value"},jt={class:"card-footer"},At={class:"selected-pos"},Wt={key:0,class:"tip-text"},qt=Ue({__name:"DeliveryMaintenance",setup(Gt){const ue=Ee(),q=U(!1),G=U(!1),L=U("domestic"),I=U([]),$=U([]),O=U([]),f=U([]),T=U(!1),V=S({poNumber:"",supplierRegion:"domestic",deliveryStatus:""}),C=S({poNumber:"",deliveryStatus:""}),h=S({page:1,size:20,total:0}),z=S({page:1,size:20,total:0}),b=S({domestic_total:0,domestic_shipped:0,domestic_unshipped:0,international_total:0,international_shipped:0,international_unshipped:0,today_expected:0}),i=S({visible:!1,poNumber:"",currentStatus:"",newStatus:"",expectedDeliveryDate:"",remarks:"",region:"domestic"}),g=S({visible:!1,poNumber:"",remarks:""}),B=S({consolidation_name:"",purchase_order_nos:[]}),n=S({visible:!1,consolidationId:"",consolidationName:"",currentStatus:"",newStatus:"",carrier:"",trackingNumber:"",expectedDeliveryDate:"",remarks:""}),pe=s=>s.delivery_status==="shipped"&&!s.consolidation_id,me=s=>{f.value=s},_e=s=>{const e=f.value.findIndex(u=>u.po_number===s.po_number);e>-1&&f.value.splice(e,1)},N=async()=>{q.value=!0;try{const s=await de({page:h.page,page_size:h.size,status:V.deliveryStatus,supplier_region:"domestic",po_number:V.poNumber});s.success&&(I.value=s.data,h.total=s.data.length,K())}catch(s){console.error("載入失敗:",s),k.error("載入資料失敗")}finally{q.value=!1}},Y=async()=>{G.value=!0;try{const s=await de({page:z.page,page_size:z.size,status:C.deliveryStatus,supplier_region:"international",po_number:C.poNumber});s.success&&($.value=s.data,z.total=s.data.length,K())}catch(s){console.error("載入失敗:",s),k.error("載入國外資料失敗")}finally{G.value=!1}},K=()=>{b.domestic_total=I.value.length,b.domestic_shipped=I.value.filter(u=>u.delivery_status==="shipped"||u.delivery_status==="delivered").length,b.domestic_unshipped=I.value.filter(u=>u.delivery_status==="not_shipped"||!u.delivery_status).length,b.international_total=$.value.length,b.international_shipped=$.value.filter(u=>u.delivery_status!=="not_shipped"&&u.delivery_status&&u.delivery_status!=="delivered").length,b.international_unshipped=$.value.filter(u=>u.delivery_status==="not_shipped"||!u.delivery_status).length;const s=new Date().toISOString().split("T")[0],e=[...I.value,...$.value];b.today_expected=e.filter(u=>u.expected_delivery_date?new Date(u.expected_delivery_date).toISOString().split("T")[0]===s&&u.delivery_status!=="delivered":!1).length},j=async()=>{try{const s=await tt();s.success&&(O.value=s.data)}catch(s){console.error("載入集運單失敗:",s),k.error("載入集運單失敗")}},ee=s=>{i.poNumber=s.po_number,i.currentStatus=s.delivery_status,i.newStatus=s.delivery_status,i.expectedDeliveryDate=s.expected_delivery_date||"",i.remarks=s.remarks,i.region=L.value==="domestic"?"domestic":"international",i.visible=!0},ve=async()=>{try{await at(i.poNumber,{new_status:i.newStatus,expected_date:i.expectedDeliveryDate,remarks:i.remarks}),k.success("狀態更新成功"),i.visible=!1,await J()}catch(s){k.error("狀態更新失敗"),console.error(s)}},te=s=>{g.poNumber=s.po_number,g.remarks=s.remarks,g.visible=!0},ce=async()=>{try{await lt(g.poNumber,{remarks:g.remarks}),k.success("備註更新成功"),g.visible=!1,await N()}catch(s){k.error("備註更新失敗"),console.error(s)}},fe=async()=>{if(f.value.length<2){k.warning("請至少選擇2張採購單");return}try{const s=f.value.map(e=>e.po_number);await st({consolidation_name:B.consolidation_name,purchase_order_nos:s}),k.success("集運單建立成功"),T.value=!1,f.value=[],B.consolidation_name="",await N(),await j()}catch(s){k.error("建立集運單失敗"),console.error(s)}},be=s=>{ue.push(`/purchase-orders/consolidation/${s.consolidation_id}`)},ye=s=>s.pos_in_consolidation?s.pos_in_consolidation.reduce((e,u)=>e+(u.items_count||u.item_count||0),0):s.total_items||0,ge=s=>{n.consolidationId=s.consolidation_id,n.consolidationName=s.consolidation_name||s.consolidation_id,n.currentStatus=s.logistics_status||s.status||"",n.newStatus="",n.carrier=s.carrier||"",n.trackingNumber=s.tracking_number||"",n.expectedDeliveryDate=s.expected_delivery_date||"",n.remarks=s.remarks||"",n.visible=!0},ke=async()=>{try{await ot(n.consolidationId,{new_status:n.newStatus,carrier:n.carrier,tracking_number:n.trackingNumber,expected_date:n.expectedDeliveryDate,remarks:n.remarks}),k.success("集運單狀態更新成功"),n.visible=!1,j()}catch(s){console.error("更新集運單狀態失敗:",s),k.error("更新集運單狀態失敗")}},we=s=>{f.value=[],s==="domestic"?N():s==="international"?Y():s==="consolidations"&&j()},xe=()=>{V.poNumber="",V.deliveryStatus="",N()},Ve=()=>{C.poNumber="",C.deliveryStatus="",Y()},Ce=async()=>{await J()},X=s=>s?new Date(s).toLocaleDateString("zh-TW"):"-",ae=s=>({not_shipped:"未發貨",shipped:"已發貨",foreign_customs:"對方海關",taiwan_customs:"台灣海關",in_transit:"物流",delivered:"已到貨"})[s]||s,De=s=>({not_shipped:"未發貨",shipped:"已發貨",in_transit:"物流",delivered:"已到貨"})[s]||s,H=s=>({not_shipped:"info",shipped:"",foreign_customs:"danger",taiwan_customs:"danger",in_transit:"warning",delivered:"success"})[s]||"info",Se=s=>ae(s),he=s=>H(s),J=async()=>{await Promise.all([N(),Y(),j()]),K()};return Me(()=>{new URLSearchParams(window.location.search).get("tab")==="consolidation"&&(L.value="consolidations"),J()}),(s,e)=>{const u=Fe,p=Ie,F=Le,M=Oe,Q=$e,w=Be,_=je,m=Ae,A=We,P=qe,c=Ge,R=Ke,le=Xe,se=He,Z=Je,ze=Ze,Ne=Te,oe=Qe,W=Ye;return v(),E("div",nt,[o("div",it,[e[31]||(e[31]=o("h1",{class:"page-title"},"交期維護",-1)),o("div",rt,[t(p,{type:"primary",onClick:e[0]||(e[0]=l=>T.value=!0),disabled:f.value.length<2},{default:a(()=>[t(u,null,{default:a(()=>[t(ne(Pe))]),_:1}),e[29]||(e[29]=r(" 新增集運單 ",-1))]),_:1},8,["disabled"]),t(p,{onClick:Ce},{default:a(()=>[t(u,null,{default:a(()=>[t(ne(Re))]),_:1}),e[30]||(e[30]=r(" 重新整理 ",-1))]),_:1})])]),o("div",dt,[t(Q,{gutter:16},{default:a(()=>[t(M,{span:6},{default:a(()=>[t(F,{class:"stat-card"},{default:a(()=>[o("div",ut,[o("div",pt,[o("div",mt,"國內: "+d(b.domestic_shipped||0)+"/"+d(b.domestic_total||0),1),o("div",_t,"國外: "+d(b.international_shipped||0)+"/"+d(b.international_total||0),1)]),e[32]||(e[32]=o("div",{class:"stat-label"},"已發貨總數",-1))])]),_:1})]),_:1}),t(M,{span:6},{default:a(()=>[t(F,{class:"stat-card urgent"},{default:a(()=>[o("div",vt,[o("div",ct,[o("div",ft,"國內: "+d(b.domestic_unshipped||0),1),o("div",bt,"國外: "+d(b.international_unshipped||0),1)]),e[33]||(e[33]=o("div",{class:"stat-label"},"未發貨總數",-1))])]),_:1})]),_:1}),t(M,{span:6},{default:a(()=>[t(F,{class:"stat-card info"},{default:a(()=>[o("div",yt,[o("div",gt,d(O.value.length||0),1),e[34]||(e[34]=o("div",{class:"stat-label"},"集運單數量",-1))])]),_:1})]),_:1}),t(M,{span:6},{default:a(()=>[t(F,{class:"stat-card"},{default:a(()=>[o("div",kt,[o("div",wt,d(b.today_expected||0),1),e[35]||(e[35]=o("div",{class:"stat-label"},"今日預計到貨",-1))])]),_:1})]),_:1})]),_:1})]),t(Ne,{modelValue:L.value,"onUpdate:modelValue":e[10]||(e[10]=l=>L.value=l),onTabChange:we},{default:a(()=>[t(Z,{label:"國內採購列表",name:"domestic"},{default:a(()=>[o("div",xt,[t(P,{model:V,inline:""},{default:a(()=>[t(_,{label:"採購單號"},{default:a(()=>[t(w,{modelValue:V.poNumber,"onUpdate:modelValue":e[1]||(e[1]=l=>V.poNumber=l),placeholder:"輸入採購單號",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{label:"交貨狀態"},{default:a(()=>[t(A,{modelValue:V.deliveryStatus,"onUpdate:modelValue":e[2]||(e[2]=l=>V.deliveryStatus=l),placeholder:"選擇狀態",clearable:"",style:{width:"200px"}},{default:a(()=>[t(m,{label:"全部",value:""}),t(m,{label:"已發貨",value:"shipped"}),t(m,{label:"已到貨",value:"delivered"})]),_:1},8,["modelValue"])]),_:1}),t(_,null,{default:a(()=>[t(p,{type:"primary",onClick:N},{default:a(()=>[...e[36]||(e[36]=[r("搜尋",-1)])]),_:1}),t(p,{onClick:xe},{default:a(()=>[...e[37]||(e[37]=[r("重設",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),o("div",Vt,[t(le,{data:I.value,loading:q.value,stripe:""},{default:a(()=>[t(c,{prop:"po_number",label:"採購單號",width:"140"}),t(c,{prop:"supplier_name",label:"供應商",width:"200"}),t(c,{label:"交貨狀態",width:"100"},{default:a(({row:l})=>[t(R,{type:l.delivery_status==="delivered"?"success":"warning"},{default:a(()=>[r(d(l.delivery_status==="delivered"?"已到貨":"未到貨"),1)]),_:2},1032,["type"])]),_:1}),t(c,{label:"物流狀態",width:"100"},{default:a(({row:l})=>[t(R,{type:H(l.delivery_status)},{default:a(()=>[r(d(De(l.delivery_status)),1)]),_:2},1032,["type"])]),_:1}),t(c,{prop:"expected_delivery_date",label:"預計交貨日",width:"120"},{default:a(({row:l})=>[r(d(X(l.expected_delivery_date)),1)]),_:1}),t(c,{prop:"remarks",label:"備註/追蹤號","min-width":"150"}),t(c,{label:"操作",width:"200",fixed:"right"},{default:a(({row:l})=>[t(p,{size:"small",type:"primary",onClick:D=>ee(l)},{default:a(()=>[...e[38]||(e[38]=[r(" 更新狀態 ",-1)])]),_:1},8,["onClick"]),t(p,{size:"small",onClick:D=>te(l)},{default:a(()=>[...e[39]||(e[39]=[r(" 編輯備註 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","loading"]),t(se,{"current-page":h.page,"onUpdate:currentPage":e[3]||(e[3]=l=>h.page=l),"page-size":h.size,"onUpdate:pageSize":e[4]||(e[4]=l=>h.size=l),total:h.total,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:N,onCurrentChange:N,style:{"margin-top":"20px"}},null,8,["current-page","page-size","total"])])]),_:1}),t(Z,{label:"國外採購列表",name:"international"},{default:a(()=>[o("div",Ct,[t(P,{model:C,inline:""},{default:a(()=>[t(_,{label:"採購單號"},{default:a(()=>[t(w,{modelValue:C.poNumber,"onUpdate:modelValue":e[5]||(e[5]=l=>C.poNumber=l),placeholder:"輸入採購單號",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{label:"交貨狀態"},{default:a(()=>[t(A,{modelValue:C.deliveryStatus,"onUpdate:modelValue":e[6]||(e[6]=l=>C.deliveryStatus=l),placeholder:"選擇狀態",clearable:"",style:{width:"200px"}},{default:a(()=>[t(m,{label:"全部",value:""}),t(m,{label:"已發貨",value:"shipped"}),t(m,{label:"物流",value:"in_transit"}),t(m,{label:"對方海關",value:"foreign_customs"}),t(m,{label:"台灣海關",value:"taiwan_customs"}),t(m,{label:"已到貨",value:"delivered"})]),_:1},8,["modelValue"])]),_:1}),t(_,null,{default:a(()=>[t(p,{type:"primary",onClick:Y},{default:a(()=>[...e[40]||(e[40]=[r("搜尋",-1)])]),_:1}),t(p,{onClick:Ve},{default:a(()=>[...e[41]||(e[41]=[r("重設",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),o("div",Dt,[t(le,{data:$.value,loading:G.value,stripe:"",onSelectionChange:me},{default:a(()=>[t(c,{type:"selection",width:"55",selectable:pe}),t(c,{prop:"po_number",label:"採購單號",width:"140"}),t(c,{prop:"supplier_name",label:"供應商",width:"180"}),t(c,{label:"交貨狀態",width:"100"},{default:a(({row:l})=>[t(R,{type:l.delivery_status==="delivered"?"success":"warning"},{default:a(()=>[r(d(l.delivery_status==="delivered"?"已到貨":"未到貨"),1)]),_:2},1032,["type"])]),_:1}),t(c,{label:"物流狀態",width:"100"},{default:a(({row:l})=>[t(R,{type:H(l.delivery_status)},{default:a(()=>[r(d(ae(l.delivery_status)),1)]),_:2},1032,["type"])]),_:1}),t(c,{prop:"expected_delivery_date",label:"預計交貨日",width:"120"},{default:a(({row:l})=>[r(d(X(l.expected_delivery_date)),1)]),_:1}),t(c,{prop:"remarks",label:"備註/追蹤號","min-width":"150"}),t(c,{label:"操作",width:"200",fixed:"right"},{default:a(({row:l})=>[t(p,{size:"small",type:"primary",onClick:D=>ee(l)},{default:a(()=>[...e[42]||(e[42]=[r(" 更新狀態 ",-1)])]),_:1},8,["onClick"]),t(p,{size:"small",onClick:D=>te(l)},{default:a(()=>[...e[43]||(e[43]=[r(" 編輯備註 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","loading"]),t(se,{"current-page":z.page,"onUpdate:currentPage":e[7]||(e[7]=l=>z.page=l),"page-size":z.size,"onUpdate:pageSize":e[8]||(e[8]=l=>z.size=l),total:z.total,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:Y,onCurrentChange:Y,style:{"margin-top":"20px"}},null,8,["current-page","page-size","total"])]),f.value.length>0?(v(),E("div",St,[r(" 已選擇 "+d(f.value.length)+" 張採購單 ",1),f.value.length>=2?(v(),x(p,{key:0,type:"primary",size:"small",onClick:e[9]||(e[9]=l=>T.value=!0)},{default:a(()=>[...e[44]||(e[44]=[r(" 建立集運單 ",-1)])]),_:1})):y("",!0)])):y("",!0)]),_:1}),t(Z,{label:"集運單列表",name:"consolidations"},{default:a(()=>[o("div",ht,[t(Q,{gutter:16},{default:a(()=>[(v(!0),E(ie,null,re(O.value,l=>(v(),x(M,{key:l.consolidation_id,span:12},{default:a(()=>[t(F,{class:"consolidation-card"},{header:a(()=>[o("div",zt,[o("span",Nt,d(l.consolidation_name||l.consolidation_id),1),t(R,{type:he(l.logistics_status)},{default:a(()=>[r(d(Se(l.logistics_status)),1)]),_:2},1032,["type"])])]),footer:a(()=>[o("div",jt,[t(p,{size:"small",onClick:D=>be(l)},{default:a(()=>[...e[51]||(e[51]=[r("查看詳情",-1)])]),_:1},8,["onClick"]),t(p,{size:"small",type:"primary",onClick:D=>ge(l)},{default:a(()=>[...e[52]||(e[52]=[r("更新狀態",-1)])]),_:1},8,["onClick"])])]),default:a(()=>[o("div",Ut,[t(Q,null,{default:a(()=>[t(M,{span:12},{default:a(()=>{var D;return[o("div",Et,[e[45]||(e[45]=o("span",{class:"label"},"採購單數量：",-1)),o("span",Mt,d(l.pos_count||((D=l.pos_in_consolidation)==null?void 0:D.length)||0),1)])]}),_:2},1024),t(M,{span:12},{default:a(()=>[o("div",It,[e[46]||(e[46]=o("span",{class:"label"},"總物品數量：",-1)),o("span",$t,d(ye(l)),1)])]),_:2},1024)]),_:2},1024),l.carrier||l.tracking_number?(v(),E("div",Tt,[e[47]||(e[47]=o("span",{class:"label"},"物流廠商：",-1)),o("span",Yt,d(l.carrier||"-"),1)])):y("",!0),l.tracking_number?(v(),E("div",Pt,[e[48]||(e[48]=o("span",{class:"label"},"物流號碼：",-1)),o("span",Rt,d(l.tracking_number||"-"),1)])):y("",!0),o("div",Ft,[e[49]||(e[49]=o("span",{class:"label"},"預計到貨：",-1)),o("span",Lt,d(X(l.expected_delivery_date)),1)]),l.remarks?(v(),E("div",Ot,[e[50]||(e[50]=o("span",{class:"label"},"備註：",-1)),o("span",Bt,d(l.remarks),1)])):y("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),O.value.length===0?(v(),x(ze,{key:0,description:"暫無集運單"})):y("",!0)])]),_:1})]),_:1},8,["modelValue"]),t(W,{modelValue:i.visible,"onUpdate:modelValue":e[15]||(e[15]=l=>i.visible=l),title:"更新交貨狀態",width:"500px"},{footer:a(()=>[t(p,{onClick:e[14]||(e[14]=l=>i.visible=!1)},{default:a(()=>[...e[53]||(e[53]=[r("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:ve},{default:a(()=>[...e[54]||(e[54]=[r("確認更新",-1)])]),_:1})]),default:a(()=>[t(P,{model:i,"label-width":"100px"},{default:a(()=>[t(_,{label:"採購單號"},{default:a(()=>[t(w,{value:i.poNumber,readonly:""},null,8,["value"])]),_:1}),t(_,{label:"新狀態"},{default:a(()=>[t(A,{modelValue:i.newStatus,"onUpdate:modelValue":e[11]||(e[11]=l=>i.newStatus=l),placeholder:"選擇新狀態"},{default:a(()=>[i.region==="domestic"?(v(),x(m,{key:0,label:"已發貨",value:"shipped"})):y("",!0),i.region==="domestic"?(v(),x(m,{key:1,label:"已到貨",value:"delivered"})):y("",!0),i.region==="international"?(v(),x(m,{key:2,label:"已發貨",value:"shipped"})):y("",!0),i.region==="international"?(v(),x(m,{key:3,label:"物流",value:"in_transit"})):y("",!0),i.region==="international"?(v(),x(m,{key:4,label:"對方海關",value:"foreign_customs"})):y("",!0),i.region==="international"?(v(),x(m,{key:5,label:"台灣海關",value:"taiwan_customs"})):y("",!0),i.region==="international"?(v(),x(m,{key:6,label:"已到貨",value:"delivered"})):y("",!0)]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"預計到貨日"},{default:a(()=>[t(oe,{modelValue:i.expectedDeliveryDate,"onUpdate:modelValue":e[12]||(e[12]=l=>i.expectedDeliveryDate=l),type:"date",placeholder:"選擇預計到貨日期",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(_,{label:"備註"},{default:a(()=>[t(w,{modelValue:i.remarks,"onUpdate:modelValue":e[13]||(e[13]=l=>i.remarks=l),type:"textarea",rows:3,placeholder:"輸入備註或追蹤號碼"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(W,{modelValue:g.visible,"onUpdate:modelValue":e[18]||(e[18]=l=>g.visible=l),title:"編輯備註",width:"500px"},{footer:a(()=>[t(p,{onClick:e[17]||(e[17]=l=>g.visible=!1)},{default:a(()=>[...e[55]||(e[55]=[r("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:ce},{default:a(()=>[...e[56]||(e[56]=[r("確認更新",-1)])]),_:1})]),default:a(()=>[t(P,{model:g,"label-width":"100px"},{default:a(()=>[t(_,{label:"採購單號"},{default:a(()=>[t(w,{value:g.poNumber,readonly:""},null,8,["value"])]),_:1}),t(_,{label:"備註"},{default:a(()=>[t(w,{modelValue:g.remarks,"onUpdate:modelValue":e[16]||(e[16]=l=>g.remarks=l),type:"textarea",rows:4,placeholder:"輸入備註或追蹤號碼"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(W,{modelValue:T.value,"onUpdate:modelValue":e[21]||(e[21]=l=>T.value=l),title:"新增集運單",width:"600px"},{footer:a(()=>[t(p,{onClick:e[20]||(e[20]=l=>T.value=!1)},{default:a(()=>[...e[57]||(e[57]=[r("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:fe,disabled:f.value.length<2},{default:a(()=>[...e[58]||(e[58]=[r(" 建立集運單 ",-1)])]),_:1},8,["disabled"])]),default:a(()=>[t(P,{"label-width":"100px"},{default:a(()=>[t(_,{label:"集運單名稱"},{default:a(()=>[t(w,{modelValue:B.consolidation_name,"onUpdate:modelValue":e[19]||(e[19]=l=>B.consolidation_name=l),placeholder:"輸入集運單名稱（選填）"},null,8,["modelValue"])]),_:1}),t(_,{label:"選擇採購單"},{default:a(()=>[o("div",At,[(v(!0),E(ie,null,re(f.value,l=>(v(),x(R,{key:l.po_number,closable:"",onClose:D=>_e(l),style:{margin:"2px"}},{default:a(()=>[r(d(l.po_number)+" - "+d(l.supplier_name),1)]),_:2},1032,["onClose"]))),128))]),f.value.length<2?(v(),E("div",Wt," 請至少選擇2張國際已發貨採購單 ")):y("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(W,{modelValue:n.visible,"onUpdate:modelValue":e[28]||(e[28]=l=>n.visible=l),title:"更新集運單狀態",width:"600px"},{footer:a(()=>[t(p,{onClick:e[27]||(e[27]=l=>n.visible=!1)},{default:a(()=>[...e[59]||(e[59]=[r("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:ke},{default:a(()=>[...e[60]||(e[60]=[r("確認更新",-1)])]),_:1})]),default:a(()=>[t(P,{model:n,"label-width":"120px"},{default:a(()=>[t(_,{label:"集運單名稱"},{default:a(()=>[t(w,{value:n.consolidationName,readonly:""},null,8,["value"])]),_:1}),t(_,{label:"物流狀態"},{default:a(()=>[t(A,{modelValue:n.newStatus,"onUpdate:modelValue":e[22]||(e[22]=l=>n.newStatus=l),placeholder:"選擇新狀態"},{default:a(()=>[t(m,{label:"已發貨",value:"shipped"}),t(m,{label:"物流中",value:"in_transit"}),t(m,{label:"對方海關",value:"foreign_customs"}),t(m,{label:"台灣海關",value:"taiwan_customs"}),t(m,{label:"已到貨",value:"delivered"})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"物流廠商"},{default:a(()=>[t(w,{modelValue:n.carrier,"onUpdate:modelValue":e[23]||(e[23]=l=>n.carrier=l),placeholder:"輸入物流廠商名稱"},null,8,["modelValue"])]),_:1}),t(_,{label:"物流號碼"},{default:a(()=>[t(w,{modelValue:n.trackingNumber,"onUpdate:modelValue":e[24]||(e[24]=l=>n.trackingNumber=l),placeholder:"輸入物流追蹤號碼"},null,8,["modelValue"])]),_:1}),t(_,{label:"預計到貨日期"},{default:a(()=>[t(oe,{modelValue:n.expectedDeliveryDate,"onUpdate:modelValue":e[25]||(e[25]=l=>n.expectedDeliveryDate=l),type:"date",placeholder:"選擇預計到貨日期",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(_,{label:"備註"},{default:a(()=>[t(w,{modelValue:n.remarks,"onUpdate:modelValue":e[26]||(e[26]=l=>n.remarks=l),type:"textarea",rows:3,placeholder:"輸入備註"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const ma=et(qt,[["__scopeId","data-v-305757c7"],["__file","D:/AWORKSPACE/Github/project_ERP_dev_agent/frontend/src/views/purchase-orders/DeliveryMaintenance.vue"]]);export{ma as default};
//# sourceMappingURL=DeliveryMaintenance-0452e194.js.map
