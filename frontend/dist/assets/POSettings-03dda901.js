import{d as J,r as m,a1 as j,c as z,b as d,e as l,w as t,m as M,b0 as G,T as H,o as E,g as K,a7 as L,i as p,t as W,q as X,ab as Q,X as f,H as Y,I as Z,av as ee,ao as le,aw as ae,a$ as te,j as oe,k as ne,E as se,bv as de,_ as ie}from"./index-61294aba.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                    *//* empty css                     *//* empty css                 *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css                       */const re={class:"po-settings"},ue={class:"page-header"},me={class:"header-actions"},pe={class:"settings-section"},fe={class:"content-preview"},ce={class:"settings-section"},_e={class:"dialog-footer"},ve=J({__name:"POSettings",setup(ye){const g=m("terms"),i=m([]),v=m(!1),b=m("新增模板"),n=m({name:"",content:"",is_default:!1}),s=m({name:"Taiwan Semiconductor Innovation Company",address:"台北市信義區信義路五段7號",phone:"02-8101-2345",fax:"",tax_id:"",email:""}),C=m(),k=m();j(()=>{S(),I()});const S=async()=>{try{const o=localStorage.getItem("po_terms_templates");o?i.value=JSON.parse(o):(i.value=[{id:1,name:"標準條款",description:"一般採購單使用的標準注意事項",content:`1. 付款條件：月結 30 天
2. 交貨期限：訂單確認後 14 個工作天
3. 品質要求：須符合國家標準規範
4. 驗收標準：貨到 7 日內完成驗收
5. 保固期限：自驗收合格日起算一年
6. 退換貨規定：如有品質問題，可於驗收後 30 日內申請退換貨
7. 發票開立：請於出貨時一併開立統一發票`,is_default:!0,is_system:!0},{id:2,name:"急件條款",description:"用於急件採購的注意事項",content:`1. 付款條件：貨到付款
2. 交貨期限：訂單確認後 3 個工作天內
3. 品質要求：須符合國家標準規範
4. 驗收標準：貨到當日完成驗收
5. 保固期限：自驗收合格日起算一年
6. 急件處理：需優先處理並確保準時交貨
7. 延遲罰則：每延遲一日扣款總金額 1%`,is_default:!1,is_system:!0}],V())}catch(o){console.error("Failed to load templates:",o)}},I=async()=>{try{const o=localStorage.getItem("po_company_info");o&&(s.value=JSON.parse(o))}catch(o){console.error("Failed to load company info:",o)}},V=()=>{localStorage.setItem("po_terms_templates",JSON.stringify(i.value))},U=()=>{n.value={name:"",content:"",is_default:!1},b.value="新增模板",v.value=!0},h=o=>{n.value={...o},b.value="編輯模板",v.value=!0},O=async()=>{if(!n.value.name||!n.value.content){f.warning("請填寫必要欄位");return}try{if(n.value.id){const o=i.value.findIndex(e=>e.id===n.value.id);o!==-1&&(i.value[o]={...n.value})}else n.value.id=Date.now(),i.value.push({...n.value});n.value.is_default&&i.value.forEach(o=>{o.id!==n.value.id&&(o.is_default=!1)}),V(),f.success("模板儲存成功"),v.value=!1}catch{f.error("儲存模板失敗")}},B=async o=>{try{i.value.forEach(e=>{e.is_default=e.id===o.id}),V(),f.success("已設為預設模板")}catch{f.error("設定失敗")}},D=async o=>{try{await Y.confirm(`確定要刪除模板「${o.name}」嗎？`,"確認刪除",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"});const e=i.value.findIndex(c=>c.id===o.id);e!==-1&&(i.value.splice(e,1),V(),f.success("模板已刪除"))}catch{}},F=async()=>{try{localStorage.setItem("po_company_info",JSON.stringify(s.value)),f.success("公司資訊已儲存")}catch{f.error("儲存失敗")}},N=o=>{const c=o.split(`
`).slice(0,2).join(" | ");return c.length>100?c.substring(0,100)+"...":c};return(o,e)=>{const c=Z,_=M,y=ee,P=le,R=ae,w=te,u=oe,r=ne,x=se,$=G,q=de,A=H;return E(),z("div",re,[d("div",ue,[e[14]||(e[14]=d("h1",{class:"page-title"},"採購單資訊設定",-1)),d("div",me,[l(_,{type:"primary",onClick:U},{default:t(()=>[l(c,null,{default:t(()=>[l(K(L))]),_:1}),e[13]||(e[13]=p(" 新增模板 ",-1))]),_:1})])]),l($,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=a=>g.value=a)},{default:t(()=>[l(w,{label:"注意事項模板",name:"terms"},{default:t(()=>[d("div",pe,[e[19]||(e[19]=d("div",{class:"section-header"},[d("h3",null,"注意事項模板管理"),d("p",{class:"section-desc"},"設定採購單輸出時可選擇的注意事項模板")],-1)),l(R,{data:i.value,stripe:"",style:{width:"100%"}},{default:t(()=>[l(y,{prop:"name",label:"模板名稱",width:"200"}),l(y,{prop:"description",label:"說明","min-width":"200"}),l(y,{label:"內容預覽","min-width":"300"},{default:t(a=>[d("div",fe,W(N(a.row.content)),1)]),_:1}),l(y,{prop:"is_default",label:"預設",width:"80",align:"center"},{default:t(a=>[a.row.is_default?(E(),X(P,{key:0,type:"success"},{default:t(()=>[...e[15]||(e[15]=[p("預設",-1)])]),_:1})):Q("",!0)]),_:1}),l(y,{label:"操作",width:"200",fixed:"right"},{default:t(a=>[l(_,{size:"small",onClick:T=>h(a.row)},{default:t(()=>[...e[16]||(e[16]=[p("編輯",-1)])]),_:1},8,["onClick"]),l(_,{size:"small",type:"primary",onClick:T=>B(a.row),disabled:a.row.is_default},{default:t(()=>[...e[17]||(e[17]=[p(" 設為預設 ",-1)])]),_:1},8,["onClick","disabled"]),l(_,{size:"small",type:"danger",onClick:T=>D(a.row),disabled:a.row.is_system},{default:t(()=>[...e[18]||(e[18]=[p(" 刪除 ",-1)])]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["data"])])]),_:1}),l(w,{label:"公司資訊",name:"company"},{default:t(()=>[d("div",ce,[e[21]||(e[21]=d("div",{class:"section-header"},[d("h3",null,"公司資訊設定"),d("p",{class:"section-desc"},"設定採購單上顯示的公司資訊")],-1)),l(x,{ref_key:"companyFormRef",ref:C,model:s.value,"label-width":"120px",style:{"max-width":"600px"}},{default:t(()=>[l(r,{label:"公司名稱",prop:"name",required:""},{default:t(()=>[l(u,{modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.name=a),placeholder:"請輸入公司名稱"},null,8,["modelValue"])]),_:1}),l(r,{label:"公司地址",prop:"address",required:""},{default:t(()=>[l(u,{modelValue:s.value.address,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.address=a),placeholder:"請輸入公司地址"},null,8,["modelValue"])]),_:1}),l(r,{label:"聯絡電話",prop:"phone"},{default:t(()=>[l(u,{modelValue:s.value.phone,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.phone=a),placeholder:"請輸入聯絡電話"},null,8,["modelValue"])]),_:1}),l(r,{label:"傳真號碼",prop:"fax"},{default:t(()=>[l(u,{modelValue:s.value.fax,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.fax=a),placeholder:"請輸入傳真號碼"},null,8,["modelValue"])]),_:1}),l(r,{label:"統一編號",prop:"tax_id"},{default:t(()=>[l(u,{modelValue:s.value.tax_id,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.tax_id=a),placeholder:"請輸入統一編號"},null,8,["modelValue"])]),_:1}),l(r,{label:"電子郵件",prop:"email"},{default:t(()=>[l(u,{modelValue:s.value.email,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.email=a),placeholder:"請輸入電子郵件"},null,8,["modelValue"])]),_:1}),l(r,null,{default:t(()=>[l(_,{type:"primary",onClick:F},{default:t(()=>[...e[20]||(e[20]=[p("儲存公司資訊",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["modelValue"]),l(A,{modelValue:v.value,"onUpdate:modelValue":e[12]||(e[12]=a=>v.value=a),title:b.value,width:"800px"},{footer:t(()=>[d("span",_e,[l(_,{onClick:e[11]||(e[11]=a=>v.value=!1)},{default:t(()=>[...e[22]||(e[22]=[p("取消",-1)])]),_:1}),l(_,{type:"primary",onClick:O},{default:t(()=>[...e[23]||(e[23]=[p("儲存",-1)])]),_:1})])]),default:t(()=>[l(x,{ref_key:"templateFormRef",ref:k,model:n.value,"label-width":"100px"},{default:t(()=>[l(r,{label:"模板名稱",prop:"name",required:""},{default:t(()=>[l(u,{modelValue:n.value.name,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value.name=a),placeholder:"請輸入模板名稱",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(r,{label:"說明",prop:"description"},{default:t(()=>[l(u,{modelValue:n.value.description,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value.description=a),placeholder:"請輸入模板說明",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(r,{label:"模板內容",prop:"content",required:""},{default:t(()=>[l(u,{modelValue:n.value.content,"onUpdate:modelValue":e[9]||(e[9]=a=>n.value.content=a),type:"textarea",rows:12,placeholder:`請輸入注意事項內容，可使用以下變數：\r
{company_name} - 公司名稱\r
{order_date} - 訂購日期\r
{delivery_days} - 交貨天數`},null,8,["modelValue"])]),_:1}),l(r,{label:"設為預設",prop:"is_default"},{default:t(()=>[l(q,{modelValue:n.value.is_default,"onUpdate:modelValue":e[10]||(e[10]=a=>n.value.is_default=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const Oe=ie(ve,[["__scopeId","data-v-ada700c6"],["__file","D:/AWORKSPACE/Github/project_ERP_dev_agent/frontend/src/views/system/POSettings.vue"]]);export{Oe as default};
//# sourceMappingURL=POSettings-03dda901.js.map
