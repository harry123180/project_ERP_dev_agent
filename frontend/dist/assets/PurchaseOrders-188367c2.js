import{d as H,n as J,y as Z,r as c,a1 as ee,c as b,b as s,e as t,t as r,q as w,w as o,ab as k,aP as te,g as z,a3 as ae,X as x,m as se,ao as le,E as oe,aw as re,ax as ne,aS as de,o as _,i as n,ah as ue,ai as ie,k as pe,au as ce,aQ as _e,av as me,_ as ve}from"./index-61294aba.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                     *//* empty css                             *//* empty css                  */const ge={class:"supplier-purchase-orders"},fe={class:"header"},ye={class:"header-left"},he={key:0,class:"header-info"},be={class:"supplier-card"},we={class:"supplier-name"},ke={class:"value"},Ce={class:"supplier-contact"},Se={class:"value"},Ee={class:"supplier-phone"},Pe={class:"value"},ze={key:0,class:"summary-cards"},xe={class:"summary-card"},De={class:"summary-value"},Me={class:"summary-card"},Re={class:"summary-value"},Oe={class:"summary-card"},Te={class:"summary-value"},Ve={class:"summary-card"},$e={class:"summary-value"},Ye={class:"filters"},Ne={class:"content"},Be={key:0,class:"pagination"},Le=H({__name:"PurchaseOrders",setup(Ae){const V=J(),$=Z(),m=c(null),D=c([]),C=c(!1),h=c(1),S=c(20),E=c(0),g=c(null),d=c({status:"",dateRange:null}),M=async()=>{var l;C.value=!0;try{const e={page:h.value,page_size:S.value};d.value.status&&(e.status=d.value.status),d.value.dateRange&&d.value.dateRange.length===2&&(e.start_date=d.value.dateRange[0],e.end_date=d.value.dateRange[1]);const u=(await ae.get(`/suppliers/${V.params.id}/purchase-orders`,{params:e})).data;m.value=u.supplier,D.value=u.purchase_orders||[],E.value=((l=u.pagination)==null?void 0:l.total)||0,g.value=u.summary}catch(e){console.error("Error fetching purchase orders:",e),x.error("載入採購單資料時發生錯誤")}finally{C.value=!1}},f=M,Y=()=>{d.value={status:"",dateRange:null},h.value=1,f()},N=({prop:l,order:e})=>{console.log("Sort:",l,e),f()},R=l=>{$.push(`/purchase-orders/${l.purchase_order_no}`)},B=l=>{x.info("列印功能開發中")},L=()=>{x.info("匯出功能開發中")},O=l=>l?new Date(l).toLocaleDateString("zh-TW"):"-",T=l=>l?l.toLocaleString("zh-TW"):"0",A=l=>({order_created:"info",outputted:"warning",confirmed:"primary",shipped:"",arrived:"",completed:"success",cancelled:"danger"})[l]||"info",U=l=>({draft:"草稿",pending:"待處理",order_created:"訂單建立",outputted:"已輸出",confirmed:"已確認",purchased:"已採購",shipped:"已出貨",arrived:"已到貨",completed:"已完成",cancelled:"已取消"})[l]||l,F=l=>({not_shipped:"info",pending:"warning",shipped:"",in_transit:"primary",foreign_customs:"danger",taiwan_customs:"danger",delivered:"success",delayed:"danger"})[l]||"info",W=l=>({not_shipped:"未發貨",pending:"待交貨",shipped:"已發貨",in_transit:"運送中",foreign_customs:"對方海關",taiwan_customs:"台灣海關",delivered:"已交貨",delayed:"延遲"})[l]||l||"待交貨";return ee(()=>{M()}),(l,e)=>{const v=se,u=le,i=ue,j=ie,P=pe,I=ce,q=oe,G=_e,p=me,K=re,Q=ne,X=de;return _(),b("div",ge,[s("div",fe,[s("div",ye,[t(v,{icon:"ArrowLeft",onClick:e[0]||(e[0]=a=>l.$router.go(-1)),circle:""}),e[5]||(e[5]=s("h1",null,"供應商採購單",-1))]),m.value?(_(),b("div",he,[s("div",be,[s("div",we,[e[8]||(e[8]=s("span",{class:"label"},"供應商：",-1)),s("span",ke,r(m.value.supplier_name_zh),1),m.value.supplier_region==="international"?(_(),w(u,{key:0,type:"warning",size:"small"},{default:o(()=>[...e[6]||(e[6]=[n("國外",-1)])]),_:1})):(_(),w(u,{key:1,type:"success",size:"small"},{default:o(()=>[...e[7]||(e[7]=[n("國內",-1)])]),_:1}))]),s("div",Ce,[e[9]||(e[9]=s("span",{class:"label"},"聯絡人：",-1)),s("span",Se,r(m.value.supplier_contact_person||"-"),1)]),s("div",Ee,[e[10]||(e[10]=s("span",{class:"label"},"電話：",-1)),s("span",Pe,r(m.value.supplier_phone||"-"),1)])])])):k("",!0)]),g.value?(_(),b("div",ze,[s("div",xe,[s("div",De,r(g.value.total_orders),1),e[11]||(e[11]=s("div",{class:"summary-label"},"總採購單數",-1))]),s("div",Me,[s("div",Re,"NT$ "+r(T(g.value.total_amount)),1),e[12]||(e[12]=s("div",{class:"summary-label"},"總採購金額",-1))]),s("div",Oe,[s("div",Te,r(g.value.pending_orders),1),e[13]||(e[13]=s("div",{class:"summary-label"},"待處理訂單",-1))]),s("div",Ve,[s("div",$e,r(g.value.completed_orders),1),e[14]||(e[14]=s("div",{class:"summary-label"},"已完成訂單",-1))])])):k("",!0),s("div",Ye,[t(q,{model:d.value,layout:"inline",class:"filter-form"},{default:o(()=>[t(P,{label:"採購單狀態"},{default:o(()=>[t(j,{modelValue:d.value.status,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.status=a),placeholder:"選擇狀態",clearable:"",style:{width:"150px"}},{default:o(()=>[t(i,{label:"全部",value:""}),t(i,{label:"訂單建立",value:"order_created"}),t(i,{label:"已輸出",value:"outputted"}),t(i,{label:"已確認",value:"confirmed"}),t(i,{label:"已出貨",value:"shipped"}),t(i,{label:"已到貨",value:"arrived"}),t(i,{label:"已完成",value:"completed"}),t(i,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),t(P,{label:"訂單日期"},{default:o(()=>[t(I,{modelValue:d.value.dateRange,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"開始日期","end-placeholder":"結束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(P,null,{default:o(()=>[t(v,{type:"primary",icon:"Search",onClick:z(f)},{default:o(()=>[...e[15]||(e[15]=[n("查詢",-1)])]),_:1},8,["onClick"]),t(v,{icon:"Refresh",onClick:Y},{default:o(()=>[...e[16]||(e[16]=[n("重置",-1)])]),_:1}),t(v,{type:"success",icon:"Download",onClick:L},{default:o(()=>[...e[17]||(e[17]=[n("匯出",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),s("div",Ne,[te((_(),w(K,{data:D.value,stripe:"",border:"",onSortChange:N},{default:o(()=>[t(p,{prop:"purchase_order_no",label:"採購單號",width:"150",sortable:"custom"},{default:o(a=>[t(G,{type:"primary",onClick:y=>R(a.row)},{default:o(()=>[n(r(a.row.purchase_order_no),1)]),_:2},1032,["onClick"])]),_:1}),t(p,{prop:"order_date",label:"訂單日期",width:"120",sortable:"custom"},{default:o(a=>[n(r(O(a.row.order_date)),1)]),_:1}),t(p,{prop:"purchase_status",label:"狀態",width:"120"},{default:o(a=>[t(u,{type:A(a.row.purchase_status)},{default:o(()=>[n(r(U(a.row.purchase_status)),1)]),_:2},1032,["type"])]),_:1}),t(p,{prop:"grand_total_int",label:"總金額",width:"150",align:"right",sortable:"custom"},{default:o(a=>[n(" NT$ "+r(T(a.row.grand_total_int)),1)]),_:1}),t(p,{prop:"expected_delivery_date",label:"預計交貨日",width:"120"},{default:o(a=>[n(r(O(a.row.expected_delivery_date)),1)]),_:1}),t(p,{prop:"delivery_status",label:"交貨狀態",width:"120"},{default:o(a=>[t(u,{type:F(a.row.delivery_status)},{default:o(()=>[n(r(W(a.row.delivery_status)),1)]),_:2},1032,["type"])]),_:1}),t(p,{prop:"payment_method",label:"付款方式",width:"120"},{default:o(a=>{var y;return[n(r(a.row.payment_method||((y=m.value)==null?void 0:y.payment_terms)||"-"),1)]}),_:1}),t(p,{label:"操作",width:"200",fixed:"right"},{default:o(a=>[t(v,{type:"primary",size:"small",icon:"View",onClick:y=>R(a.row)},{default:o(()=>[...e[18]||(e[18]=[n(" 查看 ",-1)])]),_:1},8,["onClick"]),a.row.purchase_status==="order_created"?(_(),w(v,{key:0,type:"warning",size:"small",icon:"Printer",onClick:y=>B(a.row)},{default:o(()=>[...e[19]||(e[19]=[n(" 列印 ",-1)])]),_:1},8,["onClick"])):k("",!0)]),_:1})]),_:1},8,["data"])),[[X,C.value]]),E.value>0?(_(),b("div",Be,[t(Q,{"current-page":h.value,"onUpdate:currentPage":e[3]||(e[3]=a=>h.value=a),"page-size":S.value,"onUpdate:pageSize":e[4]||(e[4]=a=>S.value=a),"page-sizes":[10,20,50,100],total:E.value,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:z(f),onCurrentChange:z(f)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):k("",!0)])])}}});const et=ve(Le,[["__scopeId","data-v-61cd7f39"],["__file","D:/AWORKSPACE/Github/project_ERP_dev_agent/frontend/src/views/suppliers/PurchaseOrders.vue"]]);export{et as default};
//# sourceMappingURL=PurchaseOrders-188367c2.js.map
