import{d as N,n as V,y as I,u as G,r as O,p as v,a1 as W,aP as j,c as n,b as e,t as a,ab as o,e as r,w as i,g as m,q as f,X as w,H as q,m as F,al as H,ak as K,aS as Q,o as l,i as d,aZ as X,aG as B,aT as Z,ao as J,aQ as U,_ as Y}from"./index-61294aba.js";/* empty css                   *//* empty css                 *//* empty css                *//* empty css                *//* empty css               *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                   */import{u as ee}from"./suppliers-64727151.js";const se={class:"supplier-detail"},te={class:"header"},ie={class:"title-section"},ae={key:0,class:"subtitle"},le={class:"actions"},oe={key:0,class:"content"},ne={class:"card-header"},re={class:"info-grid"},ue={class:"info-section"},de={class:"info-items"},pe={class:"info-item"},_e={class:"value"},ce={class:"info-item"},ve={class:"value"},me={key:0,class:"info-item"},fe={class:"value"},ye={class:"info-item"},he={key:1,class:"info-item"},ge={class:"value address"},ke={class:"info-section"},be={class:"info-items"},we={key:0,class:"info-item"},Se={class:"value"},Ce={key:1,class:"info-item"},xe={class:"value"},Ee={key:2,class:"info-item"},ze={class:"value"},Be={class:"info-grid"},De={class:"info-section"},Te={class:"info-items"},Me={key:0,class:"info-item"},Pe={class:"value"},$e={key:1,class:"info-item"},Re={class:"value"},Ae={key:2,class:"info-item"},Le={class:"value bank-account"},Ne={class:"remark-content"},Ve={class:"info-grid"},Ie={class:"info-section"},Ge={class:"info-items"},Oe={class:"info-item"},We={class:"value"},je={class:"info-item"},qe={class:"value"},Fe={class:"info-item"},He={class:"action-section"},Ke={class:"primary-actions"},Qe={key:0,class:"secondary-actions"},Xe=N({__name:"Detail",setup(Ze){const y=V(),h=I(),_=ee(),D=G(),g=O(!1),t=v(()=>_.currentSupplier),S=v(()=>_.loading),C=v(()=>D.hasRole("Admin","ProcurementMgr","Procurement")),T=v(()=>t.value?t.value.supplier_tax_id||t.value.payment_terms||t.value.bank_account:!1),M=async()=>{try{await _.fetchSupplierById(y.params.id)}catch{w.error("無法載入供應商資料"),k()}},k=()=>{h.push("/suppliers")},x=()=>{h.push(`/suppliers/${y.params.id}/edit`)},P=()=>{h.push(`/suppliers/${y.params.id}/purchase-orders`)},$=async()=>{if(!t.value)return;const u=t.value.is_active?"停用":"啟用";try{await q.confirm(`確定要${u}這個供應商嗎？`,"確認操作",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}),g.value=!0,await _.updateSupplier(t.value.supplier_id,{is_active:!t.value.is_active}),w.success(`供應商已${u}`)}catch(s){s!=="cancel"&&w.error(`${u}供應商失敗`)}finally{g.value=!1}},R=u=>({cash:"現金",net_30:"月結30天",net_60:"月結60天",net_90:"月結90天",prepaid:"預付款",cod:"貨到付款"})[u]||u,E=u=>u?new Date(u).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";return W(()=>{M()}),(u,s)=>{const p=F,b=J,z=U,c=H,A=K,L=Q;return j((l(),n("div",se,[e("div",te,[e("div",ie,[s[0]||(s[0]=e("h1",null,"供應商詳情",-1)),t.value?(l(),n("span",ae,a(t.value.supplier_name_zh)+" ("+a(t.value.supplier_id)+") ",1)):o("",!0)]),e("div",le,[r(p,{onClick:k,icon:m(X)},{default:i(()=>[...s[1]||(s[1]=[d(" 返回列表 ",-1)])]),_:1},8,["icon"]),C.value?(l(),f(p,{key:0,type:"warning",icon:m(B),onClick:x},{default:i(()=>[...s[2]||(s[2]=[d(" 編輯供應商 ",-1)])]),_:1},8,["icon"])):o("",!0)])]),t.value?(l(),n("div",oe,[r(c,{class:"info-card",shadow:"never"},{header:i(()=>[e("div",ne,[s[3]||(s[3]=e("h3",null,"基本資訊",-1)),r(b,{type:t.value.is_active?"success":"danger",size:"default"},{default:i(()=>[d(a(t.value.is_active?"啟用":"停用"),1)]),_:1},8,["type"])])]),default:i(()=>[e("div",re,[e("div",ue,[s[9]||(s[9]=e("h4",{class:"section-title"},"供應商資訊",-1)),e("div",de,[e("div",pe,[s[4]||(s[4]=e("label",null,"供應商編號",-1)),e("span",_e,a(t.value.supplier_id),1)]),e("div",ce,[s[5]||(s[5]=e("label",null,"中文名稱",-1)),e("span",ve,a(t.value.supplier_name_zh),1)]),t.value.supplier_name_en?(l(),n("div",me,[s[6]||(s[6]=e("label",null,"英文名稱",-1)),e("span",fe,a(t.value.supplier_name_en),1)])):o("",!0),e("div",ye,[s[7]||(s[7]=e("label",null,"供應商地區",-1)),r(b,{type:t.value.supplier_region==="domestic"?"success":"warning",size:"small"},{default:i(()=>[d(a(t.value.supplier_region==="domestic"?"國內":"國外"),1)]),_:1},8,["type"])]),t.value.supplier_address?(l(),n("div",he,[s[8]||(s[8]=e("label",null,"地址",-1)),e("span",ge,a(t.value.supplier_address),1)])):o("",!0)])]),e("div",ke,[s[13]||(s[13]=e("h4",{class:"section-title"},"聯絡資訊",-1)),e("div",be,[t.value.supplier_contact_person?(l(),n("div",we,[s[10]||(s[10]=e("label",null,"聯絡人",-1)),e("span",Se,a(t.value.supplier_contact_person),1)])):o("",!0),t.value.supplier_phone?(l(),n("div",Ce,[s[11]||(s[11]=e("label",null,"聯絡電話",-1)),e("span",xe,[r(z,{href:`tel:${t.value.supplier_phone}`,type:"primary"},{default:i(()=>[d(a(t.value.supplier_phone),1)]),_:1},8,["href"])])])):o("",!0),t.value.supplier_email?(l(),n("div",Ee,[s[12]||(s[12]=e("label",null,"電子郵件",-1)),e("span",ze,[r(z,{href:`mailto:${t.value.supplier_email}`,type:"primary"},{default:i(()=>[d(a(t.value.supplier_email),1)]),_:1},8,["href"])])])):o("",!0)])])])]),_:1}),T.value?(l(),f(c,{key:0,class:"info-card",shadow:"never"},{header:i(()=>[...s[14]||(s[14]=[e("div",{class:"card-header"},[e("h3",null,"財務資訊")],-1)])]),default:i(()=>[e("div",Be,[e("div",De,[e("div",Te,[t.value.supplier_tax_id?(l(),n("div",Me,[s[15]||(s[15]=e("label",null,"統一編號",-1)),e("span",Pe,a(t.value.supplier_tax_id),1)])):o("",!0),t.value.payment_terms?(l(),n("div",$e,[s[16]||(s[16]=e("label",null,"付款條件",-1)),e("span",Re,a(R(t.value.payment_terms)),1)])):o("",!0),t.value.bank_account?(l(),n("div",Ae,[s[17]||(s[17]=e("label",null,"銀行帳戶",-1)),e("span",Le,a(t.value.bank_account),1)])):o("",!0)])])])]),_:1})):o("",!0),t.value.supplier_remark?(l(),f(c,{key:1,class:"info-card",shadow:"never"},{header:i(()=>[...s[18]||(s[18]=[e("div",{class:"card-header"},[e("h3",null,"備註")],-1)])]),default:i(()=>[e("div",Ne,a(t.value.supplier_remark),1)]),_:1})):o("",!0),r(c,{class:"info-card",shadow:"never"},{header:i(()=>[...s[19]||(s[19]=[e("div",{class:"card-header"},[e("h3",null,"系統資訊")],-1)])]),default:i(()=>[e("div",Ve,[e("div",Ie,[e("div",Ge,[e("div",Oe,[s[20]||(s[20]=e("label",null,"建立時間",-1)),e("span",We,a(E(t.value.created_at)),1)]),e("div",je,[s[21]||(s[21]=e("label",null,"最後更新",-1)),e("span",qe,a(E(t.value.updated_at)),1)]),e("div",Fe,[s[22]||(s[22]=e("label",null,"啟用狀態",-1)),r(b,{type:t.value.is_active?"success":"danger",size:"small"},{default:i(()=>[d(a(t.value.is_active?"啟用中":"已停用"),1)]),_:1},8,["type"])])])])])]),_:1}),e("div",He,[e("div",Ke,[r(p,{type:"primary",size:"large",icon:m(Z),onClick:P},{default:i(()=>[...s[23]||(s[23]=[d(" 查看採購單 ",-1)])]),_:1},8,["icon"])]),C.value?(l(),n("div",Qe,[r(p,{type:"warning",size:"large",icon:m(B),onClick:x},{default:i(()=>[...s[24]||(s[24]=[d(" 編輯供應商 ",-1)])]),_:1},8,["icon"]),r(p,{type:t.value.is_active?"danger":"success",size:"large",icon:t.value.is_active?"Close":"Check",onClick:$,loading:g.value},{default:i(()=>[d(a(t.value.is_active?"停用":"啟用"),1)]),_:1},8,["type","icon","loading"])])):o("",!0)])])):S.value?o("",!0):(l(),f(A,{key:1,description:"找不到供應商資料","image-size":200},{default:i(()=>[r(p,{onClick:k},{default:i(()=>[...s[25]||(s[25]=[d("返回列表",-1)])]),_:1})]),_:1}))])),[[L,S.value]])}}});const rs=Y(Xe,[["__scopeId","data-v-829e7d3e"],["__file","D:/AWORKSPACE/Github/project_ERP_dev_agent/frontend/src/views/suppliers/Detail.vue"]]);export{rs as default};
//# sourceMappingURL=Detail-41c4b9ec.js.map
