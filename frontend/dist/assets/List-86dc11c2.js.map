{"version":3,"file":"List-86dc11c2.js","sources":["../../src/components/DataTable.vue","../../src/views/requisitions/List.vue"],"sourcesContent":["<template>\r\n  <div class=\"data-table\">\r\n    <!-- Filter Bar -->\r\n    <div v-if=\"showFilterBar\" class=\"filter-bar\">\r\n      <el-form\r\n        :model=\"filters\"\r\n        :inline=\"true\"\r\n        @submit.prevent=\"handleSearch\"\r\n      >\r\n        <el-form-item\r\n          v-for=\"field in filterFields\"\r\n          :key=\"field.prop\"\r\n          :label=\"field.label\"\r\n        >\r\n          <el-input\r\n            v-if=\"field.type === 'input'\"\r\n            v-model=\"filters[field.prop]\"\r\n            :placeholder=\"field.placeholder\"\r\n            :clearable=\"field.clearable !== false\"\r\n            style=\"width: 200px\"\r\n          />\r\n          <el-select\r\n            v-else-if=\"field.type === 'select'\"\r\n            v-model=\"filters[field.prop]\"\r\n            :placeholder=\"field.placeholder\"\r\n            :clearable=\"field.clearable !== false\"\r\n            :filterable=\"field.filterable\"\r\n            :multiple=\"field.multiple\"\r\n            style=\"width: 200px\"\r\n          >\r\n            <el-option\r\n              v-for=\"option in field.options\"\r\n              :key=\"option.value\"\r\n              :label=\"option.label\"\r\n              :value=\"option.value\"\r\n              :disabled=\"option.disabled\"\r\n            />\r\n          </el-select>\r\n          <el-date-picker\r\n            v-else-if=\"field.type === 'date'\"\r\n            v-model=\"filters[field.prop]\"\r\n            type=\"date\"\r\n            :placeholder=\"field.placeholder\"\r\n            :format=\"field.format || 'YYYY-MM-DD'\"\r\n            :value-format=\"field.valueFormat || 'YYYY-MM-DD'\"\r\n            style=\"width: 200px\"\r\n          />\r\n          <el-date-picker\r\n            v-else-if=\"field.type === 'daterange'\"\r\n            v-model=\"filters[field.prop]\"\r\n            type=\"daterange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"開始日期\"\r\n            end-placeholder=\"結束日期\"\r\n            :format=\"field.format || 'YYYY-MM-DD'\"\r\n            :value-format=\"field.valueFormat || 'YYYY-MM-DD'\"\r\n            style=\"width: 250px\"\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleSearch\">\r\n            <el-icon><Search /></el-icon>\r\n            搜索\r\n          </el-button>\r\n          <el-button @click=\"handleReset\">\r\n            <el-icon><Refresh /></el-icon>\r\n            重置\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- Toolbar -->\r\n    <div v-if=\"showToolbar\" class=\"table-toolbar\">\r\n      <div class=\"toolbar-left\">\r\n        <slot name=\"toolbar-left\">\r\n          <el-button\r\n            v-if=\"showCreate\"\r\n            type=\"primary\"\r\n            @click=\"$emit('create')\"\r\n          >\r\n            <el-icon><Plus /></el-icon>\r\n            新增\r\n          </el-button>\r\n        </slot>\r\n      </div>\r\n      <div class=\"toolbar-right\">\r\n        <slot name=\"toolbar-right\">\r\n          <el-button\r\n            v-if=\"showExport\"\r\n            @click=\"$emit('export')\"\r\n          >\r\n            <el-icon><Download /></el-icon>\r\n            導出\r\n          </el-button>\r\n          <el-button\r\n            @click=\"handleRefresh\"\r\n          >\r\n            <el-icon><Refresh /></el-icon>\r\n            刷新\r\n          </el-button>\r\n        </slot>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Table -->\r\n    <el-table\r\n      :data=\"data\"\r\n      :loading=\"loading\"\r\n      stripe\r\n      border\r\n      :height=\"tableHeight\"\r\n      :max-height=\"maxHeight\"\r\n      :show-summary=\"showSummary\"\r\n      :summary-method=\"summaryMethod\"\r\n      :cell-class-name=\"getCellClassName\"\r\n      @selection-change=\"handleSelectionChange\"\r\n      @sort-change=\"handleSortChange\"\r\n      v-bind=\"$attrs\"\r\n    >\r\n      <!-- Selection Column -->\r\n      <el-table-column\r\n        v-if=\"showSelection\"\r\n        type=\"selection\"\r\n        width=\"55\"\r\n        align=\"center\"\r\n        fixed=\"left\"\r\n      />\r\n\r\n      <!-- Index Column -->\r\n      <el-table-column\r\n        v-if=\"showIndex\"\r\n        type=\"index\"\r\n        label=\"序號\"\r\n        width=\"60\"\r\n        align=\"center\"\r\n        fixed=\"left\"\r\n      />\r\n\r\n      <!-- Data Columns -->\r\n      <el-table-column\r\n        v-for=\"column in columns\"\r\n        :key=\"column.prop || column.type\"\r\n        :prop=\"column.prop\"\r\n        :label=\"column.label\"\r\n        :width=\"column.width\"\r\n        :min-width=\"column.minWidth\"\r\n        :fixed=\"column.fixed\"\r\n        :sortable=\"column.sortable\"\r\n        :align=\"column.align || 'left'\"\r\n        :header-align=\"column.headerAlign || column.align || 'center'\"\r\n        :show-overflow-tooltip=\"column.showOverflowTooltip !== false\"\r\n        :resizable=\"column.resizable !== false\"\r\n        :formatter=\"column.formatter\"\r\n      >\r\n        <template v-if=\"column.type === 'status'\" #default=\"{ row }\">\r\n          <el-tag\r\n            :type=\"getStatusType(row[column.prop!])\"\r\n            size=\"small\"\r\n          >\r\n            {{ getStatusLabel(row[column.prop!]) }}\r\n          </el-tag>\r\n        </template>\r\n        \r\n        <template v-else-if=\"column.type === 'money'\" #default=\"{ row }\">\r\n          <span class=\"money\">{{ formatMoney(row[column.prop!]) }}</span>\r\n        </template>\r\n        \r\n        <template v-else-if=\"column.type === 'date'\" #default=\"{ row }\">\r\n          {{ formatDate(row[column.prop!]) }}\r\n        </template>\r\n        \r\n        <template v-else-if=\"column.type === 'actions'\" #default=\"{ row, $index }\">\r\n          <slot name=\"actions\" :row=\"row\" :index=\"$index\">\r\n            <el-button\r\n              v-for=\"action in getVisibleActions(row)\"\r\n              :key=\"action.label\"\r\n              :type=\"action.type || 'primary'\"\r\n              :disabled=\"getActionDisabled(action, row)\"\r\n              size=\"small\"\r\n              link\r\n              @click=\"action.handler(row, $index)\"\r\n            >\r\n              <el-icon v-if=\"action.icon\">\r\n                <component :is=\"action.icon\" />\r\n              </el-icon>\r\n              {{ action.label }}\r\n            </el-button>\r\n          </slot>\r\n        </template>\r\n        \r\n        <template v-else-if=\"$slots[`column-${column.prop}`]\" #default=\"{ row, $index }\">\r\n          <slot :name=\"`column-${column.prop}`\" :row=\"row\" :index=\"$index\" />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- Pagination -->\r\n    <div v-if=\"showPagination\" class=\"table-pagination\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :total=\"total\"\r\n        :page-sizes=\"pageSizes\"\r\n        :layout=\"paginationLayout\"\r\n        :prev-text=\"'上一頁'\"\r\n        :next-text=\"'下一頁'\"\r\n        background\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      >\r\n        <template #sizes>\r\n          <el-select\r\n            :model-value=\"pageSize\"\r\n            @update:model-value=\"handleSizeChange\"\r\n            style=\"width: 100px\"\r\n            size=\"small\"\r\n          >\r\n            <el-option\r\n              v-for=\"size in pageSizes\"\r\n              :key=\"size\"\r\n              :label=\"`${size}筆/頁`\"\r\n              :value=\"size\"\r\n            />\r\n          </el-select>\r\n        </template>\r\n        <template #total>\r\n          <span class=\"pagination-total\">共 {{ total }} 筆</span>\r\n        </template>\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport { Search, Refresh, Plus, Download } from '@element-plus/icons-vue'\r\nimport type { TableColumn, TableAction, FilterBarField } from '@/types/ui'\r\nimport { STATUS_LABELS, STATUS_TYPES } from '@/types/common'\r\n\r\ninterface Props {\r\n  // Data\r\n  data?: any[]\r\n  loading?: boolean\r\n  \r\n  // Columns\r\n  columns: TableColumn[]\r\n  actions?: TableAction[]\r\n  \r\n  // Filter\r\n  showFilterBar?: boolean\r\n  filterFields?: FilterBarField[]\r\n  \r\n  // Toolbar\r\n  showToolbar?: boolean\r\n  showCreate?: boolean\r\n  showExport?: boolean\r\n  \r\n  // Table features\r\n  showSelection?: boolean\r\n  showIndex?: boolean\r\n  showSummary?: boolean\r\n  summaryMethod?: Function\r\n  tableHeight?: string | number\r\n  maxHeight?: string | number\r\n  \r\n  // Pagination\r\n  showPagination?: boolean\r\n  total?: number\r\n  pageSize?: number\r\n  pageSizes?: number[]\r\n  paginationLayout?: string\r\n  \r\n  // Initial filters\r\n  initialFilters?: Record<string, any>\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  data: () => [],\r\n  loading: false,\r\n  showFilterBar: true,\r\n  filterFields: () => [],\r\n  showToolbar: true,\r\n  showCreate: true,\r\n  showExport: false,\r\n  showSelection: false,\r\n  showIndex: false,\r\n  showSummary: false,\r\n  showPagination: true,\r\n  total: 0,\r\n  pageSize: 20,\r\n  pageSizes: () => [10, 20, 50, 100],\r\n  paginationLayout: 'total, sizes, prev, pager, next, jumper',\r\n  initialFilters: () => ({})\r\n})\r\n\r\ninterface Emits {\r\n  (e: 'search', filters: Record<string, any>): void\r\n  (e: 'reset'): void\r\n  (e: 'refresh'): void\r\n  (e: 'create'): void\r\n  (e: 'export'): void\r\n  (e: 'selection-change', selection: any[]): void\r\n  (e: 'sort-change', sort: { column: any; prop: string; order: string }): void\r\n  (e: 'page-change', page: number): void\r\n  (e: 'size-change', size: number): void\r\n}\r\n\r\nconst emit = defineEmits<Emits>()\r\n\r\n// Filter state\r\nconst filters = ref<Record<string, any>>({ ...props.initialFilters })\r\n\r\n// Pagination state\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(props.pageSize)\r\n\r\n// Methods\r\nconst handleSearch = () => {\r\n  currentPage.value = 1\r\n  emit('search', { ...filters.value })\r\n}\r\n\r\nconst handleReset = () => {\r\n  filters.value = { ...props.initialFilters }\r\n  currentPage.value = 1\r\n  emit('reset')\r\n}\r\n\r\nconst handleRefresh = () => {\r\n  emit('refresh')\r\n}\r\n\r\nconst handleSelectionChange = (selection: any[]) => {\r\n  emit('selection-change', selection)\r\n}\r\n\r\nconst handleSortChange = (sort: { column: any; prop: string; order: string }) => {\r\n  emit('sort-change', sort)\r\n}\r\n\r\nconst handleCurrentChange = (page: number) => {\r\n  currentPage.value = page\r\n  emit('page-change', page)\r\n}\r\n\r\nconst handleSizeChange = (size: number) => {\r\n  pageSize.value = size\r\n  currentPage.value = 1\r\n  emit('size-change', size)\r\n}\r\n\r\n// Status helpers\r\nconst getStatusLabel = (status: string) => {\r\n  return STATUS_LABELS[status] || status\r\n}\r\n\r\nconst getStatusType = (status: string) => {\r\n  return STATUS_TYPES[status] || ''\r\n}\r\n\r\n// Action helpers\r\nconst getVisibleActions = (row: any) => {\r\n  return props.actions?.filter(action => \r\n    !action.visible || action.visible(row)\r\n  ) || []\r\n}\r\n\r\nconst getActionDisabled = (action: TableAction, row: any) => {\r\n  return action.disabled ? action.disabled(row) : false\r\n}\r\n\r\n// Formatters\r\nconst formatMoney = (amount: number) => {\r\n  if (typeof amount !== 'number') return amount\r\n  return new Intl.NumberFormat('zh-TW', {\r\n    style: 'currency',\r\n    currency: 'TWD',\r\n    minimumFractionDigits: 0\r\n  }).format(amount)\r\n}\r\n\r\nconst formatDate = (date: string) => {\r\n  if (!date) return ''\r\n  return new Date(date).toLocaleDateString('zh-TW')\r\n}\r\n\r\n// Cell class name handler for dynamic styling\r\nconst getCellClassName = ({ row, column, columnIndex }: any) => {\r\n  // Find the column definition\r\n  const colDef = props.columns[columnIndex - (props.showSelection ? 1 : 0) - (props.showIndex ? 1 : 0)]\r\n  \r\n  if (colDef && colDef.cellClass) {\r\n    // If cellClass is a function, call it with the row\r\n    if (typeof colDef.cellClass === 'function') {\r\n      return colDef.cellClass(row)\r\n    }\r\n    // If cellClass is a string, return it directly\r\n    return colDef.cellClass\r\n  }\r\n  \r\n  return ''\r\n}\r\n\r\n// Watch for prop changes\r\nwatch(() => props.pageSize, (newSize) => {\r\n  pageSize.value = newSize\r\n})\r\n\r\n// Auto search on filter changes\r\nwatch(filters, () => {\r\n  if (props.showFilterBar) {\r\n    handleSearch()\r\n  }\r\n}, { deep: true })\r\n\r\n// Expose methods for parent components\r\ndefineExpose({\r\n  search: handleSearch,\r\n  reset: handleReset,\r\n  refresh: handleRefresh,\r\n  getCurrentFilters: () => filters.value,\r\n  getCurrentPage: () => currentPage.value,\r\n  getPageSize: () => pageSize.value\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.data-table {\r\n  .filter-bar {\r\n    background: #f8f9fa;\r\n    padding: 16px;\r\n    margin-bottom: 16px;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .table-toolbar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 16px;\r\n    \r\n    .toolbar-left, .toolbar-right {\r\n      display: flex;\r\n      gap: 8px;\r\n    }\r\n  }\r\n\r\n  .table-pagination {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .money {\r\n    font-weight: 500;\r\n    color: #409eff;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"requisition-list\">\r\n    <PageHeader\r\n      title=\"請購單列表\"\r\n      subtitle=\"管理所有請購申請\"\r\n      :show-refresh=\"true\"\r\n      @refresh=\"handleRefresh\"\r\n    >\r\n      <template #extra>\r\n        <el-button\r\n          type=\"primary\"\r\n          :icon=\"Plus\"\r\n          @click=\"createRequisition\"\r\n        >\r\n          新增請購單\r\n        </el-button>\r\n      </template>\r\n    </PageHeader>\r\n\r\n    <DataTable\r\n      :data=\"requisitions\"\r\n      :columns=\"columns\"\r\n      :actions=\"actions\"\r\n      :loading=\"loading\"\r\n      :show-pagination=\"true\"\r\n      :total=\"pagination.total\"\r\n      :page-size=\"pagination.page_size\"\r\n      :filter-fields=\"filterFields\"\r\n      :initial-filters=\"getInitialFilters()\"\r\n      :row-class-name=\"getRowClassName\"\r\n      @search=\"handleSearch\"\r\n      @page-change=\"handlePageChange\"\r\n      @size-change=\"handleSizeChange\"\r\n    />\r\n\r\n    <!-- Review Dialog -->\r\n    <el-dialog\r\n      v-model=\"reviewDialogVisible\"\r\n      title=\"審核請購單\"\r\n      width=\"95vw\"\r\n      style=\"max-width: 1400px\"\r\n      destroy-on-close\r\n    >\r\n      <RequisitionReview\r\n        v-if=\"currentRequisition\"\r\n        :requisition=\"currentRequisition\"\r\n        @close=\"handleCloseReview\"\r\n        @updated=\"handleRequisitionUpdated\"\r\n      />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, computed, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Plus, View, Edit, Delete } from '@element-plus/icons-vue'\r\nimport { DataTable, PageHeader } from '@/components'\r\nimport RequisitionReview from './Review.vue'\r\nimport { useRequisitionStore, useAuthStore } from '@/stores'\r\nimport { requisitionApi } from '@/api/requisition'\r\nimport type { TableColumn, TableAction, FilterBarField } from '@/types/ui'\r\nimport type { RequestOrder } from '@/types/common'\r\n\r\nconst router = useRouter()\r\nconst requisitionStore = useRequisitionStore()\r\nconst authStore = useAuthStore()\r\n\r\n// Computed\r\nconst userRole = computed(() => authStore.userRole)\r\n\r\n// State\r\nconst loading = ref(false)\r\nconst reviewDialogVisible = ref(false)\r\nconst currentRequisition = ref<RequestOrder | null>(null)\r\n\r\n// Data\r\nconst requisitions = computed(() => requisitionStore.requisitions)\r\nconst pagination = computed(() => requisitionStore.pagination)\r\nconst permissions = computed(() => requisitionStore.permissions)\r\n\r\n// Table configuration\r\nconst columns: TableColumn[] = [\r\n  {\r\n    prop: 'request_order_no',\r\n    label: '請購單號',\r\n    width: '160px',\r\n    fixed: 'left'\r\n  },\r\n  {\r\n    prop: 'is_urgent',\r\n    label: '加急',\r\n    width: '70px',\r\n    align: 'center',\r\n    formatter: (row) => row.is_urgent ? '加急' : '',\r\n    cellClass: (row) => row.is_urgent ? 'urgent-cell' : ''\r\n  },\r\n  {\r\n    prop: 'requester_name',\r\n    label: '申請人',\r\n    width: '120px'\r\n  },\r\n  {\r\n    prop: 'usage_type',\r\n    label: '用途類型',\r\n    width: '100px',\r\n    formatter: (row) => row.usage_type === 'daily' ? '日常' : '專案'\r\n  },\r\n  {\r\n    prop: 'project_id',\r\n    label: '專案編號',\r\n    width: '120px',\r\n    showOverflowTooltip: true\r\n  },\r\n  {\r\n    prop: 'submit_date',\r\n    label: '提交日期',\r\n    width: '120px',\r\n    type: 'date'\r\n  },\r\n  {\r\n    prop: 'order_status',\r\n    label: '狀態',\r\n    width: '100px',\r\n    type: 'status'\r\n  },\r\n  {\r\n    prop: 'summary.total_items',\r\n    label: '總項目數',\r\n    width: '100px',\r\n    align: 'center'\r\n  },\r\n  {\r\n    prop: 'summary.approved_items',\r\n    label: '已核准',\r\n    width: '80px',\r\n    align: 'center',\r\n    formatter: (row) => row.summary?.approved_items || 0\r\n  },\r\n  {\r\n    prop: 'summary.rejected_items',\r\n    label: '已駁回',\r\n    width: '80px',\r\n    align: 'center',\r\n    formatter: (row) => row.summary?.rejected_items || 0,\r\n    cellClass: (row) => (row.summary?.rejected_items || 0) > 0 ? 'rejected-cell' : ''\r\n  },\r\n  {\r\n    prop: 'summary.questioned_items',\r\n    label: '有疑問',\r\n    width: '80px',\r\n    align: 'center',\r\n    formatter: (row) => row.summary?.questioned_items || 0,\r\n    cellClass: (row) => (row.summary?.questioned_items || 0) > 0 ? 'questioned-cell' : ''\r\n  },\r\n  {\r\n    prop: 'created_at',\r\n    label: '創建時間',\r\n    width: '160px',\r\n    type: 'date'\r\n  },\r\n  {\r\n    type: 'actions',\r\n    label: '操作',\r\n    width: '200px',\r\n    fixed: 'right'\r\n  }\r\n]\r\n\r\nconst actions: TableAction[] = [\r\n  {\r\n    label: '查看',\r\n    type: 'primary',\r\n    icon: 'View',\r\n    handler: (row) => viewRequisition(row.request_order_no)\r\n  },\r\n  {\r\n    label: '編輯',\r\n    type: 'primary',\r\n    icon: 'Edit',\r\n    handler: (row) => editRequisition(row.request_order_no),\r\n    visible: (row) => row.order_status === 'draft' && canEdit(row)\r\n  },\r\n  {\r\n    label: '審核',\r\n    type: 'warning',\r\n    icon: 'DocumentChecked',\r\n    handler: (row) => reviewRequisition(row),\r\n    visible: (row) => row.order_status === 'submitted' && canReview()\r\n  },\r\n  {\r\n    label: '刪除',\r\n    type: 'danger',\r\n    icon: 'Delete',\r\n    handler: (row) => deleteRequisition(row.request_order_no),\r\n    visible: (row) => row.order_status === 'draft' && canDelete(row)\r\n  },\r\n  {\r\n    label: '撤銷',\r\n    type: 'danger',\r\n    icon: 'Delete',\r\n    handler: (row) => withdrawRequisition(row.request_order_no),\r\n    visible: (row) => row.order_status === 'submitted' && canWithdraw(row)\r\n  }\r\n]\r\n\r\nconst filterFields = computed<FilterBarField[]>(() => [\r\n  ...(permissions.value.can_view_all ? [{\r\n    prop: 'mine',\r\n    label: '範圍',\r\n    type: 'select',\r\n    options: [\r\n      { label: '我的請購單', value: true },\r\n      { label: '所有請購單', value: false }\r\n    ],\r\n    clearable: false\r\n  }] : []),\r\n  {\r\n    prop: 'status',\r\n    label: '狀態',\r\n    type: 'select',\r\n    options: [\r\n      { label: '草稿', value: 'draft' },\r\n      { label: '已提交', value: 'submitted' },\r\n      { label: '已審核', value: 'reviewed' },\r\n      { label: '已撤銷', value: 'cancelled' }\r\n    ]\r\n  },\r\n  {\r\n    prop: 'usage_type',\r\n    label: '用途類型',\r\n    type: 'select',\r\n    options: [\r\n      { label: '日常', value: 'daily' },\r\n      { label: '專案', value: 'project' }\r\n    ]\r\n  },\r\n  {\r\n    prop: 'project_id',\r\n    label: '專案編號',\r\n    type: 'input',\r\n    placeholder: '請輸入專案編號'\r\n  },\r\n  {\r\n    prop: 'submit_date_range',\r\n    label: '提交日期',\r\n    type: 'daterange'\r\n  }\r\n])\r\n\r\n// Permission helpers\r\nconst canEdit = (row: RequestOrder) => {\r\n  return authStore.hasRole('Admin') || \r\n         (authStore.user?.user_id === row.requester_id)\r\n}\r\n\r\nconst canDelete = (row: RequestOrder) => {\r\n  return authStore.hasRole('Admin') || \r\n         (authStore.user?.user_id === row.requester_id)\r\n}\r\n\r\nconst canWithdraw = (row: RequestOrder) => {\r\n  // Only procurement managers and admins can withdraw submitted/reviewed requisitions\r\n  return authStore.hasRole('ProcurementMgr', 'Admin')\r\n}\r\n\r\nconst canReview = () => {\r\n  return authStore.hasRole('Admin', 'ProcurementMgr', 'Procurement')\r\n}\r\n\r\n// 設定加急列的樣式\r\nconst getRowClassName = (params: { row: RequestOrder }) => {\r\n  if (params.row.is_urgent) {\r\n    return 'urgent-row'\r\n  }\r\n  return ''\r\n}\r\n\r\nconst getInitialFilters = () => {\r\n  // For non-privileged users, don't show the 'mine' filter since they can only see their own\r\n  if (!permissions.value.can_view_all) {\r\n    return {}\r\n  }\r\n  // For privileged users, default to showing all requisitions\r\n  return { mine: false }\r\n}\r\n\r\n// Event handlers\r\nconst handleSearch = (filters: any) => {\r\n  fetchRequisitions(filters)\r\n}\r\n\r\nconst handleRefresh = () => {\r\n  fetchRequisitions()\r\n}\r\n\r\nconst handlePageChange = (page: number) => {\r\n  fetchRequisitions({ page })\r\n}\r\n\r\nconst handleSizeChange = (size: number) => {\r\n  fetchRequisitions({ page: 1, page_size: size })\r\n}\r\n\r\nconst handleCloseReview = () => {\r\n  reviewDialogVisible.value = false\r\n  currentRequisition.value = null\r\n}\r\n\r\nconst handleRequisitionUpdated = () => {\r\n  handleCloseReview()\r\n  fetchRequisitions()\r\n  ElMessage.success('請購單審核完成')\r\n}\r\n\r\n// Actions\r\nconst fetchRequisitions = async (params?: any) => {\r\n  try {\r\n    loading.value = true\r\n    await requisitionStore.fetchRequisitions(params)\r\n  } catch (error) {\r\n    console.error('Failed to fetch requisitions:', error)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst createRequisition = () => {\r\n  router.push('/requisitions/create')\r\n}\r\n\r\nconst viewRequisition = (id: string) => {\r\n  router.push(`/requisitions/${id}`)\r\n}\r\n\r\nconst editRequisition = (id: string) => {\r\n  router.push(`/requisitions/${id}/edit`)\r\n}\r\n\r\nconst reviewRequisition = async (requisition: RequestOrder) => {\r\n  try {\r\n    const fullRequisition = await requisitionStore.fetchRequisitionDetail(requisition.request_order_no)\r\n    currentRequisition.value = fullRequisition\r\n    reviewDialogVisible.value = true\r\n  } catch (error) {\r\n    ElMessage.error('獲取請購單詳情失敗')\r\n  }\r\n}\r\n\r\nconst deleteRequisition = async (id: string) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      '確定要刪除這個請購單嗎？',\r\n      '刪除確認',\r\n      {\r\n        confirmButtonText: '刪除',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }\r\n    )\r\n    \r\n    const response = await requisitionApi.cancelRequisition(id, {\r\n      reason: '管理員刪除草稿請購單'\r\n    })\r\n    \r\n    if (response.success) {\r\n      ElMessage.success('請購單已刪除')\r\n      fetchRequisitions()\r\n    } else {\r\n      ElMessage.error(response.message || '刪除失敗')\r\n    }\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error('刪除請購單失敗:', error)\r\n      ElMessage.error('刪除失敗')\r\n    }\r\n  }\r\n}\r\n\r\nconst withdrawRequisition = async (id: string) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      '是否確定要撤銷該張請購單？',\r\n      '確認撤銷',\r\n      {\r\n        confirmButtonText: '確定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }\r\n    )\r\n    \r\n    const response = await requisitionApi.cancelRequisition(id, {\r\n      reason: '管理員撤銷請購單'\r\n    })\r\n    \r\n    if (response.success) {\r\n      ElMessage.success('請購單已撤銷')\r\n      fetchRequisitions()\r\n    } else {\r\n      ElMessage.error(response.message || '撤銷失敗')\r\n    }\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error('撤銷請購單失敗:', error)\r\n      ElMessage.error('撤銷請購單失敗')\r\n    }\r\n  }\r\n}\r\n\r\n// Lifecycle\r\nonMounted(() => {\r\n  // For privileged users, explicitly show all requisitions on initial load\r\n  const initialFilters = getInitialFilters()\r\n  fetchRequisitions(initialFilters)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.requisition-list {\r\n  .el-dialog {\r\n    .el-dialog__body {\r\n      padding: 0;\r\n    }\r\n  }\r\n}\r\n\r\n/* Visual alerts for rejected and questioned items */\r\n:deep(.rejected-cell) {\r\n  background-color: #fef0f0 !important;\r\n  color: #f56c6c !important;\r\n  font-weight: 600 !important;\r\n}\r\n\r\n:deep(.questioned-cell) {\r\n  background-color: #fdf6ec !important;\r\n  color: #e6a23c !important;\r\n  font-weight: 600 !important;\r\n}\r\n\r\n/* 加急項目樣式 */\r\n:deep(.urgent-row) {\r\n  background-color: #fff2f0 !important;\r\n}\r\n\r\n:deep(.urgent-row:hover) {\r\n  background-color: #ffe7e6 !important;\r\n}\r\n\r\n:deep(.urgent-cell) {\r\n  color: #cf1322;\r\n  font-weight: 600;\r\n}\r\n\r\n/* 加急標籤樣式 */\r\n:deep(.el-table .urgent-row td:nth-child(3)) {\r\n  color: #cf1322;\r\n  font-weight: bold;\r\n}\r\n\r\n/* Dark mode support */\r\n.dark {\r\n  :deep(.rejected-cell) {\r\n    background-color: #2d1b1b !important;\r\n    color: #f56c6c !important;\r\n  }\r\n\r\n  :deep(.questioned-cell) {\r\n    background-color: #2b2416 !important;\r\n    color: #e6a23c !important;\r\n  }\r\n\r\n  :deep(.urgent-row) {\r\n    background-color: #2d1b1b !important;\r\n  }\r\n\r\n  :deep(.urgent-row:hover) {\r\n    background-color: #3d1b1b !important;\r\n  }\r\n}\r\n</style>"],"names":["props","__props","emit","__emit","filters","ref","currentPage","pageSize","handleSearch","handleReset","handleRefresh","handleSelectionChange","selection","handleSortChange","sort","handleCurrentChange","page","handleSizeChange","size","getStatusLabel","status","STATUS_LABELS","getStatusType","STATUS_TYPES","getVisibleActions","row","_a","action","getActionDisabled","formatMoney","amount","formatDate","date","getCellClassName","column","columnIndex","colDef","watch","newSize","__expose","_openBlock","_createElementBlock","_hoisted_1","_ctx","_hoisted_2","_createVNode","_component_el_form","_withModifiers","_Fragment","_renderList","field","_createBlock","_component_el_input","$event","_component_el_select","option","_component_el_date_picker","_createCommentVNode","_withCtx","_component_el_button","_component_el_icon","_unref","Search","Refresh","_createElementVNode","_hoisted_4","_renderSlot","_cache","Plus","Download","_component_el_table_column","_createSlots","_component_el_tag","_createTextVNode","_toDisplayString","_hoisted_6","$index","_resolveDynamicComponent","_component_el_pagination","_hoisted_8","router","useRouter","requisitionStore","useRequisitionStore","authStore","useAuthStore","computed","loading","reviewDialogVisible","currentRequisition","requisitions","pagination","permissions","columns","actions","viewRequisition","editRequisition","canEdit","reviewRequisition","canReview","deleteRequisition","canDelete","withdrawRequisition","canWithdraw","filterFields","getRowClassName","params","getInitialFilters","fetchRequisitions","handlePageChange","handleCloseReview","handleRequisitionUpdated","ElMessage","error","createRequisition","id","requisition","fullRequisition","ElMessageBox","response","requisitionApi","onMounted","initialFilters","PageHeader","RequisitionReview"],"mappings":"k7FAsRA,MAAAA,EAAAC,GA+BAC,EAAAC,EAGAC,EAAAC,EAAA,CAAA,GAAAL,EAAA,cAAA,CAAA,EAGAM,EAAAD,EAAA,CAAA,EACAE,EAAAF,EAAAL,EAAA,QAAA,EAGAQ,EAAA,IAAA,CACEF,EAAA,MAAA,EACAJ,EAAA,SAAA,CAAA,GAAAE,EAAA,KAAA,CAAA,CAAmC,EAGrCK,EAAA,IAAA,CACEL,EAAA,MAAA,CAAA,GAAAJ,EAAA,cAAA,EACAM,EAAA,MAAA,EACAJ,EAAA,OAAA,CAAY,EAGdQ,EAAA,IAAA,CACER,EAAA,SAAA,CAAc,EAGhBS,EAAAC,GAAA,CACEV,EAAA,mBAAAU,CAAA,CAAkC,EAGpCC,EAAAC,GAAA,CACEZ,EAAA,cAAAY,CAAA,CAAwB,EAG1BC,EAAAC,GAAA,CACEV,EAAA,MAAAU,EACAd,EAAA,cAAAc,CAAA,CAAwB,EAG1BC,EAAAC,GAAA,CACEX,EAAA,MAAAW,EACAZ,EAAA,MAAA,EACAJ,EAAA,cAAAgB,CAAA,CAAwB,EAI1BC,EAAAC,GACEC,GAAAD,CAAA,GAAAA,EAGFE,EAAAF,GACEG,GAAAH,CAAA,GAAA,GAIFI,EAAAC,GAAA,OACE,QAAAC,EAAA1B,EAAA,UAAA,YAAA0B,EAAA,OAAsBC,GAAA,CAAAA,EAAA,SAAAA,EAAA,QAAAF,CAAA,KACiB,EACjC,EAGRG,EAAA,CAAAD,EAAAF,IACEE,EAAA,SAAAA,EAAA,SAAAF,CAAA,EAAA,GAIFI,EAAAC,GACE,OAAAA,GAAA,SAAgCA,EAChC,IAAA,KAAA,aAAA,QAAA,CAAsC,MAAA,WAC7B,SAAA,MACG,sBAAA,CACa,CAAA,EAAA,OAAAA,CAAA,EAI3BC,EAAAC,GACEA,EACA,IAAA,KAAAA,CAAA,EAAA,mBAAA,OAAA,EADW,GAKbC,EAAA,CAAA,CAAA,IAAAR,EAAA,OAAAS,EAAA,YAAAC,CAAA,IAAA,CAEE,MAAAC,EAAApC,EAAA,QAAAmC,GAAAnC,EAAA,cAAA,EAAA,IAAAA,EAAA,UAAA,EAAA,EAAA,EAEA,OAAAoC,GAAAA,EAAA,UAEE,OAAAA,EAAA,WAAA,WACEA,EAAA,UAAAX,CAAA,EAGFW,EAAA,UAGF,EAAO,EAIT,OAAAC,GAAA,IAAArC,EAAA,SAAAsC,GAAA,CACE/B,EAAA,MAAA+B,CAAiB,CAAA,EAInBD,GAAAjC,EAAA,IAAA,CACEJ,EAAA,eACEQ,GACF,EAAA,CAAA,KAAA,EAAA,CAAA,EAIF+B,EAAA,CAAa,OAAA/B,EACH,MAAAC,EACD,QAAAC,EACE,kBAAA,IAAAN,EAAA,MACwB,eAAA,IAAAE,EAAA,MACC,YAAA,IAAAC,EAAA,KACN,CAAA,6EAva5B,OAAAiC,EAAA,EAAAC,EAAA,MAAAC,GAAA,CAuOMC,EAAA,eAAAH,EAAA,EAAAC,EAAA,MAAAG,GAAA,CAjKEC,EAAAC,EAAA,CADM,MAAA1C,EAAA,MAjEO,OAAA,GACN,SAAA2C,GAAAvC,EAAA,CAAA,SAAA,CAAA,CACoB,EAAA,iBAGEgC,EAAA,EAAA,EAAAC,EAAAO,EAAA,KAAAC,EAAAN,EAAA,aAAAO,aAgDhB,IAAAA,EAAA,KA/CD,MAAAA,EAAA,KACE,EAAA,gBAQZA,EAAA,OAAA,SAAAV,EAAA,EAAAW,EAAAC,EAAA,CAAA,IAAA,6BAJ2B,sBAAAC,GAAAjD,EAAA,MAAA8C,EAAA,IAAA,EAAAG,EAAA,YAAAH,EAAA,YACP,UAAAA,EAAA,YAAA,GACO,MAAA,CAAA,MAAA,OAAA,CACP,EAAA,KAAA,EAAA,CAAA,aAAA,sBAAA,cAAA,WAAA,CAAA,GAAAA,EAAA,OAAA,UAAAV,EAAA,EAAAW,EAAAG,EAAA,CAkBV,IAAA,6BAdiB,sBAAAD,GAAAjD,EAAA,MAAA8C,EAAA,IAAA,EAAAG,EAAA,YAAAH,EAAA,YACP,UAAAA,EAAA,YAAA,GACO,WAAAA,EAAA,WACR,SAAAA,EAAA,SACF,MAAA,CAAA,MAAA,OAAA,CACG,EAAA,iBAGaV,EAAA,EAAA,EAAAC,EAAAO,EAAA,KAAAC,EAAAC,EAAA,QAAAK,aAK/B,IAAAA,EAAA,MAJa,MAAAA,EAAA,MACE,MAAAA,EAAA,MACA,SAAAA,EAAA,QACG,EAAA,KAAA,EAAA,CAAA,QAAA,QAAA,UAAA,CAAA,yIAWpB,IAAA,6BAN2B,sBAAAF,GAAAjD,EAAA,MAAA8C,EAAA,IAAA,EAAAG,EAAA,KAAA,OACtB,YAAAH,EAAA,YACe,OAAAA,EAAA,QAAA,aACC,eAAAA,EAAA,aAAA,aACW,MAAA,CAAA,MAAA,OAAA,CACZ,EAAA,KAAA,EAAA,CAAA,aAAA,sBAAA,cAAA,SAAA,cAAA,CAAA,GAAAA,EAAA,OAAA,aAAAV,EAAA,EAAAW,EAAAK,EAAA,CAYpB,IAAA,6BAR2B,sBAAAH,GAAAjD,EAAA,MAAA8C,EAAA,IAAA,EAAAG,EAAA,KAAA,YACtB,kBAAA,IACW,oBAAA,OACE,kBAAA,OACF,OAAAH,EAAA,QAAA,aACK,eAAAA,EAAA,aAAA,aACW,MAAA,CAAA,MAAA,OAAA,CACZ,EAAA,KAAA,EAAA,CAAA,aAAA,sBAAA,SAAA,cAAA,CAAA,GAAAO,EAAA,GAAA,EAAA,2CAaT,QAAAC,EAAA,IAAA,CALDb,EAAAc,EAAA,CAAA,KAAA,UAHI,QAAAnD,CAAkB,EAAA,gBACHqC,EAAAe,EAAA,KAAA,CAAA,QAAAF,EAAA,IAAA,CAAVb,EAAAgB,EAAAC,EAAA,CAAA,CAAA,CAAA,iCAErB,CAAA,yBAC8B,QAAAJ,EAAA,IAAA,CACEb,EAAAe,EAAA,KAAA,CAAA,QAAAF,EAAA,IAAA,CAAVb,EAAAgB,EAAAE,EAAA,CAAA,CAAA,CAAA,iCAEtB,CAAA,+EAoCAC,EAAA,MAAAC,GAAA,CAlBEC,EAAAvB,EAAA,OAAA,eAAA,CAAA,EAAA,IAAA,CADGA,EAAA,YAAAH,IAAAW,EAAAQ,EAAA,CADO,IAAA,iBALL,QAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAd,GAAAV,EAAA,MAAA,QAAA,EACQ,EAAA,gBAEcE,EAAAe,EAAA,KAAA,CAAA,QAAAF,EAAA,IAAA,CAAVb,EAAAgB,EAAAO,EAAA,CAAA,CAAA,CAAA,iCAEnB,CAAA,qCAmBEF,EAAAvB,EAAA,OAAA,gBAAA,CAAA,EAAA,IAAA,CADGA,EAAA,YAAAH,IAAAW,EAAAQ,EAAA,CAPO,IAAA,2CAJG,EAAA,gBAEkBd,EAAAe,EAAA,KAAA,CAAA,QAAAF,EAAA,IAAA,CAAVb,EAAAgB,EAAAQ,EAAA,CAAA,CAAA,CAAA,iCAEvB,CAAA,mCAEuB,QAAAX,EAAA,IAAA,CAESb,EAAAe,EAAA,KAAA,CAAA,QAAAF,EAAA,IAAA,CAAVb,EAAAgB,EAAAE,EAAA,CAAA,CAAA,CAAA,iCAEtB,CAAA,mCA+FK,KAAApB,EAAA,KAxFE,QAAAA,EAAA,QACM,OAAA,GACjB,OAAA,GACA,OAAAA,EAAA,YACoB,aAAAA,EAAA,UACE,eAAAA,EAAA,YACI,iBAAAA,EAAA,cACI,kBAAAV,EACZ,kBAAAtB,EACC,aAAAE,CACL,EAAA8B,EAAA,MAAA,EAAA,CACA,QAAAe,EAAA,IAAA,CASZf,EAAA,eAAAH,IAAAW,EAAAmB,EAAA,CAAA,IAAA,mBAJK,MAAA,KACC,MAAA,SACA,MAAA,MACA,CAAA,GAAAb,EAAA,GAAA,EAAA,wBAWN,IAAA,eALK,MAAA,KACC,MAAA,KACA,MAAA,SACA,MAAA,MACA,CAAA,GAAAA,EAAA,GAAA,EAAA,2CA0DU,IAAAvB,EAAA,MAAAA,EAAA,KApDY,KAAAA,EAAA,KACd,MAAAA,EAAA,MACC,MAAAA,EAAA,MACA,YAAAA,EAAA,SACI,MAAAA,EAAA,MACJ,SAAAA,EAAA,SACG,MAAAA,EAAA,OAAA,OACE,eAAAA,EAAA,aAAAA,EAAA,OAAA,SAC6B,wBAAAA,EAAA,sBAAA,GACC,UAAAA,EAAA,YAAA,GACtB,UAAAA,EAAA,SACT,EAAAqC,GAAA,CAAA,EAAA,GAAA,mCAEwB,GAAAb,EAAA,CAAA,CAAA,IAAAjC,KAAA,CAAcoB,EAAA2B,EAAA,CAM9C,KAAAlD,EAAAG,EAAAS,EAAA,IAAA,CAAA,EAJ6B,KAAA,OAC/B,EAAA,gBAEkCuC,EAAAC,EAAAvD,EAAAM,EAAAS,EAAA,IAAA,CAAA,CAAA,EAAA,CAAA,CAAN,CAAA,kEAIU,GAAAwB,EAAA,CAAA,CAAA,IAAAjC,KAAA,CAAcuC,EAAA,OAAAW,GAAAD,EAAA7C,EAAAJ,EAAAS,EAAA,IAAA,CAAA,CAAA,EAAA,CAAA,CACT,CAAA,2CAGN,GAAAwB,EAAA,CAAA,CAAA,IAAAjC,KAAA,CAAcgD,EAAAC,EAAA3C,EAAAN,EAAAS,EAAA,IAAA,CAAA,CAAA,EAAA,CAAA,CAC7B,CAAA,8CAGkB,GAAAwB,EAAA,CAAA,CAAA,IAAAjC,EAAA,OAAAmD,CAAA,IAAA,CAAsBV,EAAAvB,EAAA,OAAA,UAAA,CAgB9D,IAAAlB,EAfe,MAAAmD,CAAkB,EAAA,IAAA,EAejCpC,EAAA,EAAA,EAAAC,EAAAO,EAAA,KAAAC,EAAAzB,EAAAC,CAAA,EAAAE,aADO,IAAAA,EAAA,MAXG,KAAAA,EAAA,MAAA,UACK,SAAAC,EAAAD,EAAAF,CAAA,EACsB,KAAA,QACnC,KAAA,GACL,QAAA4B,IAAA1B,EAAA,QAAAF,EAAAmD,CAAA,CACkC,EAAA,gBAIxBjD,EAAA,MAAAa,IAAAW,EAAAS,EAAA,CAAA,IAAA,GAAA,CAAA,QAAAF,EAAA,IAAA,EADuBlB,EAAA,EAAAW,EAAA0B,GAAAlD,EAAA,IAAA,CAAA,EAAJ,CAAA,0CAEd,CAAA,gHAKkC,GAAA+B,EAAA,CAAA,CAAA,IAAAjC,EAAA,OAAAmD,CAAA,IAAA,CAAsBV,EAAAvB,EAAA,OAAA,UAAAT,EAAA,IAAA,GAAA,CACzC,IAAAT,EAAK,MAAAmD,CAAkB,EAAA,OAAA,EAAA,yRAsCzD/B,EAAAiC,GAAA,CADY,eAAAxE,EAAA,MA7BmB,uBAAA6D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAd,GAAA/C,EAAA,MAAA+C,GAAA,YAAA9C,EAAA,MACN,oBAAA4D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAd,GAAA9C,EAAA,MAAA8C,GAAA,MAAAV,EAAA,MACd,aAAAA,EAAA,UACS,OAAAA,EAAA,iBACG,YAAA,MACb,YAAA,MACA,WAAA,GACZ,aAAA1B,EACc,gBAAAF,CACG,EAAA,cAeH8B,EAAAS,EAAA,CAAA,cAAA/C,EAAA,MAXY,sBAAAU,EACD,MAAA,CAAA,MAAA,OAAA,EACD,KAAA,OACf,EAAA,iBAGsBuB,EAAA,EAAA,EAAAC,EAAAO,EAAA,KAAAC,EAAAN,EAAA,UAAAzB,aAIzB,IAAAA,EAHM,MAAA,GAAAA,CAAA,MACS,MAAAA,CACP,EAAA,KAAA,EAAA,CAAA,QAAA,OAAA,CAAA,mDAKyC8C,EAAA,OAAAe,GAAA,KAAAL,EAAA/B,EAAA,KAAA,EAAA,KAAA,CAAA,CAAP,CAAA,8RCnKxD,MAAAqC,EAAAC,KACAC,EAAAC,KACAC,EAAAC,KAGAC,EAAA,IAAAF,EAAA,QAAA,EAGA,MAAAG,EAAAlF,EAAA,EAAA,EACAmF,EAAAnF,EAAA,EAAA,EACAoF,EAAApF,EAAA,IAAA,EAGAqF,EAAAJ,EAAA,IAAAJ,EAAA,YAAA,EACAS,EAAAL,EAAA,IAAAJ,EAAA,UAAA,EACAU,EAAAN,EAAA,IAAAJ,EAAA,WAAA,EAGAW,EAAA,CAA+B,CAC7B,KAAA,mBACQ,MAAA,OACC,MAAA,QACA,MAAA,MACA,EACT,CACA,KAAA,YACQ,MAAA,KACC,MAAA,OACA,MAAA,SACA,UAAApE,GAAAA,EAAA,UAAA,KAAA,GACoC,UAAAA,GAAAA,EAAA,UAAA,cAAA,EACS,EACtD,CACA,KAAA,iBACQ,MAAA,MACC,MAAA,OACA,EACT,CACA,KAAA,aACQ,MAAA,OACC,MAAA,QACA,UAAAA,GAAAA,EAAA,aAAA,QAAA,KAAA,IACiD,EAC1D,CACA,KAAA,aACQ,MAAA,OACC,MAAA,QACA,oBAAA,EACc,EACvB,CACA,KAAA,cACQ,MAAA,OACC,MAAA,QACA,KAAA,MACD,EACR,CACA,KAAA,eACQ,MAAA,KACC,MAAA,QACA,KAAA,QACD,EACR,CACA,KAAA,sBACQ,MAAA,OACC,MAAA,QACA,MAAA,QACA,EACT,CACA,KAAA,yBACQ,MAAA,MACC,MAAA,OACA,MAAA,SACA,UAAAA,GAAA,OAAA,QAAAC,EAAAD,EAAA,UAAA,YAAAC,EAAA,iBAAA,EAC4C,EACrD,CACA,KAAA,yBACQ,MAAA,MACC,MAAA,OACA,MAAA,SACA,UAAAD,GAAA,OAAA,QAAAC,EAAAD,EAAA,UAAA,YAAAC,EAAA,iBAAA,GAC4C,UAAAD,GAAA,OAAA,SAAAC,EAAAD,EAAA,UAAA,YAAAC,EAAA,iBAAA,GAAA,EAAA,gBAAA,GAC4B,EACjF,CACA,KAAA,2BACQ,MAAA,MACC,MAAA,OACA,MAAA,SACA,UAAAD,GAAA,OAAA,QAAAC,EAAAD,EAAA,UAAA,YAAAC,EAAA,mBAAA,GAC8C,UAAAD,GAAA,OAAA,SAAAC,EAAAD,EAAA,UAAA,YAAAC,EAAA,mBAAA,GAAA,EAAA,kBAAA,GAC8B,EACrF,CACA,KAAA,aACQ,MAAA,OACC,MAAA,QACA,KAAA,MACD,EACR,CACA,KAAA,UACQ,MAAA,KACC,MAAA,QACA,MAAA,OACA,CACT,EAGFoE,EAAA,CAA+B,CAC7B,MAAA,KACS,KAAA,UACD,KAAA,OACA,QAAArE,GAAAsE,EAAAtE,EAAA,gBAAA,CACgD,EACxD,CACA,MAAA,KACS,KAAA,UACD,KAAA,OACA,QAAAA,GAAAuE,EAAAvE,EAAA,gBAAA,EACgD,QAAAA,GAAAA,EAAA,eAAA,SAAAwE,EAAAxE,CAAA,CACO,EAC/D,CACA,MAAA,KACS,KAAA,UACD,KAAA,kBACA,QAAAA,GAAAyE,EAAAzE,CAAA,EACiC,QAAAA,GAAAA,EAAA,eAAA,aAAA0E,EAAA,CACyB,EAClE,CACA,MAAA,KACS,KAAA,SACD,KAAA,SACA,QAAA1E,GAAA2E,EAAA3E,EAAA,gBAAA,EACkD,QAAAA,GAAAA,EAAA,eAAA,SAAA4E,EAAA5E,CAAA,CACO,EACjE,CACA,MAAA,KACS,KAAA,SACD,KAAA,SACA,QAAAA,GAAA6E,EAAA7E,EAAA,gBAAA,EACoD,QAAAA,GAAAA,EAAA,eAAA,aAAA8E,EAAA,CACW,CACvE,EAGFC,EAAAlB,EAAA,IAAA,CAAsD,GAAAM,EAAA,MAAA,aAAA,CAAA,CACd,KAAA,OAC9B,MAAA,KACC,KAAA,SACD,QAAA,CACG,CAAA,MAAA,QAAA,MAAA,EAAA,EACuB,CAAA,MAAA,QAAA,MAAA,EAAA,CACC,EACjC,UAAA,EACW,CAAA,EAAA,CAAA,EACP,CACN,KAAA,SACQ,MAAA,KACC,KAAA,SACD,QAAA,CACG,CAAA,MAAA,KAAA,MAAA,OAAA,EACuB,CAAA,MAAA,MAAA,MAAA,WAAA,EACK,CAAA,MAAA,MAAA,MAAA,UAAA,EACD,CAAA,MAAA,MAAA,MAAA,WAAA,CACC,CACrC,EACF,CACA,KAAA,aACQ,MAAA,OACC,KAAA,SACD,QAAA,CACG,CAAA,MAAA,KAAA,MAAA,OAAA,EACuB,CAAA,MAAA,KAAA,MAAA,SAAA,CACE,CAClC,EACF,CACA,KAAA,aACQ,MAAA,OACC,KAAA,QACD,YAAA,SACO,EACf,CACA,KAAA,oBACQ,MAAA,OACC,KAAA,WACD,CACR,CAAA,EAIFK,EAAAxE,GAAA,OACE,OAAA2D,EAAA,QAAA,OAAA,KAAA1D,EAAA0D,EAAA,OAAA,YAAA1D,EAAA,WAAAD,EAAA,YACwC,EAG1C4E,EAAA5E,GAAA,OACE,OAAA2D,EAAA,QAAA,OAAA,KAAA1D,EAAA0D,EAAA,OAAA,YAAA1D,EAAA,WAAAD,EAAA,YACwC,EAG1C8E,EAAA9E,GAEE2D,EAAA,QAAA,iBAAA,OAAA,EAGFe,EAAA,IACEf,EAAA,QAAA,QAAA,iBAAA,aAAA,EAIFqB,EAAAC,GACEA,EAAA,IAAA,UACE,aAEF,GAGFC,EAAA,IAEEf,EAAA,MAAA,aAIA,CAAA,KAAA,IAHE,GAOJpF,EAAAJ,GAAA,CACEwG,EAAAxG,CAAA,CAAyB,EAG3BM,EAAA,IAAA,CACEkG,GAAkB,EAGpBC,EAAA7F,GAAA,CACE4F,EAAA,CAAA,KAAA5F,CAAA,CAAA,CAA0B,EAG5BC,EAAAC,GAAA,CACE0F,EAAA,CAAA,KAAA,EAAA,UAAA1F,CAAA,CAAA,CAA8C,EAGhD4F,EAAA,IAAA,CACEtB,EAAA,MAAA,GACAC,EAAA,MAAA,IAA2B,EAG7BsB,EAAA,IAAA,CACED,IACAF,IACAI,EAAA,QAAA,SAAA,CAA2B,EAI7BJ,EAAA,MAAAF,GAAA,CACE,GAAA,CACEnB,EAAA,MAAA,GACA,MAAAL,EAAA,kBAAAwB,CAAA,CAA+C,OAAAO,EAAA,CAE/C,QAAA,MAAA,gCAAAA,CAAA,CAAoD,QAAA,CAEpD1B,EAAA,MAAA,EAAgB,CAClB,EAGF2B,EAAA,IAAA,CACElC,EAAA,KAAA,sBAAA,CAAkC,EAGpCe,EAAAoB,GAAA,CACEnC,EAAA,KAAA,iBAAAmC,CAAA,EAAA,CAAiC,EAGnCnB,EAAAmB,GAAA,CACEnC,EAAA,KAAA,iBAAAmC,CAAA,OAAA,CAAsC,EAGxCjB,EAAA,MAAAkB,GAAA,CACE,GAAA,CACE,MAAAC,EAAA,MAAAnC,EAAA,uBAAAkC,EAAA,gBAAA,EACA3B,EAAA,MAAA4B,EACA7B,EAAA,MAAA,EAA4B,MAAA,CAE5BwB,EAAA,MAAA,WAAA,CAA2B,CAC7B,EAGFZ,EAAA,MAAAe,GAAA,CACE,GAAA,CACE,MAAAG,GAAA,QAAmB,eACjB,OACA,CACA,kBAAA,KACqB,iBAAA,KACD,KAAA,SACZ,CACR,EAGF,MAAAC,EAAA,MAAAC,GAAA,kBAAAL,EAAA,CAA4D,OAAA,YAClD,CAAA,EAGVI,EAAA,SACEP,EAAA,QAAA,QAAA,EACAJ,KAEAI,EAAA,MAAAO,EAAA,SAAA,MAAA,CACF,OAAAN,EAAA,CAEAA,IAAA,WACE,QAAA,MAAA,WAAAA,CAAA,EACAD,EAAA,MAAA,MAAA,EACF,CACF,EAGFV,EAAA,MAAAa,GAAA,CACE,GAAA,CACE,MAAAG,GAAA,QAAmB,gBACjB,OACA,CACA,kBAAA,KACqB,iBAAA,KACD,KAAA,SACZ,CACR,EAGF,MAAAC,EAAA,MAAAC,GAAA,kBAAAL,EAAA,CAA4D,OAAA,UAClD,CAAA,EAGVI,EAAA,SACEP,EAAA,QAAA,QAAA,EACAJ,KAEAI,EAAA,MAAAO,EAAA,SAAA,MAAA,CACF,OAAAN,EAAA,CAEAA,IAAA,WACE,QAAA,MAAA,WAAAA,CAAA,EACAD,EAAA,MAAA,SAAA,EACF,CACF,EAIF,OAAAS,GAAA,IAAA,CAEE,MAAAC,EAAAf,IACAC,EAAAc,CAAA,CAAgC,CAAA,2BA7ZhC,OAAAlF,EAAA,EAAAC,EAAA,MAAAC,GAAA,CAiDMG,EAAAgB,EAAA8D,EAAA,EAAA,CAjCS,MAAA,QAdL,SAAA,WACG,eAAA,GACM,UAAAjH,CACL,EAAA,cASImC,EAAAc,EAAA,CAAA,KAAA,UALL,KAAAE,EAAAO,EAAA,EACM,QAAA8C,CACH,EAAA,gCAGVzC,EAAA,UAAA,EAAA,CAAA,EAAA,CAAA,oCAkBF,KAAAiB,EAAA,MAbmB,QAAAG,EAClB,QAAAC,EACA,QAAAP,EAAA,MACgB,kBAAA,GACC,MAAAI,EAAA,MAAA,MACC,YAAAA,EAAA,MAAA,UACI,gBAAAa,EAAA,MACK,kBAAAG,EAAA,EACO,iBAAAF,EAClB,SAAAjG,EACR,aAAAqG,EACK,aAAA5F,CACA,EAAA,KAAA,EAAA,CAAA,OAAA,UAAA,QAAA,YAAA,gBAAA,iBAAA,CAAA,QAiBJ,WAAAuE,EAAA,MAZkB,sBAAArB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAd,GAAAmC,EAAA,MAAAnC,GAAA,MAAA,QACtB,MAAA,OACA,MAAA,CAAA,YAAA,QAAA,EACmB,mBAAA,EACzB,EAAA,gBAOEoC,EAAA,OAAAjD,IAAAW,EAAAyE,GAAA,CAAA,IAAA,sBAHgC,QAAAd,EACxB,UAAAC,CACE,EAAA,KAAA,EAAA,CAAA,aAAA,CAAA,GAAAtD,EAAA,GAAA,EAAA"}