import{d as Y,y as Z,u as ee,r as te,p as _,a1 as ae,z as D,c as L,b as o,q as S,w as a,g as r,ab as k,e,X as se,m as le,al as oe,o as f,i as p,a7 as ie,a9 as T,f as ne,ap as re,t as d,bt as ue,aH as pe,bb as de,bu as ce,aP as _e,b7 as ve,aG as me,aT as fe,j as ge,k as he,ah as we,ai as be,E as ye,I as Ce,av as ze,ao as Se,aw as ke,ax as Ee,aS as xe,_ as Ve}from"./index-61294aba.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                     *//* empty css                  */import{u as Pe}from"./suppliers-64727151.js";const De={class:"suppliers-list"},Le={class:"header"},Te={class:"actions"},$e={class:"stats-row"},Be={class:"stat-content"},Ie={class:"stat-number"},Ue={class:"stat-content"},Ae={class:"stat-number"},Me={class:"stat-content"},Ne={class:"stat-number"},Re={class:"stat-content"},je={class:"stat-number"},Fe={class:"supplier-name"},Ke={class:"name-zh"},Oe={key:0,class:"name-en"},qe={class:"action-buttons"},Ge={class:"pagination-container"},We=Y({__name:"List",setup(He){const g=Z(),h=Pe(),$=ee(),n=te({search:"",region:"",status:""}),w=_(()=>h.suppliers),B=_(()=>h.loading),i=_(()=>h.pagination),I=_(()=>w.value.filter(l=>l.is_active).length),U=_(()=>w.value.filter(l=>l.supplier_region==="domestic").length),A=_(()=>w.value.filter(l=>l.supplier_region==="international").length),E=_(()=>$.hasRole("Admin","ProcurementMgr","Procurement")),c=async()=>{try{await h.fetchSuppliers({page:i.value.page,page_size:i.value.page_size,q:n.value.search||void 0,region:n.value.region||void 0,active:n.value.status?n.value.status==="active":void 0})}catch{se.error("載入供應商資料失敗")}},z=()=>{i.value.page=1,c()},M=()=>{n.value={search:"",region:"",status:""},i.value.page=1,c()},N=l=>{i.value.page_size=l,c()},R=l=>{i.value.page=l,c()},j=({prop:l,order:t})=>{console.log("Sort change:",l,t)},F=()=>{g.push("/suppliers/create")},K=l=>{g.push(`/suppliers/${l}`)},O=l=>{g.push(`/suppliers/${l}/edit`)},q=l=>{g.push(`/suppliers/${l}/purchase-orders`)},G=l=>l?new Date(l).toLocaleDateString("zh-TW"):"-";return ae(()=>{c()}),D(()=>n.value.region,()=>{i.value.page===1?c():i.value.page=1}),D(()=>n.value.status,()=>{i.value.page===1?c():i.value.page=1}),(l,t)=>{const v=le,W=ge,b=he,y=we,x=be,H=ye,m=oe,C=Ce,u=ze,V=Se,X=ke,J=Ee,Q=xe;return f(),L("div",De,[o("div",Le,[t[6]||(t[6]=o("div",{class:"title-section"},[o("h1",null,"供應商管理"),o("span",{class:"subtitle"},"管理供應商資料和聯絡資訊")],-1)),o("div",Te,[E.value?(f(),S(v,{key:0,type:"primary",icon:r(ie),onClick:F},{default:a(()=>[...t[5]||(t[5]=[p(" 新增供應商 ",-1)])]),_:1},8,["icon"])):k("",!0)])]),e(m,{class:"filters-card",shadow:"never"},{default:a(()=>[e(H,{model:n.value,inline:!0,class:"filter-form"},{default:a(()=>[e(b,{label:"供應商名稱"},{default:a(()=>[e(W,{modelValue:n.value.search,"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.search=s),placeholder:"搜尋供應商名稱或編號","prefix-icon":r(T),clearable:"",style:{width:"250px"},onClear:z,onKeyup:ne(z,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),e(b,{label:"地區"},{default:a(()=>[e(x,{modelValue:n.value.region,"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.region=s),placeholder:"選擇地區",clearable:"",style:{width:"150px"}},{default:a(()=>[e(y,{label:"國內",value:"domestic"}),e(y,{label:"國外",value:"international"})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"狀態"},{default:a(()=>[e(x,{modelValue:n.value.status,"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.status=s),placeholder:"選擇狀態",clearable:"",style:{width:"120px"}},{default:a(()=>[e(y,{label:"啟用",value:"active"}),e(y,{label:"停用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:a(()=>[e(v,{type:"primary",icon:r(T),onClick:z},{default:a(()=>[...t[7]||(t[7]=[p(" 搜尋 ",-1)])]),_:1},8,["icon"]),e(v,{icon:r(re),onClick:M},{default:a(()=>[...t[8]||(t[8]=[p(" 重置 ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),o("div",$e,[e(m,{class:"stat-card"},{default:a(()=>[o("div",Be,[o("div",Ie,d(i.value.total),1),t[9]||(t[9]=o("div",{class:"stat-label"},"總供應商數",-1))]),e(C,{class:"stat-icon",color:"#409eff"},{default:a(()=>[e(r(ue))]),_:1})]),_:1}),e(m,{class:"stat-card"},{default:a(()=>[o("div",Ue,[o("div",Ae,d(I.value),1),t[10]||(t[10]=o("div",{class:"stat-label"},"啟用中",-1))]),e(C,{class:"stat-icon",color:"#67c23a"},{default:a(()=>[e(r(pe))]),_:1})]),_:1}),e(m,{class:"stat-card"},{default:a(()=>[o("div",Me,[o("div",Ne,d(U.value),1),t[11]||(t[11]=o("div",{class:"stat-label"},"國內供應商",-1))]),e(C,{class:"stat-icon",color:"#e6a23c"},{default:a(()=>[e(r(de))]),_:1})]),_:1}),e(m,{class:"stat-card"},{default:a(()=>[o("div",Re,[o("div",je,d(A.value),1),t[12]||(t[12]=o("div",{class:"stat-label"},"國外供應商",-1))]),e(C,{class:"stat-icon",color:"#f56c6c"},{default:a(()=>[e(r(ce))]),_:1})]),_:1})]),e(m,{class:"table-card",shadow:"never"},{default:a(()=>[_e((f(),S(X,{data:w.value,"row-key":"supplier_id",stripe:"",border:"",style:{width:"100%"},"default-sort":{prop:"supplier_name_zh",order:"ascending"},onSortChange:j},{default:a(()=>[e(u,{prop:"supplier_id",label:"供應商編號",width:"140",sortable:"custom","show-overflow-tooltip":""}),e(u,{prop:"supplier_name_zh",label:"供應商名稱","min-width":"200",sortable:"custom","show-overflow-tooltip":""},{default:a(s=>[o("div",Fe,[o("div",Ke,d(s.row.supplier_name_zh),1),s.row.supplier_name_en?(f(),L("div",Oe,d(s.row.supplier_name_en),1)):k("",!0)])]),_:1}),e(u,{prop:"supplier_region",label:"地區",width:"100",align:"center"},{default:a(s=>[e(V,{type:s.row.supplier_region==="domestic"?"success":"warning",size:"small"},{default:a(()=>[p(d(s.row.supplier_region==="domestic"?"國內":"國外"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"supplier_contact_person",label:"聯絡人",width:"120","show-overflow-tooltip":""}),e(u,{prop:"supplier_phone",label:"聯絡電話",width:"140","show-overflow-tooltip":""}),e(u,{prop:"supplier_email",label:"電子郵件",width:"180","show-overflow-tooltip":""}),e(u,{prop:"is_active",label:"狀態",width:"100",align:"center"},{default:a(s=>[e(V,{type:s.row.is_active?"success":"danger",size:"small"},{default:a(()=>[p(d(s.row.is_active?"啟用":"停用"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"updated_at",label:"更新時間",width:"140",sortable:"custom"},{default:a(s=>[p(d(G(s.row.updated_at)),1)]),_:1}),e(u,{label:"操作",width:"200",fixed:"right",align:"center"},{default:a(s=>[o("div",qe,[e(v,{type:"primary",size:"small",icon:r(ve),onClick:P=>K(s.row.supplier_id)},{default:a(()=>[...t[13]||(t[13]=[p(" 詳情 ",-1)])]),_:1},8,["icon","onClick"]),E.value?(f(),S(v,{key:0,type:"warning",size:"small",icon:r(me),onClick:P=>O(s.row.supplier_id)},{default:a(()=>[...t[14]||(t[14]=[p(" 編輯 ",-1)])]),_:1},8,["icon","onClick"])):k("",!0),e(v,{type:"info",size:"small",icon:r(fe),onClick:P=>q(s.row.supplier_id)},{default:a(()=>[...t[15]||(t[15]=[p(" 採購單 ",-1)])]),_:1},8,["icon","onClick"])])]),_:1})]),_:1},8,["data"])),[[Q,B.value]]),o("div",Ge,[e(J,{"current-page":i.value.page,"onUpdate:currentPage":t[3]||(t[3]=s=>i.value.page=s),"page-size":i.value.page_size,"onUpdate:pageSize":t[4]||(t[4]=s=>i.value.page_size=s),"page-sizes":[10,20,50,100],total:i.value.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:N,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),_:1})])}}});const rt=Ve(We,[["__scopeId","data-v-a843d3e7"],["__file","D:/AWORKSPACE/Github/project_ERP_dev_agent/frontend/src/views/suppliers/List.vue"]]);export{rt as default};
//# sourceMappingURL=List-532e1f99.js.map
