import{d as ne,r as g,p as J,z as ae,q as N,w as o,V as U,X as k,T as ve,o as h,b as e,e as s,i as v,t as i,g as E,ay as me,aT as fe,aU as be,aP as ge,c as z,ac as M,ab as R,j as he,av as re,aw as ie,ah as ue,ai as de,m as pe,I as ce,aS as ye,_ as _e,y as we,u as xe,a1 as Ce,E as $e,ax as ke,aV as Pe,aW as le,aq as F,F as Ee,s as Te,H as oe,k as Oe,ao as Se}from"./index-61294aba.js";/* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                     *//* empty css                  *//* empty css                       *//* empty css                   */import{f as se,a as te}from"./format-8036aac9.js";/* empty css                   *//* empty css                  */const Ve="/assets/TSIC_LOGO-73ada997.png";function ze(D,$){if(window.navigator&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(D,$);return}const d=document.createElement("a");d.style.display="none";const p=window.URL.createObjectURL(D);d.href=p,d.download=$,d.setAttribute("download",$),d.setAttribute("href",p),d.setAttribute("target","_blank"),document.body.appendChild(d);const x=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});d.dispatchEvent(x),setTimeout(()=>{document.body.removeChild(d),window.URL.revokeObjectURL(p)},100)}async function De(D,$="GET",d,p,x){const y={"Content-Type":"application/json"};x&&(y.Authorization=`Bearer ${x}`);const m={method:$,headers:y};d&&$!=="GET"&&(m.body=JSON.stringify(d));const C=await fetch(D,m);if(!C.ok)throw new Error(`Download failed: ${C.status}`);const P=await C.blob();if(!p){const a=C.headers.get("content-disposition");if(a){const T=a.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);T&&T[1]&&(p=T[1].replace(/['"]/g,""))}}if(!p){const a=C.headers.get("content-type")||"",T=a.includes("pdf")?"pdf":a.includes("excel")||a.includes("spreadsheet")?"xlsx":"bin";p=`download_${Date.now()}.${T}`}return ze(P,p),P}const qe={class:"company-header"},Le={class:"header-right"},Me={class:"status-info non-printable-section"},Ne={key:0,class:"export-history"},Ue={class:"info-table-section"},Re={class:"info-table"},Ae={class:"value"},Be={class:"value"},Ie={class:"value"},Fe={class:"value"},We={class:"value"},je={class:"value"},Ge={class:"value"},He={class:"value"},Xe={class:"section"},Ke={class:"totals-section"},Je={class:"total-row"},Qe={class:"total-row"},Ye={class:"total-row grand-total"},Ze={class:"section terms-section"},et={key:0,class:"terms-selector"},tt={class:"terms-print-content",style:{display:"none"}},st={key:0,class:"non-printable-section"},at={class:"section"},lt={class:"delivery-info"},ot={class:"info-row"},nt={class:"value"},rt={class:"info-row"},it={class:"value"},ut={class:"section supplier-section"},dt={class:"supplier-info"},pt={class:"supplier-row"},ct={class:"info-item"},_t={class:"value"},vt={class:"info-item"},mt={class:"value"},ft={class:"supplier-row"},bt={class:"info-item"},gt={class:"value"},ht={class:"supplier-row"},yt={class:"info-item"},wt={class:"value"},xt={class:"info-item"},Ct={class:"value"},$t={class:"supplier-row"},kt={class:"info-item"},Pt={class:"value"},Et={class:"info-item"},Tt={class:"value"},Ot={class:"dialog-footer"},St=ne({__name:"PreviewModal",props:{visible:{type:Boolean,required:!0},poNo:{type:String,required:!0}},emits:["update:visible","exported"],setup(D,{emit:$}){const d=D,p=$,x=g(!1),y=g(!1),m=g(!1),C=g(!1),P=g(!1),a=g({purchase_order_no:"",supplier_id:"",supplier_name:"",subtotal_int:0,tax_decimal1:0,grand_total_int:0,items:[]}),T=g({name:"Taiwan Semiconductor Innovation Company",address:"台北市信義區信義路五段7號",phone:"02-8101-2345"}),W=g("standard"),S=g(`1. 付款條件：月結 30 天
2. 交貨期限：訂單確認後 14 個工作天
3. 品質要求：須符合國家標準規範
4. 驗收標準：貨到 7 日內完成驗收
5. 保固期限：自驗收合格日起算一年`),Q=J(()=>a.value.items.map((r,t)=>({...r,index:t+1}))),V=J(()=>!0),A=J(()=>({pending:"待處理",confirmed:"已確認",order_created:"已建立",outputted:"已製單",purchased:"已採購",shipped:"已出貨"})[a.value.purchase_status||""]||a.value.purchase_status||"未知"),j=J(()=>{if(!a.value.export_count||a.value.export_count===0)return"";const r=a.value.last_export_at?new Date(a.value.last_export_at).toLocaleString("zh-TW"):"";return`已輸出 ${a.value.export_count} 次${r?`，最後輸出：${r}`:""}`});ae(()=>d.visible,r=>{x.value=r,r&&d.poNo&&G()}),ae(x,r=>{p("update:visible",r)});const G=async()=>{y.value=!0;try{const t=await U.getPurchaseOrder(d.poNo);a.value={purchase_order_no:t.purchase_order_no||"",supplier_id:t.supplier_id||"",supplier_name:t.supplier_name||"",supplier_address:t.supplier_address||"",contact_person:t.contact_person||"",contact_phone:t.contact_phone||"",supplier_tax_id:t.supplier_tax_id||"",supplier_email:t.supplier_email||"",order_date:t.order_date||t.creation_date,quotation_no:t.quotation_no||"",delivery_address:t.delivery_address||"",expected_delivery_date:t.expected_delivery_date||"",notes:t.notes||"",purchase_status:t.purchase_status||"",last_export_at:t.last_export_at||"",export_count:t.export_count||0,subtotal_int:t.subtotal_int||0,tax_decimal1:t.tax_decimal1||0,grand_total_int:t.grand_total_int||0,items:t.items||[]},H("standard")}catch(r){k.error("載入預覽資料失敗"),console.error("Failed to load preview:",r)}finally{y.value=!1}},H=r=>{const t={standard:`1. 付款條件：月結 30 天
2. 交貨期限：訂單確認後 14 個工作天
3. 品質要求：須符合國家標準規範
4. 驗收標準：貨到 7 日內完成驗收
5. 保固期限：自驗收合格日起算一年`,urgent:`1. 付款條件：貨到付款
2. 交貨期限：訂單確認後 3 個工作天內
3. 品質要求：須符合國家標準規範
4. 驗收標準：貨到當日完成驗收
5. 保固期限：自驗收合格日起算一年
6. 急件處理：需優先處理並確保準時交貨`,custom:""};t[r]!==void 0&&(S.value=t[r])},X=()=>{x.value=!1},K=async r=>{var t,f;m.value=!0,P.value=!0;try{a.value.quotation_no&&a.value.purchase_status!=="outputted"&&await U.updatePurchaseOrder(d.poNo,{quotation_no:a.value.quotation_no});const _=localStorage.getItem("auth_token"),O="http://localhost:5000/api/v1",w=r==="excel"?`PO_${d.poNo}.xlsx`:`PO_${d.poNo}.pdf`;await De(`${O}/po/${d.poNo}/export`,"POST",{format:r},w,_),await G(),p("exported")}catch(_){((f=(t=_.response)==null?void 0:t.data)==null?void 0:f.error_code)==="EXPORT_NOT_ALLOWED"?k.error(`無法輸出：採購單狀態為「${_.response.data.details.current_status}」`):k.error(`輸出 ${r.toUpperCase()} 失敗`),console.error("Export failed:",_)}finally{m.value=!1,P.value=!1}},b=g(!1),Y=()=>{b.value=!b.value},Z=async()=>{var r,t;C.value=!0;try{a.value.quotation_no&&a.value.purchase_status!=="outputted"&&await U.updatePurchaseOrder(d.poNo,{quotation_no:a.value.quotation_no});const f=await U.exportPurchaseOrder(d.poNo,{format:"print"});f.export_info&&(a.value.purchase_status=f.export_info.current_status,a.value.export_count=f.export_info.export_count,a.value.last_export_at=f.export_info.export_timestamp,p("exported"));const _=document.querySelector(".terms-section"),O=document.querySelector(".terms-print-content");O&&(O.textContent=S.value,O.style.display="block"),setTimeout(()=>{window.print()},200)}catch(f){((t=(r=f.response)==null?void 0:r.data)==null?void 0:t.error_code)==="EXPORT_NOT_ALLOWED"?k.error(`無法列印：採購單狀態為「${f.response.data.details.current_status}」`):k.error("準備列印失敗"),console.error("Print preparation failed:",f)}finally{C.value=!1}},u=r=>r?new Date(r).toLocaleDateString("zh-TW"):"-",l=r=>r.toLocaleString("zh-TW"),q=(r,t=!0)=>(console.log("formatCurrency received:",r,typeof r),t?se(r):se(r).replace("NT$ ",""));return(r,t)=>{const f=he,_=re,O=ie,w=ue,ee=de,L=pe,I=ce,n=ve,B=ye;return h(),N(n,{modelValue:x.value,"onUpdate:modelValue":t[5]||(t[5]=c=>x.value=c),title:"採購單預覽",width:"1200px","before-close":X,class:"po-preview-modal"},{footer:o(()=>[e("span",Ot,[s(L,{onClick:X},{default:o(()=>[...t[35]||(t[35]=[v("關閉",-1)])]),_:1}),s(L,{onClick:Y,type:b.value?"warning":"info"},{default:o(()=>[v(i(b.value?"返回編輯模式":"列印預覽模式"),1)]),_:1},8,["type"]),s(L,{type:"primary",onClick:t[3]||(t[3]=c=>K("excel")),loading:m.value,disabled:!V.value,title:V.value?"":`採購單狀態為「${A.value}」，無法輸出`},{default:o(()=>[s(I,null,{default:o(()=>[s(E(me))]),_:1}),t[36]||(t[36]=v(" 輸出 Excel ",-1))]),_:1},8,["loading","disabled","title"]),s(L,{type:"primary",onClick:t[4]||(t[4]=c=>K("pdf")),loading:m.value,disabled:!V.value,title:V.value?"":`採購單狀態為「${A.value}」，無法輸出`},{default:o(()=>[s(I,null,{default:o(()=>[s(E(fe))]),_:1}),t[37]||(t[37]=v(" 輸出 PDF ",-1))]),_:1},8,["loading","disabled","title"]),s(L,{type:"primary",onClick:Z,loading:C.value,disabled:!V.value,title:V.value?"":`採購單狀態為「${A.value}」，無法列印`},{default:o(()=>[s(I,null,{default:o(()=>[s(E(be))]),_:1}),t[38]||(t[38]=v(" 列印 ",-1))]),_:1},8,["loading","disabled","title"])])]),default:o(()=>[ge((h(),z("div",{class:M(["preview-container",{"print-preview-mode":b.value}])},[e("div",qe,[t[6]||(t[6]=e("div",{class:"logo-section"},[e("img",{src:Ve,alt:"Company Logo",class:"company-logo"})],-1)),t[7]||(t[7]=e("div",{class:"header-center"},[e("h1",{class:"title"},"採購單"),e("h2",{class:"subtitle"},"PURCHASE ORDER")],-1)),e("div",Le,[e("div",Me,[e("div",{class:M(["status-badge",{outputted:a.value.purchase_status==="outputted","order-created":a.value.purchase_status==="order_created"}])},i(A.value),3),j.value?(h(),z("div",Ne,i(j.value),1)):R("",!0)])])]),e("div",Ue,[e("table",Re,[e("tr",null,[t[8]||(t[8]=e("td",{class:"label"},"廠商名稱",-1)),e("td",Ae,i(a.value.supplier_name),1),t[9]||(t[9]=e("td",{class:"label"},"採購單號",-1)),e("td",Be,i(a.value.purchase_order_no),1)]),e("tr",null,[t[10]||(t[10]=e("td",{class:"label"},"廠商編號",-1)),e("td",Ie,i(a.value.supplier_id),1),t[11]||(t[11]=e("td",{class:"label"},"訂購日期",-1)),e("td",Fe,i(u(a.value.order_date)),1)]),e("tr",null,[t[12]||(t[12]=e("td",{class:"label"},"廠商地址",-1)),e("td",We,i(a.value.supplier_address||"-"),1),t[13]||(t[13]=e("td",{class:"label"},"報價單號",-1)),e("td",je,[s(f,{modelValue:a.value.quotation_no,"onUpdate:modelValue":t[0]||(t[0]=c=>a.value.quotation_no=c),size:"small",style:{width:"150px"},placeholder:"請輸入",disabled:P.value},null,8,["modelValue","disabled"])])]),e("tr",null,[t[14]||(t[14]=e("td",{class:"label"},"連絡電話",-1)),e("td",Ge,i(a.value.contact_phone||"-"),1),t[15]||(t[15]=e("td",{class:"label"},"聯絡人",-1)),e("td",He,i(a.value.contact_person||"-"),1)])])]),e("div",Xe,[t[17]||(t[17]=e("h3",{class:"section-title"},"採購明細 Purchase Items",-1)),s(O,{data:Q.value,border:"",style:{width:"100%"}},{default:o(()=>[s(_,{prop:"index",label:"項次",width:"60",align:"center"}),s(_,{prop:"item_name",label:"品名","min-width":"150"}),s(_,{prop:"item_specification",label:"規格","min-width":"120"},{default:o(c=>[v(i(c.row.item_specification||"-"),1)]),_:1}),s(_,{prop:"item_model",label:"型號","min-width":"100"},{default:o(c=>[v(i(c.row.item_model||"-"),1)]),_:1}),s(_,{prop:"item_quantity",label:"數量",width:"80",align:"right"},{default:o(c=>[v(i(l(c.row.item_quantity)),1)]),_:1}),s(_,{prop:"item_unit",label:"單位",width:"60",align:"center"}),s(_,{prop:"unit_price",label:"單價",width:"100",align:"right"},{default:o(c=>[e("span",{class:M({"print-currency":b.value})},i(q(c.row.unit_price,!b.value)),3)]),_:1}),s(_,{prop:"line_subtotal",label:"小計",width:"120",align:"right"},{default:o(c=>[e("span",{class:M({"print-currency":b.value})},i(q(c.row.line_subtotal||c.row.item_quantity*c.row.unit_price,!b.value)),3)]),_:1}),s(_,{label:"備註","min-width":"100"},{default:o(()=>[...t[16]||(t[16]=[v(" - ",-1)])]),_:1})]),_:1},8,["data"])]),e("div",Ke,[e("div",Je,[t[18]||(t[18]=e("span",{class:"label"},"小計 Subtotal：",-1)),e("span",{class:M(["value",{"print-currency":b.value}])},i(q(a.value.subtotal_int,!b.value)),3)]),e("div",Qe,[t[19]||(t[19]=e("span",{class:"label"},"稅額 Tax (5%)：",-1)),e("span",{class:M(["value",{"print-currency":b.value}])},i(q(a.value.tax_decimal1,!b.value)),3)]),e("div",Ye,[t[20]||(t[20]=e("span",{class:"label"},"總計 Total：",-1)),e("span",{class:M(["value",{"print-currency":b.value}])},i(q(a.value.grand_total_int,!b.value)),3)])]),e("div",Ze,[t[21]||(t[21]=e("h3",{class:"section-title"},"注意事項 Terms and Conditions",-1)),P.value?R("",!0):(h(),z("div",et,[s(ee,{modelValue:W.value,"onUpdate:modelValue":t[1]||(t[1]=c=>W.value=c),placeholder:"選擇注意事項模板",size:"small",style:{width:"200px","margin-bottom":"10px"},onChange:H},{default:o(()=>[s(w,{label:"標準條款",value:"standard"}),s(w,{label:"急件條款",value:"urgent"}),s(w,{label:"自訂條款",value:"custom"})]),_:1},8,["modelValue"])])),s(f,{modelValue:S.value,"onUpdate:modelValue":t[2]||(t[2]=c=>S.value=c),type:"textarea",rows:8,placeholder:"請輸入注意事項內容",disabled:P.value},null,8,["modelValue","disabled"]),e("div",tt,i(S.value),1)]),t[34]||(t[34]=e("div",{class:"signature-section"},[e("div",{class:"signature-row"},[e("div",{class:"signature-item"},[e("span",{class:"label"},"採購人員："),e("span",{class:"signature-line"})]),e("div",{class:"signature-item"},[e("span",{class:"label"},"核准主管："),e("span",{class:"signature-line"})])]),e("div",{class:"signature-row"},[e("div",{class:"signature-item"},[e("span",{class:"label"},"日期："),e("span",{class:"signature-line"})]),e("div",{class:"signature-item"},[e("span",{class:"label"},"日期："),e("span",{class:"signature-line"})])])],-1)),b.value?R("",!0):(h(),z("div",st,[t[33]||(t[33]=e("div",{class:"divider-line"},null,-1)),e("div",at,[t[24]||(t[24]=e("h3",{class:"section-title"},"交貨資訊 Delivery Information",-1)),e("div",lt,[e("div",ot,[t[22]||(t[22]=e("span",{class:"label"},"交貨地址：",-1)),e("span",nt,i(a.value.delivery_address||T.value.address),1)]),e("div",rt,[t[23]||(t[23]=e("span",{class:"label"},"預計交貨日期：",-1)),e("span",it,i(a.value.expected_delivery_date||"訂單確認後 14 個工作天"),1)])])]),e("div",ut,[t[32]||(t[32]=e("h3",{class:"section-title"},"供應商詳細資訊 Supplier Details",-1)),e("div",dt,[e("div",pt,[e("div",ct,[t[25]||(t[25]=e("span",{class:"label"},"廠商名稱：",-1)),e("span",_t,i(a.value.supplier_name),1)]),e("div",vt,[t[26]||(t[26]=e("span",{class:"label"},"廠商編號：",-1)),e("span",mt,i(a.value.supplier_id),1)])]),e("div",ft,[e("div",bt,[t[27]||(t[27]=e("span",{class:"label"},"廠商地址：",-1)),e("span",gt,i(a.value.supplier_address||"-"),1)])]),e("div",ht,[e("div",yt,[t[28]||(t[28]=e("span",{class:"label"},"連絡電話：",-1)),e("span",wt,i(a.value.contact_phone||"-"),1)]),e("div",xt,[t[29]||(t[29]=e("span",{class:"label"},"聯絡人：",-1)),e("span",Ct,i(a.value.contact_person||"-"),1)])]),e("div",$t,[e("div",kt,[t[30]||(t[30]=e("span",{class:"label"},"統一編號：",-1)),e("span",Pt,i(a.value.supplier_tax_id||"-"),1)]),e("div",Et,[t[31]||(t[31]=e("span",{class:"label"},"電子郵件：",-1)),e("span",Tt,i(a.value.supplier_email||"-"),1)])])])])]))],2)),[[B,y.value]])]),_:1},8,["modelValue"])}}});const Vt=_e(St,[["__scopeId","data-v-96d4a8bb"],["__file","D:/AWORKSPACE/Github/project_ERP_dev_agent/frontend/src/views/purchase-orders/PreviewModal.vue"]]),zt={class:"purchase-orders-list"},Dt={class:"page-header"},qt={class:"header-actions"},Lt={class:"filters"},Mt={class:"table-container"},Nt={class:"user-name"},Ut={class:"user-popover"},Rt={key:1},At={class:"user-name"},Bt={class:"user-popover"},It={key:1},Ft={class:"pagination"},Wt={class:"pagination-total"},jt=ne({__name:"List",setup(D){const $=we(),d=xe(),p=g(!1),x=g([]),y=g({supplier:"",status:""}),m=g({page:1,size:20,total:0}),C=g(!1),P=g(""),a=async()=>{p.value=!0;try{const u=await U.getPurchaseOrders({...y.value,page:m.value.page,page_size:m.value.size});x.value=u.items,m.value.total=u.pagination.total}catch(u){console.error("載入採購單列表失敗:",u),k.error("載入採購單列表失敗")}finally{p.value=!1}},T=()=>{y.value={supplier:"",status:""},m.value.page=1,a()},W=()=>{$.push("/purchase-orders/build-candidates")},S=u=>{$.push(`/purchase-orders/${u.purchase_order_no}`)},Q=u=>{$.push(`/purchase-orders/${u.purchase_order_no}/edit`)},V=u=>["order_created","pending"].includes(u.purchase_status),A=u=>!0,j=u=>u.purchase_status==="outputted",G=u=>d.hasRole("ProcurementMgr","Admin")&&u.purchase_status!=="cancelled",H=u=>{P.value=u.purchase_order_no,C.value=!0},X=()=>{a()},K=async u=>{try{await oe.confirm(`確定要將採購單 ${u.purchase_order_no} 狀態更改為已採購嗎？`,"確認採購",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}),p.value=!0;const l=await U.confirmPurchase(u.purchase_order_no);l.success?(k.success("採購單已確認採購"),a()):k.error(l.message||"確認採購失敗")}catch(l){l!=="cancel"&&(console.error("確認採購失敗:",l),k.error("確認採購失敗"))}finally{p.value=!1}},b=async u=>{try{await oe.confirm(`是否確定要撤銷該張採購單 ${u.purchase_order_no}？`,"確認撤銷",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}),p.value=!0;const l=await U.cancelPO(u.purchase_order_no,{reason:"管理員撤銷採購單"});l.success?(k.success("採購單已撤銷"),a()):k.error(l.message||"撤銷失敗")}catch(l){l!=="cancel"&&(console.error("撤銷採購單失敗:",l),k.error("撤銷採購單失敗"))}finally{p.value=!1}},Y=u=>({pending:"info",confirmed:"primary",order_created:"",outputted:"primary",purchased:"success",shipped:"warning",cancelled:"info"})[u]||"info",Z=u=>({pending:"已建立",confirmed:"已製單",order_created:"已建立",outputted:"已製單",purchased:"已採購",shipped:"已發貨",cancelled:"已撤銷"})[u]||u;return Ce(()=>{a()}),(u,l)=>{const q=ce,r=pe,t=ue,f=de,_=Oe,O=$e,w=re,ee=Se,L=ie,I=ke;return h(),z("div",zt,[e("div",Dt,[l[6]||(l[6]=e("h1",{class:"page-title"},"採購單列表",-1)),e("div",qt,[s(r,{type:"primary",onClick:W},{default:o(()=>[s(q,null,{default:o(()=>[s(E(Pe))]),_:1}),l[5]||(l[5]=v(" 建立採購單 ",-1))]),_:1})])]),e("div",Lt,[s(O,{model:y.value,inline:""},{default:o(()=>[s(_,{label:"供應商"},{default:o(()=>[s(f,{modelValue:y.value.supplier,"onUpdate:modelValue":l[0]||(l[0]=n=>y.value.supplier=n),placeholder:"選擇供應商",clearable:"",style:{width:"200px"}},{default:o(()=>[s(t,{label:"全部",value:""})]),_:1},8,["modelValue"])]),_:1}),s(_,{label:"狀態"},{default:o(()=>[s(f,{modelValue:y.value.status,"onUpdate:modelValue":l[1]||(l[1]=n=>y.value.status=n),placeholder:"選擇狀態",clearable:"",style:{width:"150px"}},{default:o(()=>[s(t,{label:"全部",value:""}),s(t,{label:"已建立",value:"order_created"}),s(t,{label:"已製單",value:"outputted"}),s(t,{label:"已採購",value:"purchased"}),s(t,{label:"已發貨",value:"shipped"}),s(t,{label:"已撤銷",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),s(_,null,{default:o(()=>[s(r,{type:"primary",onClick:a},{default:o(()=>[...l[7]||(l[7]=[v("搜尋",-1)])]),_:1}),s(r,{onClick:T},{default:o(()=>[...l[8]||(l[8]=[v("重設",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),e("div",Mt,[s(L,{data:x.value,loading:p.value,stripe:"",onRowClick:S},{default:o(()=>[s(w,{prop:"purchase_order_no",label:"採購單號",width:"140"}),s(w,{prop:"supplier_name",label:"供應商",width:"160"}),s(w,{prop:"grand_total_int",label:"總金額",width:"100"},{default:o(({row:n})=>[v(i(E(se)(n.grand_total_int)),1)]),_:1}),s(w,{prop:"purchase_status",label:"狀態",width:"90"},{default:o(({row:n})=>[s(ee,{type:Y(n.purchase_status)},{default:o(()=>[v(i(Z(n.purchase_status)),1)]),_:2},1032,["type"])]),_:1}),s(w,{prop:"output_person_name",label:"製單人",width:"100"},{default:o(({row:n})=>[n.output_person_name?(h(),N(E(le),{key:0,placement:"top",width:"220",trigger:"hover"},{reference:o(()=>[e("span",Nt,i(n.output_person_name),1)]),default:o(()=>[e("div",Ut,[l[9]||(l[9]=e("p",null,[e("strong",null,"製單人資訊")],-1)),e("p",null,"姓名: "+i(n.output_person_name),1),e("p",null,"帳號: "+i(n.output_person_username),1),e("p",null,"製單時間: "+i(E(te)(n.output_timestamp)),1)])]),_:2},1024)):(h(),z("span",Rt,"-"))]),_:1}),s(w,{prop:"confirm_purchaser_name",label:"採購人",width:"100"},{default:o(({row:n})=>[n.confirm_purchaser_name?(h(),N(E(le),{key:0,placement:"top",width:"220",trigger:"hover"},{reference:o(()=>[e("span",At,i(n.confirm_purchaser_name),1)]),default:o(()=>[e("div",Bt,[l[10]||(l[10]=e("p",null,[e("strong",null,"採購人資訊")],-1)),e("p",null,"姓名: "+i(n.confirm_purchaser_name),1),e("p",null,"帳號: "+i(n.confirm_purchaser_username),1),e("p",null,"採購時間: "+i(E(te)(n.confirm_timestamp)),1)])]),_:2},1024)):(h(),z("span",It,"-"))]),_:1}),s(w,{prop:"created_at",label:"建立時間",width:"160"},{default:o(({row:n})=>[v(i(E(te)(n.created_at)),1)]),_:1}),s(w,{label:"操作",width:"300",fixed:"right"},{default:o(({row:n})=>[s(r,{size:"small",onClick:F(B=>S(n),["stop"])},{default:o(()=>[...l[11]||(l[11]=[v("詳情",-1)])]),_:1},8,["onClick"]),V(n)?(h(),N(r,{key:0,size:"small",type:"primary",onClick:F(B=>Q(n),["stop"])},{default:o(()=>[...l[12]||(l[12]=[v(" 編輯 ",-1)])]),_:1},8,["onClick"])):R("",!0),A(n)?(h(),N(r,{key:1,size:"small",type:"success",onClick:F(B=>H(n),["stop"])},{default:o(()=>[...l[13]||(l[13]=[v(" 輸出 ",-1)])]),_:1},8,["onClick"])):R("",!0),j(n)?(h(),N(r,{key:2,size:"small",type:"warning",onClick:F(B=>K(n),["stop"])},{default:o(()=>[...l[14]||(l[14]=[v(" 確認採購 ",-1)])]),_:1},8,["onClick"])):R("",!0),G(n)?(h(),N(r,{key:3,size:"small",type:"danger",onClick:F(B=>b(n),["stop"])},{default:o(()=>[...l[15]||(l[15]=[v(" 撤銷 ",-1)])]),_:1},8,["onClick"])):R("",!0)]),_:1})]),_:1},8,["data","loading"]),e("div",Ft,[s(I,{"current-page":m.value.page,"onUpdate:currentPage":l[2]||(l[2]=n=>m.value.page=n),"page-size":m.value.size,"onUpdate:pageSize":l[3]||(l[3]=n=>m.value.size=n),total:m.value.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper","prev-text":"上一頁","next-text":"下一頁",background:"",onSizeChange:a,onCurrentChange:a},{sizes:o(()=>[s(f,{"model-value":m.value.size,"onUpdate:modelValue":a,style:{width:"100px"},size:"small"},{default:o(()=>[(h(),z(Ee,null,Te([10,20,50,100],n=>s(t,{key:n,label:`${n}筆/頁`,value:n},null,8,["label","value"])),64))]),_:1},8,["model-value"])]),total:o(()=>[e("span",Wt,"共 "+i(m.value.total)+" 筆",1)]),_:1},8,["current-page","page-size","total"])])]),s(Vt,{visible:C.value,"onUpdate:visible":l[4]||(l[4]=n=>C.value=n),"po-no":P.value,onExported:X},null,8,["visible","po-no"])])}}});const rs=_e(jt,[["__scopeId","data-v-13fb451b"],["__file","D:/AWORKSPACE/Github/project_ERP_dev_agent/frontend/src/views/purchase-orders/List.vue"]]);export{rs as default};
//# sourceMappingURL=List-ba1fd474.js.map
