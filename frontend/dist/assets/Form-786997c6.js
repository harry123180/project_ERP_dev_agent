import{d as q,n as j,y as A,r as D,p as k,a as M,a1 as O,c as S,b as i,t as V,e,w as a,g as w,X as _,m as P,al as T,o as h,i as x,aZ as $,aq as G,ab as U,bb as L,bu as X,q as Z,H,j as K,k as W,aj as J,ah as Q,ai as Y,a4 as ee,bv as le,E as te,_ as ae}from"./index-61294aba.js";/* empty css                *//* empty css                     *//* empty css                  *//* empty css               *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  *//* empty css                       *//* empty css                   */import{u as oe}from"./suppliers-64727151.js";const se={class:"supplier-form"},re={class:"header"},ie={class:"title-section"},pe={class:"subtitle"},ne={class:"actions"},ue={class:"form-section"},de={key:0,class:"field-help"},me={class:"form-section"},_e={class:"form-section"},ce={class:"form-section"},fe={class:"form-actions"},ge=q({__name:"Form",setup(ve){const v=j(),B=A(),c=oe(),b=D(),n=k(()=>!!v.params.id),R=k(()=>c.loading),t=M({supplier_id:"",supplier_name_zh:"",supplier_name_en:"",supplier_address:"",supplier_phone:"",supplier_email:"",supplier_contact_person:"",supplier_tax_id:"",supplier_region:"domestic",supplier_remark:"",payment_terms:"",bank_account:"",is_active:!0}),z={supplier_id:[{required:!0,message:"請輸入供應商編號",trigger:"blur"},{min:2,max:50,message:"供應商編號長度應為2-50個字符",trigger:"blur"},{pattern:/^[A-Za-z0-9_-]+$/,message:"供應商編號只能包含字母、數字、底線和短橫線",trigger:"blur"}],supplier_name_zh:[{required:!0,message:"請輸入供應商中文名稱",trigger:"blur"},{min:2,max:200,message:"供應商名稱長度應為2-200個字符",trigger:"blur"}],supplier_name_en:[{max:200,message:"英文名稱長度不能超過200個字符",trigger:"blur"}],supplier_region:[{required:!0,message:"請選擇供應商地區",trigger:"change"}],supplier_email:[{type:"email",message:"請輸入正確的電子郵件格式",trigger:["blur","change"]}],supplier_phone:[{pattern:/^[\d\s\-\+\(\)]+$/,message:"請輸入有效的電話號碼",trigger:"blur"}]},C=async()=>{if(n.value)try{const d=await c.fetchSupplierById(v.params.id);Object.assign(t,d)}catch{_.error("載入供應商資料失敗"),f()}},y=async()=>{var d,l,m,p,s,u;if(b.value)try{await b.value.validate(),await H.confirm(`確定要${n.value?"更新":"建立"}這個供應商嗎？`,"確認操作",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}),n.value?(await c.updateSupplier(v.params.id,t),_.success("供應商資料更新成功")):(await c.createSupplier(t),_.success("供應商建立成功")),f()}catch(r){if(r==="cancel")return;if(((m=(l=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:l.error)==null?void 0:m.code)==="SUPPLIER_EXISTS"){_.error("供應商編號已存在，請使用不同的編號");return}if(((u=(s=(p=r==null?void 0:r.response)==null?void 0:p.data)==null?void 0:s.error)==null?void 0:u.code)==="INVALID_REGION"){_.error("供應商地區選擇無效");return}_.error(`${n.value?"更新":"建立"}供應商失敗`)}},f=()=>{B.push("/suppliers")};return O(()=>{n.value&&C()}),(d,l)=>{const m=P,p=K,s=W,u=J,r=Q,E=Y,g=ee,I=le,F=te,N=T;return h(),S("div",se,[i("div",re,[i("div",ie,[i("h1",null,V(n.value?"編輯供應商":"新增供應商"),1),i("span",pe,V(n.value?"編輯供應商基本資料":"建立新的供應商資料"),1)]),i("div",ne,[e(m,{onClick:f,icon:w($)},{default:a(()=>[...l[13]||(l[13]=[x(" 返回列表 ",-1)])]),_:1},8,["icon"])])]),e(N,{class:"form-card",shadow:"never"},{default:a(()=>[e(F,{ref_key:"formRef",ref:b,model:t,rules:z,"label-width":"120px",size:"default",onSubmit:G(y,["prevent"])},{default:a(()=>[i("div",ue,[l[14]||(l[14]=i("h3",{class:"section-title"},"基本資訊",-1)),e(g,{gutter:24},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(s,{label:"供應商編號",prop:"supplier_id"},{default:a(()=>[e(p,{modelValue:t.supplier_id,"onUpdate:modelValue":l[0]||(l[0]=o=>t.supplier_id=o),placeholder:"請輸入供應商編號",disabled:n.value,maxlength:"50","show-word-limit":""},null,8,["modelValue","disabled"]),n.value?U("",!0):(h(),S("div",de," 供應商編號一旦建立後不可修改 "))]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(s,{label:"供應商地區",prop:"supplier_region"},{default:a(()=>[e(E,{modelValue:t.supplier_region,"onUpdate:modelValue":l[1]||(l[1]=o=>t.supplier_region=o),placeholder:"請選擇供應商地區",style:{width:"100%"}},{default:a(()=>[e(r,{label:"國內",value:"domestic",icon:w(L)},null,8,["icon"]),e(r,{label:"國外",value:"international",icon:w(X)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:24},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(s,{label:"中文名稱",prop:"supplier_name_zh"},{default:a(()=>[e(p,{modelValue:t.supplier_name_zh,"onUpdate:modelValue":l[2]||(l[2]=o=>t.supplier_name_zh=o),placeholder:"請輸入供應商中文名稱",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(s,{label:"英文名稱",prop:"supplier_name_en"},{default:a(()=>[e(p,{modelValue:t.supplier_name_en,"onUpdate:modelValue":l[3]||(l[3]=o=>t.supplier_name_en=o),placeholder:"請輸入供應商英文名稱（選填）",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"供應商地址",prop:"supplier_address"},{default:a(()=>[e(p,{modelValue:t.supplier_address,"onUpdate:modelValue":l[4]||(l[4]=o=>t.supplier_address=o),type:"textarea",placeholder:"請輸入供應商地址",rows:3,maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),i("div",me,[l[15]||(l[15]=i("h3",{class:"section-title"},"聯絡資訊",-1)),e(g,{gutter:24},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(s,{label:"聯絡人",prop:"supplier_contact_person"},{default:a(()=>[e(p,{modelValue:t.supplier_contact_person,"onUpdate:modelValue":l[5]||(l[5]=o=>t.supplier_contact_person=o),placeholder:"請輸入聯絡人姓名",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(s,{label:"聯絡電話",prop:"supplier_phone"},{default:a(()=>[e(p,{modelValue:t.supplier_phone,"onUpdate:modelValue":l[6]||(l[6]=o=>t.supplier_phone=o),placeholder:"請輸入聯絡電話",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"電子郵件",prop:"supplier_email"},{default:a(()=>[e(p,{modelValue:t.supplier_email,"onUpdate:modelValue":l[7]||(l[7]=o=>t.supplier_email=o),type:"email",placeholder:"請輸入電子郵件地址",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),i("div",_e,[l[16]||(l[16]=i("h3",{class:"section-title"},"財務資訊",-1)),e(g,{gutter:24},{default:a(()=>[e(u,{span:12},{default:a(()=>[e(s,{label:"統一編號",prop:"supplier_tax_id"},{default:a(()=>[e(p,{modelValue:t.supplier_tax_id,"onUpdate:modelValue":l[8]||(l[8]=o=>t.supplier_tax_id=o),placeholder:"請輸入統一編號",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:a(()=>[e(s,{label:"付款條件",prop:"payment_terms"},{default:a(()=>[e(E,{modelValue:t.payment_terms,"onUpdate:modelValue":l[9]||(l[9]=o=>t.payment_terms=o),placeholder:"請選擇付款條件",style:{width:"100%"},filterable:"","allow-create":""},{default:a(()=>[e(r,{label:"現金",value:"cash"}),e(r,{label:"月結30天",value:"net_30"}),e(r,{label:"月結60天",value:"net_60"}),e(r,{label:"月結90天",value:"net_90"}),e(r,{label:"預付款",value:"prepaid"}),e(r,{label:"貨到付款",value:"cod"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{label:"銀行帳戶",prop:"bank_account"},{default:a(()=>[e(p,{modelValue:t.bank_account,"onUpdate:modelValue":l[10]||(l[10]=o=>t.bank_account=o),type:"textarea",placeholder:"請輸入銀行帳戶資訊",rows:2,maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),i("div",ce,[l[17]||(l[17]=i("h3",{class:"section-title"},"其他資訊",-1)),e(s,{label:"備註",prop:"supplier_remark"},{default:a(()=>[e(p,{modelValue:t.supplier_remark,"onUpdate:modelValue":l[11]||(l[11]=o=>t.supplier_remark=o),type:"textarea",placeholder:"請輸入備註",rows:3,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),n.value?(h(),Z(s,{key:0,label:"啟用狀態",prop:"is_active"},{default:a(()=>[e(I,{modelValue:t.is_active,"onUpdate:modelValue":l[12]||(l[12]=o=>t.is_active=o),"active-text":t.is_active?"已啟用":"已停用","inactive-text":t.is_active?"已啟用":"已停用","active-color":"#67c23a","inactive-color":"#f56c6c"},null,8,["modelValue","active-text","inactive-text"])]),_:1})):U("",!0)]),i("div",fe,[e(m,{onClick:f,size:"large"},{default:a(()=>[...l[18]||(l[18]=[x(" 取消 ",-1)])]),_:1}),e(m,{type:"primary",onClick:y,loading:R.value,size:"large"},{default:a(()=>[x(V(n.value?"更新":"建立"),1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})])}}});const Ce=ae(ge,[["__scopeId","data-v-4b28d3ff"],["__file","D:/AWORKSPACE/Github/project_ERP_dev_agent/frontend/src/views/suppliers/Form.vue"]]);export{Ce as default};
//# sourceMappingURL=Form-786997c6.js.map
