# 請購流程

Prompt:

我描述一下我的請購單的業務流程 你幫我依據我給你的資料表去設計模型 工程師(User)->採購請求page->填入[1.物品名稱2.數量3.規格4.備註]可能有多個item，以及該張請購單的用途[日常/某個專案用]->可能儲存為草稿，也有可能直接提交審核 此時該請購單有一個自己生成的請購單號、每個物品(item)的序號(生成)、每個item的物品名稱、所需數量、規格、備註，以及用途、以及請購單狀態(草稿/提交/(之後還有一個已審核))，並且提交之後有提交日期。 到請購單審核頁面 採購人員必須完善每個請購項目具體供應商、Item名稱與規格可能要根據供應商規範作修改，填入確切單價，並且每個Item要可以切換狀態，可能是[核准]、[有疑問]、[無法購買]，或者整張單駁回就該張請購單的Item狀態都更新為[駁回]，請購單的Item數量都必須是正整數 有疑問的話單價跟供應商不是必填的。但必須要備註原因 我的請購單的需求是這樣

# 👷 工程師 → 請購 → 👨‍💼 採購主管

（先不談資料怎麼寫表，只講「流程」）

1. **工程師提出需求**
    - 工程師打開「請購單頁面」。
    - 他輸入自己要的物品：可能是電腦 3 台、螢幕 5 個、滑鼠 10 個。
    - 他可以先「存成草稿」（還沒送出），或直接「送出請購」。
2. **請購單產生**
    - 系統會給這張單一個唯一的「請購單號」。
    - 單子裡列著多個物品，每個物品就是一個「明細」。
    - 這時候，單子的狀態會是「已提交，待審核」。
3. **通知採購單位**
    - 採購人員或採購主管會在系統裡看到「有新的請購單待審核」。
    - 他們打開請購單，就能看到工程師填的物品明細。
4. **採購人員逐一檢視明細**
    - 他們需要確認每一個物品是否能買得到、要跟哪個供應商買、單價是多少。
    - 有些東西可能很清楚，直接就「核准」。
    - 有些東西型號不明確，可能會標記「有疑問」。
    - 有些東西市場上買不到，會標記「無法購買」。
5. **單一明細 vs 整張單**
    - 每一個物品明細都可以有自己的審核結果。
    - 如果整張單本身有問題（例如用途寫錯、預算超額），採購主管可以把整張單「駁回」，那這張單裡的所有物品都算是「駁回」。
6. **審核結束**
    - 當所有明細都處理完後，整張請購單的狀態會變成「已審核完成」。
    - 這張單接下來可能會變成「採購單」去進行實際的下單。

---
config:
  layout: dagre
---
flowchart TD
    A["工程師：開啟請購單頁面"] --> B["工程師：輸入多個物品明細"]
    B --> C{"先存草稿?"}
    C -- 是 --> D["存成草稿（未送出）"]
    D --> B
    C -- 否（送出） --> E["系統：產生請購單號"]
    E --> F["狀態：已提交（待審核）"]
    F --> G["通知採購單位：有待審核單"]
    G --> H["採購人員：逐一檢視明細"]
    H --> I{"明細判定"} & M{"整張單有問題?"}
    I -- 核准 --> J["明細：標記為「核准」"]
    I -- 有疑問 --> K["明細：標記為「有疑問」"]
    I -- 無法購買 --> L["明細：標記為「無法購買」"]
    K --> R["採購人員：向請購人確認並補資訊"] & P{"所有明細皆已判定?"}
    R --> J
    M -- 是 --> N["整張單：駁回（所有明細視為駁回）"]
    M -- 否 --> I
    J --> P
    L --> P
    P -- 否，繼續審核 --> H
    P -- 是 --> Q["請購單狀態：已審核完成"]
    Q --> S["下一步：可進入採購單製作流程"]
